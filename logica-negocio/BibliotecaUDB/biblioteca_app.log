2025-05-07 14:18:09 [main] INFO  bibliotecaudb.servicio.ServicioUsuario - Servicio: Intento de login para el correo: admin@udb.com
2025-05-07 14:18:09 [main] INFO  bibliotecaudb.conexion.ConexionBD - Configuración cargada: URL=[jdbc:mysql://localhost:3306/biblioteca], User=[root]
2025-05-07 14:18:09 [main] INFO  bibliotecaudb.conexion.ConexionBD - Conexión es null o está cerrada. Intentando establecer conexión...
2025-05-07 14:18:09 [main] INFO  bibliotecaudb.conexion.ConexionBD - Intentando conectar a URL=[jdbc:mysql://localhost:3306/biblioteca] con User=[root]
2025-05-07 14:18:10 [main] INFO  bibliotecaudb.conexion.ConexionBD - Conexión establecida exitosamente a: jdbc:mysql://localhost:3306/biblioteca
2025-05-07 14:18:10 [main] INFO  bibliotecaudb.servicio.ServicioUsuario - Servicio: Login exitoso para el usuario: admin (admin@udb.com)
2025-05-07 14:18:10 [main] INFO  bibliotecaudb.servicio.ServicioUsuario - Servicio: Intento de login para el correo: alumno1@udb.com
2025-05-07 14:18:10 [main] WARN  bibliotecaudb.servicio.ServicioUsuario - Servicio: Login fallido - Contraseña incorrecta para: alumno1@udb.com
2025-05-07 14:18:10 [main] INFO  bibliotecaudb.servicio.ServicioUsuario - Servicio: Intento de login para el correo: noexiste@udb.com
2025-05-07 14:18:10 [main] WARN  bibliotecaudb.dao.usuario.UsuarioDAO - No se encontró usuario activo con correo: noexiste@udb.com
2025-05-07 14:18:10 [main] WARN  bibliotecaudb.servicio.ServicioUsuario - Servicio: Login fallido - Usuario no encontrado: noexiste@udb.com
2025-05-07 14:18:10 [main] INFO  bibliotecaudb.servicio.ServicioUsuario - Servicio: Intento de registrar nuevo usuario con correo: profesor.nuevo1746649090561@udb.com
2025-05-07 14:18:10 [main] WARN  bibliotecaudb.dao.usuario.UsuarioDAO - No se encontró usuario activo con correo: profesor.nuevo1746649090561@udb.com
2025-05-07 14:18:10 [main] INFO  bibliotecaudb.dao.usuario.UsuarioDAO - Usuario creado exitosamente con ID: 5 para el correo: profesor.nuevo1746649090561@udb.com
2025-05-07 14:18:10 [main] INFO  bibliotecaudb.servicio.ServicioUsuario - Servicio: Usuario registrado exitosamente: profesor.nuevo1746649090561@udb.com con ID: 5
2025-05-07 14:18:10 [main] INFO  bibliotecaudb.servicio.ServicioUsuario - Servicio: Intento de login para el correo: profesor.nuevo1746649090561@udb.com
2025-05-07 14:18:10 [main] INFO  bibliotecaudb.servicio.ServicioUsuario - Servicio: Login exitoso para el usuario: Profe Nuevo Ejemplo (profesor.nuevo1746649090561@udb.com)
2025-05-07 14:18:10 [main] INFO  bibliotecaudb.servicio.ServicioUsuario - Servicio: Intento de registrar nuevo usuario con correo: admin@udb.com
2025-05-07 14:18:10 [main] WARN  bibliotecaudb.servicio.ServicioUsuario - Servicio: Registro fallido - El correo admin@udb.com ya existe.
2025-05-07 14:18:10 [main] INFO  bibliotecaudb.servicio.ServicioUsuario - Servicio: Intento de restablecer contraseña para: profesor.nuevo1746649090561@udb.com
2025-05-07 14:18:10 [main] INFO  bibliotecaudb.dao.usuario.UsuarioDAO - Contraseña actualizada para el usuario: profesor.nuevo1746649090561@udb.com
2025-05-07 14:18:10 [main] INFO  bibliotecaudb.servicio.ServicioUsuario - Servicio: Contraseña restablecida exitosamente para: profesor.nuevo1746649090561@udb.com
2025-05-07 14:18:10 [main] INFO  bibliotecaudb.servicio.ServicioUsuario - Servicio: Intento de login para el correo: profesor.nuevo1746649090561@udb.com
2025-05-07 14:18:10 [main] INFO  bibliotecaudb.servicio.ServicioUsuario - Servicio: Login exitoso para el usuario: Profe Nuevo Ejemplo (profesor.nuevo1746649090561@udb.com)
2025-05-07 14:18:10 [main] INFO  bibliotecaudb.servicio.ServicioUsuario - Servicio: Intento de login para el correo: alumno1@udb.com
2025-05-07 14:18:10 [main] INFO  bibliotecaudb.servicio.ServicioUsuario - Servicio: Login exitoso para el usuario: Alumno1 (alumno1@udb.com)
2025-05-07 14:18:10 [main] INFO  bibliotecaudb.servicio.ServicioUsuario - Servicio: Intento de gestionar datos para usuario ID: 3
2025-05-07 14:18:10 [main] INFO  bibliotecaudb.dao.usuario.UsuarioDAO - Usuario actualizado: alumno1@udb.com
2025-05-07 14:18:10 [main] INFO  bibliotecaudb.servicio.ServicioUsuario - Servicio: Datos actualizados para usuario ID: 3
2025-05-07 14:18:10 [main] INFO  bibliotecaudb.servicio.ServicioUsuario - Servicio: Intento de gestionar datos para usuario ID: 3
2025-05-07 14:18:10 [main] INFO  bibliotecaudb.dao.usuario.UsuarioDAO - Usuario actualizado: alumno1@udb.com
2025-05-07 14:18:10 [main] INFO  bibliotecaudb.servicio.ServicioUsuario - Servicio: Datos actualizados para usuario ID: 3
2025-05-07 14:18:10 [main] INFO  bibliotecaudb.conexion.ConexionBD - Cerrando la conexión a la BD...
2025-05-07 14:18:10 [main] INFO  bibliotecaudb.conexion.ConexionBD - Conexión cerrada correctamente.
2025-05-07 15:27:35 [main] INFO  bibliotecaudb.pruebas.PruebasModuloUsuario - --- INICIO DE PRUEBAS MANUALES ---
2025-05-07 15:27:35 [main] INFO  bibliotecaudb.conexion.ConexionBD - Configuración cargada: URL=[jdbc:mysql://localhost:3306/biblioteca], User=[root]
2025-05-07 15:27:35 [main] INFO  bibliotecaudb.conexion.ConexionBD - Conexión es null o está cerrada. Intentando establecer conexión...
2025-05-07 15:27:35 [main] INFO  bibliotecaudb.conexion.ConexionBD - Intentando conectar a URL=[jdbc:mysql://localhost:3306/biblioteca] con User=[root]
2025-05-07 15:27:36 [main] INFO  bibliotecaudb.conexion.ConexionBD - Conexión establecida exitosamente a: jdbc:mysql://localhost:3306/biblioteca
2025-05-07 15:27:36 [main] INFO  bibliotecaudb.dao.usuario.TipoUsuarioDAO - Se obtuvieron 3 tipos de usuario.
2025-05-07 15:27:36 [main] INFO  bibliotecaudb.pruebas.PruebasModuloUsuario - --- FIN DE PRUEBAS MANUALES ---
2025-05-07 15:27:36 [main] INFO  bibliotecaudb.conexion.ConexionBD - Cerrando la conexión a la BD...
2025-05-07 15:27:36 [main] INFO  bibliotecaudb.conexion.ConexionBD - Conexión cerrada correctamente.
2025-05-07 15:30:14 [main] INFO  bibliotecaudb.pruebas.PruebasModuloUsuario - --- INICIO DE PRUEBAS MANUALES ---
2025-05-07 15:30:14 [main] INFO  bibliotecaudb.servicio.ServicioUsuario - Servicio: Intento de login para el correo: admin@udb.com
2025-05-07 15:30:14 [main] INFO  bibliotecaudb.conexion.ConexionBD - Configuración cargada: URL=[jdbc:mysql://localhost:3306/biblioteca], User=[root]
2025-05-07 15:30:14 [main] INFO  bibliotecaudb.conexion.ConexionBD - Conexión es null o está cerrada. Intentando establecer conexión...
2025-05-07 15:30:14 [main] INFO  bibliotecaudb.conexion.ConexionBD - Intentando conectar a URL=[jdbc:mysql://localhost:3306/biblioteca] con User=[root]
2025-05-07 15:30:15 [main] INFO  bibliotecaudb.conexion.ConexionBD - Conexión establecida exitosamente a: jdbc:mysql://localhost:3306/biblioteca
2025-05-07 15:30:15 [main] INFO  bibliotecaudb.servicio.ServicioUsuario - Servicio: Login exitoso para el usuario: admin (admin@udb.com)
2025-05-07 15:30:15 [main] INFO  bibliotecaudb.servicio.ServicioUsuario - Servicio: Intento de login para el correo: alumno1@udb.com
2025-05-07 15:30:15 [main] WARN  bibliotecaudb.servicio.ServicioUsuario - Servicio: Login fallido - Contraseña incorrecta para: alumno1@udb.com
2025-05-07 15:30:15 [main] INFO  bibliotecaudb.servicio.ServicioUsuario - Servicio: Intento de login para el correo: noexiste@udb.com
2025-05-07 15:30:15 [main] WARN  bibliotecaudb.dao.usuario.UsuarioDAO - No se encontró usuario activo con correo: noexiste@udb.com
2025-05-07 15:30:15 [main] WARN  bibliotecaudb.servicio.ServicioUsuario - Servicio: Login fallido - Usuario no encontrado: noexiste@udb.com
2025-05-07 15:30:15 [main] INFO  bibliotecaudb.pruebas.PruebasModuloUsuario - --- FIN DE PRUEBAS MANUALES ---
2025-05-07 15:30:15 [main] INFO  bibliotecaudb.conexion.ConexionBD - Cerrando la conexión a la BD...
2025-05-07 15:30:15 [main] INFO  bibliotecaudb.conexion.ConexionBD - Conexión cerrada correctamente.
2025-05-07 15:33:21 [main] INFO  bibliotecaudb.pruebas.PruebasModuloUsuario - --- INICIO DE PRUEBAS MANUALES ---
2025-05-07 15:33:21 [main] INFO  bibliotecaudb.servicio.ServicioUsuario - Servicio: Intento de registrar nuevo usuario con correo: profe.test.1746653601535@udb.com
2025-05-07 15:33:21 [main] INFO  bibliotecaudb.conexion.ConexionBD - Configuración cargada: URL=[jdbc:mysql://localhost:3306/biblioteca], User=[root]
2025-05-07 15:33:21 [main] INFO  bibliotecaudb.conexion.ConexionBD - Conexión es null o está cerrada. Intentando establecer conexión...
2025-05-07 15:33:21 [main] INFO  bibliotecaudb.conexion.ConexionBD - Intentando conectar a URL=[jdbc:mysql://localhost:3306/biblioteca] con User=[root]
2025-05-07 15:33:22 [main] INFO  bibliotecaudb.conexion.ConexionBD - Conexión establecida exitosamente a: jdbc:mysql://localhost:3306/biblioteca
2025-05-07 15:33:22 [main] WARN  bibliotecaudb.dao.usuario.UsuarioDAO - No se encontró usuario activo con correo: profe.test.1746653601535@udb.com
2025-05-07 15:33:22 [main] INFO  bibliotecaudb.dao.usuario.UsuarioDAO - Usuario creado exitosamente con ID: 6 para el correo: profe.test.1746653601535@udb.com
2025-05-07 15:33:22 [main] INFO  bibliotecaudb.servicio.ServicioUsuario - Servicio: Usuario registrado exitosamente: profe.test.1746653601535@udb.com con ID: 6
2025-05-07 15:33:22 [main] INFO  bibliotecaudb.servicio.ServicioUsuario - Servicio: Intento de login para el correo: profe.test.1746653601535@udb.com
2025-05-07 15:33:22 [main] INFO  bibliotecaudb.servicio.ServicioUsuario - Servicio: Login exitoso para el usuario: Profesor De Prueba (profe.test.1746653601535@udb.com)
2025-05-07 15:33:22 [main] INFO  bibliotecaudb.servicio.ServicioUsuario - Servicio: Intento de registrar nuevo usuario con correo: admin@udb.com
2025-05-07 15:33:22 [main] WARN  bibliotecaudb.servicio.ServicioUsuario - Servicio: Registro fallido - El correo admin@udb.com ya existe.
2025-05-07 15:33:22 [main] INFO  bibliotecaudb.pruebas.PruebasModuloUsuario - --- FIN DE PRUEBAS MANUALES ---
2025-05-07 15:33:22 [main] INFO  bibliotecaudb.conexion.ConexionBD - Cerrando la conexión a la BD...
2025-05-07 15:33:22 [main] INFO  bibliotecaudb.conexion.ConexionBD - Conexión cerrada correctamente.
2025-05-07 15:35:05 [main] INFO  bibliotecaudb.pruebas.PruebasModuloUsuario - --- INICIO DE PRUEBAS MANUALES ---
2025-05-07 15:35:05 [main] INFO  bibliotecaudb.servicio.ServicioUsuario - Servicio: Intento de restablecer contraseña para: admin@udb.com
2025-05-07 15:35:05 [main] INFO  bibliotecaudb.conexion.ConexionBD - Configuración cargada: URL=[jdbc:mysql://localhost:3306/biblioteca], User=[root]
2025-05-07 15:35:05 [main] INFO  bibliotecaudb.conexion.ConexionBD - Conexión es null o está cerrada. Intentando establecer conexión...
2025-05-07 15:35:05 [main] INFO  bibliotecaudb.conexion.ConexionBD - Intentando conectar a URL=[jdbc:mysql://localhost:3306/biblioteca] con User=[root]
2025-05-07 15:35:06 [main] INFO  bibliotecaudb.conexion.ConexionBD - Conexión establecida exitosamente a: jdbc:mysql://localhost:3306/biblioteca
2025-05-07 15:35:06 [main] INFO  bibliotecaudb.dao.usuario.UsuarioDAO - Contraseña actualizada para el usuario: admin@udb.com
2025-05-07 15:35:06 [main] INFO  bibliotecaudb.servicio.ServicioUsuario - Servicio: Contraseña restablecida exitosamente para: admin@udb.com
2025-05-07 15:35:06 [main] INFO  bibliotecaudb.servicio.ServicioUsuario - Servicio: Intento de login para el correo: admin@udb.com
2025-05-07 15:35:06 [main] INFO  bibliotecaudb.servicio.ServicioUsuario - Servicio: Login exitoso para el usuario: admin (admin@udb.com)
2025-05-07 15:35:06 [main] INFO  bibliotecaudb.servicio.ServicioUsuario - Servicio: Intento de restablecer contraseña para: admin@udb.com
2025-05-07 15:35:06 [main] INFO  bibliotecaudb.dao.usuario.UsuarioDAO - Contraseña actualizada para el usuario: admin@udb.com
2025-05-07 15:35:06 [main] INFO  bibliotecaudb.servicio.ServicioUsuario - Servicio: Contraseña restablecida exitosamente para: admin@udb.com
2025-05-07 15:35:06 [main] INFO  bibliotecaudb.pruebas.PruebasModuloUsuario - --- FIN DE PRUEBAS MANUALES ---
2025-05-07 15:35:06 [main] INFO  bibliotecaudb.conexion.ConexionBD - Cerrando la conexión a la BD...
2025-05-07 15:35:06 [main] INFO  bibliotecaudb.conexion.ConexionBD - Conexión cerrada correctamente.
2025-05-07 15:35:54 [main] INFO  bibliotecaudb.pruebas.PruebasModuloUsuario - --- INICIO DE PRUEBAS MANUALES ---
2025-05-07 15:35:54 [main] INFO  bibliotecaudb.servicio.ServicioUsuario - Servicio: Intento de gestionar datos para usuario ID: 3
2025-05-07 15:35:54 [main] INFO  bibliotecaudb.conexion.ConexionBD - Configuración cargada: URL=[jdbc:mysql://localhost:3306/biblioteca], User=[root]
2025-05-07 15:35:54 [main] INFO  bibliotecaudb.conexion.ConexionBD - Conexión es null o está cerrada. Intentando establecer conexión...
2025-05-07 15:35:54 [main] INFO  bibliotecaudb.conexion.ConexionBD - Intentando conectar a URL=[jdbc:mysql://localhost:3306/biblioteca] con User=[root]
2025-05-07 15:35:54 [main] INFO  bibliotecaudb.conexion.ConexionBD - Conexión establecida exitosamente a: jdbc:mysql://localhost:3306/biblioteca
2025-05-07 15:35:55 [main] INFO  bibliotecaudb.dao.usuario.UsuarioDAO - Usuario actualizado: alumno1@udb.com
2025-05-07 15:35:55 [main] INFO  bibliotecaudb.servicio.ServicioUsuario - Servicio: Datos actualizados para usuario ID: 3
2025-05-07 15:35:55 [main] INFO  bibliotecaudb.servicio.ServicioUsuario - Servicio: Intento de gestionar datos para usuario ID: 3
2025-05-07 15:35:55 [main] INFO  bibliotecaudb.dao.usuario.UsuarioDAO - Usuario actualizado: alumno1@udb.com
2025-05-07 15:35:55 [main] INFO  bibliotecaudb.servicio.ServicioUsuario - Servicio: Datos actualizados para usuario ID: 3
2025-05-07 15:35:55 [main] INFO  bibliotecaudb.pruebas.PruebasModuloUsuario - --- FIN DE PRUEBAS MANUALES ---
2025-05-07 15:35:55 [main] INFO  bibliotecaudb.conexion.ConexionBD - Cerrando la conexión a la BD...
2025-05-07 15:35:55 [main] INFO  bibliotecaudb.conexion.ConexionBD - Conexión cerrada correctamente.
2025-05-07 18:04:20 [main] INFO  bibliotecaudb.pruebas.PruebasModuloUsuario - --- INICIO DE PRUEBAS MANUALES ---
2025-05-07 18:04:20 [main] INFO  bibliotecaudb.conexion.ConexionBD - Configuración cargada: URL=[jdbc:mysql://localhost:3306/biblioteca], User=[root]
2025-05-07 18:04:20 [main] INFO  bibliotecaudb.conexion.ConexionBD - Conexión es null o está cerrada. Intentando establecer conexión...
2025-05-07 18:04:20 [main] INFO  bibliotecaudb.conexion.ConexionBD - Intentando conectar a URL=[jdbc:mysql://localhost:3306/biblioteca] con User=[root]
2025-05-07 18:04:21 [main] INFO  bibliotecaudb.conexion.ConexionBD - Conexión establecida exitosamente a: jdbc:mysql://localhost:3306/biblioteca
2025-05-07 18:04:21 [main] INFO  bibliotecaudb.dao.usuario.TipoUsuarioDAO - Se obtuvieron 3 tipos de usuario.
2025-05-07 18:04:21 [main] INFO  bibliotecaudb.pruebas.PruebasModuloUsuario - --- FIN DE PRUEBAS MANUALES ---
2025-05-07 18:04:21 [main] INFO  bibliotecaudb.conexion.ConexionBD - Cerrando la conexión a la BD...
2025-05-07 18:04:21 [main] INFO  bibliotecaudb.conexion.ConexionBD - Conexión cerrada correctamente.
2025-05-07 21:17:32 [main] INFO  bibliotecaudb.pruebas.PruebasModuloUsuario - --- INICIO DE PRUEBAS MANUALES ---
2025-05-07 21:17:32 [main] INFO  bibliotecaudb.conexion.ConexionBD - Configuración cargada: URL=[jdbc:mysql://localhost:3306/biblioteca], User=[root]
2025-05-07 21:17:32 [main] INFO  bibliotecaudb.conexion.ConexionBD - Conexión es null o está cerrada. Intentando establecer conexión...
2025-05-07 21:17:32 [main] INFO  bibliotecaudb.conexion.ConexionBD - Intentando conectar a URL=[jdbc:mysql://localhost:3306/biblioteca] con User=[root]
2025-05-07 21:17:33 [main] INFO  bibliotecaudb.conexion.ConexionBD - Conexión establecida exitosamente a: jdbc:mysql://localhost:3306/biblioteca
2025-05-07 21:17:33 [main] INFO  bibliotecaudb.dao.usuario.TipoUsuarioDAO - Se obtuvieron 3 tipos de usuario.
2025-05-07 21:17:33 [main] INFO  bibliotecaudb.pruebas.PruebasModuloUsuario - --- FIN DE PRUEBAS MANUALES ---
2025-05-07 21:17:33 [main] INFO  bibliotecaudb.conexion.ConexionBD - Cerrando la conexión a la BD...
2025-05-07 21:17:33 [main] INFO  bibliotecaudb.conexion.ConexionBD - Conexión cerrada correctamente.
2025-05-07 22:47:56 [main] INFO  bibliotecaudb.pruebas.PruebasModuloUsuario - --- INICIO DE PRUEBAS MANUALES ---
2025-05-07 22:47:56 [main] INFO  bibliotecaudb.conexion.ConexionBD - Configuración cargada: URL=[jdbc:mysql://localhost:3306/biblioteca], User=[root]
2025-05-07 22:47:56 [main] INFO  bibliotecaudb.conexion.ConexionBD - Conexión es null o está cerrada. Intentando establecer conexión...
2025-05-07 22:47:56 [main] INFO  bibliotecaudb.conexion.ConexionBD - Intentando conectar a URL=[jdbc:mysql://localhost:3306/biblioteca] con User=[root]
2025-05-07 22:47:57 [main] INFO  bibliotecaudb.conexion.ConexionBD - Conexión establecida exitosamente a: jdbc:mysql://localhost:3306/biblioteca
2025-05-07 22:47:57 [main] INFO  bibliotecaudb.dao.usuario.TipoUsuarioDAO - Se obtuvieron 3 tipos de usuario.
2025-05-07 22:47:57 [main] INFO  bibliotecaudb.pruebas.PruebasModuloUsuario - --- FIN DE PRUEBAS MANUALES ---
2025-05-07 22:47:57 [main] INFO  bibliotecaudb.conexion.ConexionBD - Cerrando la conexión a la BD...
2025-05-07 22:47:57 [main] INFO  bibliotecaudb.conexion.ConexionBD - Conexión cerrada correctamente.
2025-05-07 22:50:45 [main] INFO  bibliotecaudb.pruebas.PruebasModuloUsuario - --- INICIO DE PRUEBAS MANUALES ---
2025-05-07 22:50:45 [main] INFO  bibliotecaudb.conexion.ConexionBD - Configuración cargada: URL=[jdbc:mysql://localhost:3306/biblioteca], User=[root]
2025-05-07 22:50:45 [main] INFO  bibliotecaudb.conexion.ConexionBD - Conexión es null o está cerrada. Intentando establecer conexión...
2025-05-07 22:50:45 [main] INFO  bibliotecaudb.conexion.ConexionBD - Intentando conectar a URL=[jdbc:mysql://localhost:3306/biblioteca] con User=[root]
2025-05-07 22:50:45 [main] ERROR bibliotecaudb.conexion.ConexionBD - Error SQL al conectar a la BD. SQLState: 28000, ErrorCode: 1045
java.sql.SQLException: Access denied for user 'root'@'localhost' (using password: YES)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:121)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:114)
	at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:833)
	at com.mysql.cj.jdbc.ConnectionImpl.<init>(ConnectionImpl.java:416)
	at com.mysql.cj.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:238)
	at com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:180)
	at java.sql/java.sql.DriverManager.getConnection(DriverManager.java:681)
	at java.sql/java.sql.DriverManager.getConnection(DriverManager.java:229)
	at bibliotecaudb.conexion.ConexionBD.establishConnection(ConexionBD.java:69)
	at bibliotecaudb.conexion.ConexionBD.getConexion(ConexionBD.java:52)
	at bibliotecaudb.dao.usuario.TipoUsuarioDAO.obtenerTodos(TipoUsuarioDAO.java:63)
	at bibliotecaudb.pruebas.PruebasModuloUsuario.main(PruebasModuloUsuario.java:40)
2025-05-07 22:50:45 [main] ERROR bibliotecaudb.dao.usuario.TipoUsuarioDAO - Error al obtener todos los tipos de usuario
java.sql.SQLException: Access denied for user 'root'@'localhost' (using password: YES)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:121)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:114)
	at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:833)
	at com.mysql.cj.jdbc.ConnectionImpl.<init>(ConnectionImpl.java:416)
	at com.mysql.cj.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:238)
	at com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:180)
	at java.sql/java.sql.DriverManager.getConnection(DriverManager.java:681)
	at java.sql/java.sql.DriverManager.getConnection(DriverManager.java:229)
	at bibliotecaudb.conexion.ConexionBD.establishConnection(ConexionBD.java:69)
	at bibliotecaudb.conexion.ConexionBD.getConexion(ConexionBD.java:52)
	at bibliotecaudb.dao.usuario.TipoUsuarioDAO.obtenerTodos(TipoUsuarioDAO.java:63)
	at bibliotecaudb.pruebas.PruebasModuloUsuario.main(PruebasModuloUsuario.java:40)
2025-05-07 22:50:45 [main] ERROR bibliotecaudb.pruebas.PruebasModuloUsuario - Error en prueba básica de conexión
java.sql.SQLException: Access denied for user 'root'@'localhost' (using password: YES)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:121)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:114)
	at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:833)
	at com.mysql.cj.jdbc.ConnectionImpl.<init>(ConnectionImpl.java:416)
	at com.mysql.cj.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:238)
	at com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:180)
	at java.sql/java.sql.DriverManager.getConnection(DriverManager.java:681)
	at java.sql/java.sql.DriverManager.getConnection(DriverManager.java:229)
	at bibliotecaudb.conexion.ConexionBD.establishConnection(ConexionBD.java:69)
	at bibliotecaudb.conexion.ConexionBD.getConexion(ConexionBD.java:52)
	at bibliotecaudb.dao.usuario.TipoUsuarioDAO.obtenerTodos(TipoUsuarioDAO.java:63)
	at bibliotecaudb.pruebas.PruebasModuloUsuario.main(PruebasModuloUsuario.java:40)
2025-05-07 22:50:45 [main] INFO  bibliotecaudb.pruebas.PruebasModuloUsuario - --- FIN DE PRUEBAS MANUALES ---
2025-05-07 22:50:45 [main] INFO  bibliotecaudb.conexion.ConexionBD - La conexión ya era null, no se necesita cerrar.
2025-05-07 23:01:49 [main] INFO  bibliotecaudb.pruebas.PruebasModuloUsuario - --- INICIO DE PRUEBAS MANUALES ---
2025-05-07 23:01:49 [main] INFO  bibliotecaudb.conexion.ConexionBD - Configuración cargada: URL=[jdbc:mysql://localhost:3306/biblioteca], User=[root]
2025-05-07 23:01:49 [main] INFO  bibliotecaudb.conexion.ConexionBD - Conexión es null o está cerrada. Intentando establecer conexión...
2025-05-07 23:01:49 [main] INFO  bibliotecaudb.conexion.ConexionBD - Intentando conectar a URL=[jdbc:mysql://localhost:3306/biblioteca] con User=[root]
2025-05-07 23:01:50 [main] ERROR bibliotecaudb.conexion.ConexionBD - Error SQL al conectar a la BD. SQLState: 28000, ErrorCode: 1045
java.sql.SQLException: Access denied for user 'root'@'localhost' (using password: YES)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:121)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:114)
	at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:833)
	at com.mysql.cj.jdbc.ConnectionImpl.<init>(ConnectionImpl.java:416)
	at com.mysql.cj.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:238)
	at com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:180)
	at java.sql/java.sql.DriverManager.getConnection(DriverManager.java:681)
	at java.sql/java.sql.DriverManager.getConnection(DriverManager.java:229)
	at bibliotecaudb.conexion.ConexionBD.establishConnection(ConexionBD.java:69)
	at bibliotecaudb.conexion.ConexionBD.getConexion(ConexionBD.java:52)
	at bibliotecaudb.dao.usuario.TipoUsuarioDAO.obtenerTodos(TipoUsuarioDAO.java:63)
	at bibliotecaudb.pruebas.PruebasModuloUsuario.main(PruebasModuloUsuario.java:40)
2025-05-07 23:01:50 [main] ERROR bibliotecaudb.dao.usuario.TipoUsuarioDAO - Error al obtener todos los tipos de usuario
java.sql.SQLException: Access denied for user 'root'@'localhost' (using password: YES)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:121)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:114)
	at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:833)
	at com.mysql.cj.jdbc.ConnectionImpl.<init>(ConnectionImpl.java:416)
	at com.mysql.cj.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:238)
	at com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:180)
	at java.sql/java.sql.DriverManager.getConnection(DriverManager.java:681)
	at java.sql/java.sql.DriverManager.getConnection(DriverManager.java:229)
	at bibliotecaudb.conexion.ConexionBD.establishConnection(ConexionBD.java:69)
	at bibliotecaudb.conexion.ConexionBD.getConexion(ConexionBD.java:52)
	at bibliotecaudb.dao.usuario.TipoUsuarioDAO.obtenerTodos(TipoUsuarioDAO.java:63)
	at bibliotecaudb.pruebas.PruebasModuloUsuario.main(PruebasModuloUsuario.java:40)
2025-05-07 23:01:50 [main] ERROR bibliotecaudb.pruebas.PruebasModuloUsuario - Error en prueba básica de conexión
java.sql.SQLException: Access denied for user 'root'@'localhost' (using password: YES)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:121)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:114)
	at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:833)
	at com.mysql.cj.jdbc.ConnectionImpl.<init>(ConnectionImpl.java:416)
	at com.mysql.cj.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:238)
	at com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:180)
	at java.sql/java.sql.DriverManager.getConnection(DriverManager.java:681)
	at java.sql/java.sql.DriverManager.getConnection(DriverManager.java:229)
	at bibliotecaudb.conexion.ConexionBD.establishConnection(ConexionBD.java:69)
	at bibliotecaudb.conexion.ConexionBD.getConexion(ConexionBD.java:52)
	at bibliotecaudb.dao.usuario.TipoUsuarioDAO.obtenerTodos(TipoUsuarioDAO.java:63)
	at bibliotecaudb.pruebas.PruebasModuloUsuario.main(PruebasModuloUsuario.java:40)
2025-05-07 23:01:50 [main] INFO  bibliotecaudb.pruebas.PruebasModuloUsuario - --- FIN DE PRUEBAS MANUALES ---
2025-05-07 23:01:50 [main] INFO  bibliotecaudb.conexion.ConexionBD - La conexión ya era null, no se necesita cerrar.
2025-05-07 23:02:38 [main] INFO  bibliotecaudb.pruebas.PruebasModuloUsuario - --- INICIO DE PRUEBAS MANUALES ---
2025-05-07 23:02:38 [main] INFO  bibliotecaudb.conexion.ConexionBD - Configuración cargada: URL=[jdbc:mysql://localhost:3306/biblioteca], User=[root]
2025-05-07 23:02:38 [main] INFO  bibliotecaudb.conexion.ConexionBD - Conexión es null o está cerrada. Intentando establecer conexión...
2025-05-07 23:02:38 [main] INFO  bibliotecaudb.conexion.ConexionBD - Intentando conectar a URL=[jdbc:mysql://localhost:3306/biblioteca] con User=[root]
2025-05-07 23:02:39 [main] INFO  bibliotecaudb.conexion.ConexionBD - Conexión establecida exitosamente a: jdbc:mysql://localhost:3306/biblioteca
2025-05-07 23:02:39 [main] INFO  bibliotecaudb.dao.usuario.TipoUsuarioDAO - Se obtuvieron 3 tipos de usuario.
2025-05-07 23:02:39 [main] INFO  bibliotecaudb.pruebas.PruebasModuloUsuario - --- FIN DE PRUEBAS MANUALES ---
2025-05-07 23:02:39 [main] INFO  bibliotecaudb.conexion.ConexionBD - Cerrando la conexión a la BD...
2025-05-07 23:02:39 [main] INFO  bibliotecaudb.conexion.ConexionBD - Conexión cerrada correctamente.
2025-05-11 12:03:27 [main] INFO  bibliotecaudb.pruebas.PruebasModuloBiblioteca - --- INICIO DE PRUEBAS DEL MODULO BIBLIOTECA ---
2025-05-11 12:03:27 [main] INFO  bibliotecaudb.servicio.ServicioUsuario - Servicio: Intento de login para el correo: alumno1@udb.com
2025-05-11 12:03:27 [main] INFO  bibliotecaudb.conexion.ConexionBD - Configuración cargada: URL=[jdbc:mysql://localhost:3306/biblioteca], User=[root]
2025-05-11 12:03:27 [main] INFO  bibliotecaudb.conexion.ConexionBD - Conexión es null o está cerrada. Intentando establecer conexión...
2025-05-11 12:03:27 [main] INFO  bibliotecaudb.conexion.ConexionBD - Intentando conectar a URL=[jdbc:mysql://localhost:3306/biblioteca] con User=[root]
2025-05-11 12:03:28 [main] INFO  bibliotecaudb.conexion.ConexionBD - Conexión establecida exitosamente a: jdbc:mysql://localhost:3306/biblioteca
2025-05-11 12:03:28 [main] INFO  bibliotecaudb.servicio.ServicioUsuario - Servicio: Login exitoso para el usuario: Alumno1 (alumno1@udb.com)
2025-05-11 12:03:28 [main] INFO  bibliotecaudb.pruebas.PruebasModuloBiblioteca - Usuario de prueba para préstamos obtenido: Alumno1
2025-05-11 12:03:28 [main] INFO  bibliotecaudb.pruebas.PruebasModuloBiblioteca - --- FIN DE PRUEBAS DEL MODULO BIBLIOTECA ---
2025-05-11 12:03:28 [main] INFO  bibliotecaudb.conexion.ConexionBD - Cerrando la conexión a la BD...
2025-05-11 12:03:28 [main] INFO  bibliotecaudb.conexion.ConexionBD - Conexión cerrada correctamente.
2025-05-11 12:04:29 [main] INFO  bibliotecaudb.pruebas.PruebasModuloBiblioteca - --- INICIO DE PRUEBAS DEL MODULO BIBLIOTECA ---
2025-05-11 12:04:29 [main] INFO  bibliotecaudb.servicio.ServicioUsuario - Servicio: Intento de login para el correo: alumno1@udb.com
2025-05-11 12:04:29 [main] INFO  bibliotecaudb.conexion.ConexionBD - Configuración cargada: URL=[jdbc:mysql://localhost:3306/biblioteca], User=[root]
2025-05-11 12:04:29 [main] INFO  bibliotecaudb.conexion.ConexionBD - Conexión es null o está cerrada. Intentando establecer conexión...
2025-05-11 12:04:29 [main] INFO  bibliotecaudb.conexion.ConexionBD - Intentando conectar a URL=[jdbc:mysql://localhost:3306/biblioteca] con User=[root]
2025-05-11 12:04:30 [main] INFO  bibliotecaudb.conexion.ConexionBD - Conexión establecida exitosamente a: jdbc:mysql://localhost:3306/biblioteca
2025-05-11 12:04:30 [main] INFO  bibliotecaudb.servicio.ServicioUsuario - Servicio: Login exitoso para el usuario: Alumno1 (alumno1@udb.com)
2025-05-11 12:04:30 [main] INFO  bibliotecaudb.pruebas.PruebasModuloBiblioteca - Usuario de prueba para préstamos obtenido: Alumno1
2025-05-11 12:04:30 [main] INFO  bibliotecaudb.dao.biblioteca.ConfiguracionSistemaDAO - Configuración del sistema actualizada.
2025-05-11 12:04:30 [main] INFO  bibliotecaudb.servicio.ServicioBiblioteca - Configuracion del sistema actualizada.
2025-05-11 12:04:30 [main] INFO  bibliotecaudb.dao.biblioteca.ConfiguracionSistemaDAO - Configuración del sistema actualizada.
2025-05-11 12:04:30 [main] INFO  bibliotecaudb.servicio.ServicioBiblioteca - Configuracion del sistema actualizada.
2025-05-11 12:04:30 [main] INFO  bibliotecaudb.pruebas.PruebasModuloBiblioteca - --- FIN DE PRUEBAS DEL MODULO BIBLIOTECA ---
2025-05-11 12:04:30 [main] INFO  bibliotecaudb.conexion.ConexionBD - Cerrando la conexión a la BD...
2025-05-11 12:04:30 [main] INFO  bibliotecaudb.conexion.ConexionBD - Conexión cerrada correctamente.
2025-05-11 12:05:16 [main] INFO  bibliotecaudb.pruebas.PruebasModuloBiblioteca - --- INICIO DE PRUEBAS DEL MODULO BIBLIOTECA ---
2025-05-11 12:05:16 [main] INFO  bibliotecaudb.servicio.ServicioUsuario - Servicio: Intento de login para el correo: alumno1@udb.com
2025-05-11 12:05:16 [main] INFO  bibliotecaudb.conexion.ConexionBD - Configuración cargada: URL=[jdbc:mysql://localhost:3306/biblioteca], User=[root]
2025-05-11 12:05:16 [main] INFO  bibliotecaudb.conexion.ConexionBD - Conexión es null o está cerrada. Intentando establecer conexión...
2025-05-11 12:05:16 [main] INFO  bibliotecaudb.conexion.ConexionBD - Intentando conectar a URL=[jdbc:mysql://localhost:3306/biblioteca] con User=[root]
2025-05-11 12:05:17 [main] INFO  bibliotecaudb.conexion.ConexionBD - Conexión establecida exitosamente a: jdbc:mysql://localhost:3306/biblioteca
2025-05-11 12:05:17 [main] INFO  bibliotecaudb.servicio.ServicioUsuario - Servicio: Login exitoso para el usuario: Alumno1 (alumno1@udb.com)
2025-05-11 12:05:17 [main] INFO  bibliotecaudb.pruebas.PruebasModuloBiblioteca - Usuario de prueba para préstamos obtenido: Alumno1
2025-05-11 12:05:17 [main] INFO  bibliotecaudb.dao.biblioteca.ConfiguracionSistemaDAO - Configuración del sistema actualizada.
2025-05-11 12:05:17 [main] INFO  bibliotecaudb.servicio.ServicioBiblioteca - Configuracion del sistema actualizada.
2025-05-11 12:05:17 [main] INFO  bibliotecaudb.dao.biblioteca.ConfiguracionSistemaDAO - Configuración del sistema actualizada.
2025-05-11 12:05:17 [main] INFO  bibliotecaudb.servicio.ServicioBiblioteca - Configuracion del sistema actualizada.
2025-05-11 12:05:17 [main] INFO  bibliotecaudb.dao.biblioteca.TipoDocumentoDAO - Se obtuvieron 6 tipos de documento.
2025-05-11 12:05:17 [main] INFO  bibliotecaudb.dao.biblioteca.DocumentoDAO - Documento creado con ID: 7, Título: El Gran Libro de Java 1746986717894
2025-05-11 12:05:17 [main] INFO  bibliotecaudb.servicio.ServicioBiblioteca - Documento ingresado: El Gran Libro de Java 1746986717894
2025-05-11 12:05:17 [main] INFO  bibliotecaudb.dao.biblioteca.DocumentoDAO - Búsqueda por 'Gran Libro de Java' encontró 1 documentos.
2025-05-11 12:05:17 [main] INFO  bibliotecaudb.dao.biblioteca.EjemplarDAO - Ejemplar creado con ID: 9 para Documento ID: 7
2025-05-11 12:05:17 [main] INFO  bibliotecaudb.servicio.ServicioBiblioteca - Ejemplar ingresado ID: 9 para Documento ID: 7
2025-05-11 12:05:17 [main] INFO  bibliotecaudb.dao.biblioteca.EjemplarDAO - Se obtuvieron 1 ejemplares para el documento ID: 7
2025-05-11 12:05:18 [main] INFO  bibliotecaudb.servicio.ServicioBiblioteca - Intento de préstamo: Usuario ID 3, Ejemplar ID 9
2025-05-11 12:05:18 [main] INFO  bibliotecaudb.dao.biblioteca.PrestamoDAO - Se obtuvieron 0 prestamos activos para el usuario ID: 3
2025-05-11 12:05:18 [main] ERROR bibliotecaudb.dao.biblioteca.PrestamoDAO - Error al crear Prestamo
java.sql.SQLSyntaxErrorException: Table 'biblioteca.prestamo' doesn't exist
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:112)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:114)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:990)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdateInternal(ClientPreparedStatement.java:1168)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdateInternal(ClientPreparedStatement.java:1103)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeLargeUpdate(ClientPreparedStatement.java:1450)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdate(ClientPreparedStatement.java:1086)
	at bibliotecaudb.dao.biblioteca.PrestamoDAO.crear(PrestamoDAO.java:126)
	at bibliotecaudb.servicio.ServicioBiblioteca.realizarPrestamo(ServicioBiblioteca.java:361)
	at bibliotecaudb.pruebas.PruebasModuloBiblioteca.main(PruebasModuloBiblioteca.java:221)
2025-05-11 12:05:18 [main] ERROR bibliotecaudb.servicio.ServicioBiblioteca - Error de BD al realizar préstamo
java.sql.SQLSyntaxErrorException: Table 'biblioteca.prestamo' doesn't exist
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:112)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:114)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:990)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdateInternal(ClientPreparedStatement.java:1168)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdateInternal(ClientPreparedStatement.java:1103)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeLargeUpdate(ClientPreparedStatement.java:1450)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdate(ClientPreparedStatement.java:1086)
	at bibliotecaudb.dao.biblioteca.PrestamoDAO.crear(PrestamoDAO.java:126)
	at bibliotecaudb.servicio.ServicioBiblioteca.realizarPrestamo(ServicioBiblioteca.java:361)
	at bibliotecaudb.pruebas.PruebasModuloBiblioteca.main(PruebasModuloBiblioteca.java:221)
2025-05-11 12:05:18 [main] INFO  bibliotecaudb.pruebas.PruebasModuloBiblioteca - --- FIN DE PRUEBAS DEL MODULO BIBLIOTECA ---
2025-05-11 12:05:18 [main] INFO  bibliotecaudb.conexion.ConexionBD - Cerrando la conexión a la BD...
2025-05-11 12:05:18 [main] INFO  bibliotecaudb.conexion.ConexionBD - Conexión cerrada correctamente.
2025-05-11 12:05:26 [main] INFO  bibliotecaudb.pruebas.PruebasModuloBiblioteca - --- INICIO DE PRUEBAS DEL MODULO BIBLIOTECA ---
2025-05-11 12:05:26 [main] INFO  bibliotecaudb.servicio.ServicioUsuario - Servicio: Intento de login para el correo: alumno1@udb.com
2025-05-11 12:05:26 [main] INFO  bibliotecaudb.conexion.ConexionBD - Configuración cargada: URL=[jdbc:mysql://localhost:3306/biblioteca], User=[root]
2025-05-11 12:05:26 [main] INFO  bibliotecaudb.conexion.ConexionBD - Conexión es null o está cerrada. Intentando establecer conexión...
2025-05-11 12:05:26 [main] INFO  bibliotecaudb.conexion.ConexionBD - Intentando conectar a URL=[jdbc:mysql://localhost:3306/biblioteca] con User=[root]
2025-05-11 12:05:27 [main] INFO  bibliotecaudb.conexion.ConexionBD - Conexión establecida exitosamente a: jdbc:mysql://localhost:3306/biblioteca
2025-05-11 12:05:27 [main] INFO  bibliotecaudb.servicio.ServicioUsuario - Servicio: Login exitoso para el usuario: Alumno1 (alumno1@udb.com)
2025-05-11 12:05:27 [main] INFO  bibliotecaudb.pruebas.PruebasModuloBiblioteca - Usuario de prueba para préstamos obtenido: Alumno1
2025-05-11 12:05:27 [main] INFO  bibliotecaudb.dao.biblioteca.ConfiguracionSistemaDAO - Configuración del sistema actualizada.
2025-05-11 12:05:27 [main] INFO  bibliotecaudb.servicio.ServicioBiblioteca - Configuracion del sistema actualizada.
2025-05-11 12:05:27 [main] INFO  bibliotecaudb.dao.biblioteca.ConfiguracionSistemaDAO - Configuración del sistema actualizada.
2025-05-11 12:05:27 [main] INFO  bibliotecaudb.servicio.ServicioBiblioteca - Configuracion del sistema actualizada.
2025-05-11 12:05:27 [main] INFO  bibliotecaudb.dao.biblioteca.TipoDocumentoDAO - Se obtuvieron 6 tipos de documento.
2025-05-11 12:05:27 [main] INFO  bibliotecaudb.dao.biblioteca.DocumentoDAO - Documento creado con ID: 8, Título: El Gran Libro de Java 1746986727369
2025-05-11 12:05:27 [main] INFO  bibliotecaudb.servicio.ServicioBiblioteca - Documento ingresado: El Gran Libro de Java 1746986727369
2025-05-11 12:05:27 [main] INFO  bibliotecaudb.dao.biblioteca.DocumentoDAO - Búsqueda por 'Gran Libro de Java' encontró 2 documentos.
2025-05-11 12:05:27 [main] INFO  bibliotecaudb.dao.biblioteca.EjemplarDAO - Ejemplar creado con ID: 10 para Documento ID: 8
2025-05-11 12:05:27 [main] INFO  bibliotecaudb.servicio.ServicioBiblioteca - Ejemplar ingresado ID: 10 para Documento ID: 8
2025-05-11 12:05:27 [main] INFO  bibliotecaudb.dao.biblioteca.EjemplarDAO - Se obtuvieron 1 ejemplares para el documento ID: 8
2025-05-11 12:05:27 [main] INFO  bibliotecaudb.servicio.ServicioBiblioteca - Intento de préstamo: Usuario ID 3, Ejemplar ID 10
2025-05-11 12:05:27 [main] INFO  bibliotecaudb.dao.biblioteca.PrestamoDAO - Se obtuvieron 0 prestamos activos para el usuario ID: 3
2025-05-11 12:05:27 [main] ERROR bibliotecaudb.dao.biblioteca.PrestamoDAO - Error al crear Prestamo
java.sql.SQLSyntaxErrorException: Table 'biblioteca.prestamo' doesn't exist
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:112)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:114)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:990)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdateInternal(ClientPreparedStatement.java:1168)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdateInternal(ClientPreparedStatement.java:1103)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeLargeUpdate(ClientPreparedStatement.java:1450)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdate(ClientPreparedStatement.java:1086)
	at bibliotecaudb.dao.biblioteca.PrestamoDAO.crear(PrestamoDAO.java:126)
	at bibliotecaudb.servicio.ServicioBiblioteca.realizarPrestamo(ServicioBiblioteca.java:361)
	at bibliotecaudb.pruebas.PruebasModuloBiblioteca.main(PruebasModuloBiblioteca.java:221)
2025-05-11 12:05:27 [main] ERROR bibliotecaudb.servicio.ServicioBiblioteca - Error de BD al realizar préstamo
java.sql.SQLSyntaxErrorException: Table 'biblioteca.prestamo' doesn't exist
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:112)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:114)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:990)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdateInternal(ClientPreparedStatement.java:1168)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdateInternal(ClientPreparedStatement.java:1103)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeLargeUpdate(ClientPreparedStatement.java:1450)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdate(ClientPreparedStatement.java:1086)
	at bibliotecaudb.dao.biblioteca.PrestamoDAO.crear(PrestamoDAO.java:126)
	at bibliotecaudb.servicio.ServicioBiblioteca.realizarPrestamo(ServicioBiblioteca.java:361)
	at bibliotecaudb.pruebas.PruebasModuloBiblioteca.main(PruebasModuloBiblioteca.java:221)
2025-05-11 12:05:27 [main] INFO  bibliotecaudb.pruebas.PruebasModuloBiblioteca - --- FIN DE PRUEBAS DEL MODULO BIBLIOTECA ---
2025-05-11 12:05:27 [main] INFO  bibliotecaudb.conexion.ConexionBD - Cerrando la conexión a la BD...
2025-05-11 12:05:27 [main] INFO  bibliotecaudb.conexion.ConexionBD - Conexión cerrada correctamente.
2025-05-11 13:55:24 [main] INFO  bibliotecaudb.pruebas.PruebasModuloBiblioteca - --- INICIO DE PRUEBAS DEL MODULO BIBLIOTECA ---
2025-05-11 13:55:24 [main] INFO  bibliotecaudb.servicio.ServicioUsuario - Servicio: Intento de login para el correo: alumno1@udb.com
2025-05-11 13:55:24 [main] INFO  bibliotecaudb.conexion.ConexionBD - Configuración cargada: URL=[jdbc:mysql://localhost:3306/biblioteca], User=[root]
2025-05-11 13:55:24 [main] INFO  bibliotecaudb.conexion.ConexionBD - Conexión es null o está cerrada. Intentando establecer conexión...
2025-05-11 13:55:24 [main] INFO  bibliotecaudb.conexion.ConexionBD - Intentando conectar a URL=[jdbc:mysql://localhost:3306/biblioteca] con User=[root]
2025-05-11 13:55:25 [main] INFO  bibliotecaudb.conexion.ConexionBD - Conexión establecida exitosamente a: jdbc:mysql://localhost:3306/biblioteca
2025-05-11 13:55:25 [main] INFO  bibliotecaudb.servicio.ServicioUsuario - Servicio: Login exitoso para el usuario: Alumno1 (alumno1@udb.com)
2025-05-11 13:55:25 [main] INFO  bibliotecaudb.pruebas.PruebasModuloBiblioteca - Usuario de prueba para préstamos obtenido: Alumno1
2025-05-11 13:55:25 [main] INFO  bibliotecaudb.dao.biblioteca.ConfiguracionSistemaDAO - Configuración del sistema actualizada.
2025-05-11 13:55:25 [main] INFO  bibliotecaudb.servicio.ServicioBiblioteca - Configuracion del sistema actualizada.
2025-05-11 13:55:25 [main] INFO  bibliotecaudb.dao.biblioteca.ConfiguracionSistemaDAO - Configuración del sistema actualizada.
2025-05-11 13:55:25 [main] INFO  bibliotecaudb.servicio.ServicioBiblioteca - Configuracion del sistema actualizada.
2025-05-11 13:55:25 [main] INFO  bibliotecaudb.dao.biblioteca.TipoDocumentoDAO - Se obtuvieron 6 tipos de documento.
2025-05-11 13:55:25 [main] INFO  bibliotecaudb.dao.biblioteca.DocumentoDAO - Documento creado con ID: 9, Título: El Gran Libro de Java 1746993325363
2025-05-11 13:55:25 [main] INFO  bibliotecaudb.servicio.ServicioBiblioteca - Documento ingresado: El Gran Libro de Java 1746993325363
2025-05-11 13:55:25 [main] INFO  bibliotecaudb.dao.biblioteca.DocumentoDAO - Búsqueda por 'Gran Libro de Java' encontró 3 documentos.
2025-05-11 13:55:25 [main] INFO  bibliotecaudb.dao.biblioteca.EjemplarDAO - Ejemplar creado con ID: 11 para Documento ID: 9
2025-05-11 13:55:25 [main] INFO  bibliotecaudb.servicio.ServicioBiblioteca - Ejemplar ingresado ID: 11 para Documento ID: 9
2025-05-11 13:55:25 [main] INFO  bibliotecaudb.dao.biblioteca.EjemplarDAO - Se obtuvieron 1 ejemplares para el documento ID: 9
2025-05-11 13:55:25 [main] INFO  bibliotecaudb.servicio.ServicioBiblioteca - Intento de préstamo: Usuario ID 3, Ejemplar ID 11
2025-05-11 13:55:25 [main] INFO  bibliotecaudb.dao.biblioteca.PrestamoDAO - Se obtuvieron 0 prestamos activos para el usuario ID: 3
2025-05-11 13:55:25 [main] INFO  bibliotecaudb.dao.biblioteca.PrestamoDAO - Prestamo creado con ID: 9
2025-05-11 13:55:25 [main] INFO  bibliotecaudb.dao.biblioteca.EjemplarDAO - Ejemplar actualizado con ID: 11
2025-05-11 13:55:25 [main] INFO  bibliotecaudb.servicio.ServicioBiblioteca - Préstamo ID: 9 realizado exitosamente.
2025-05-11 13:55:25 [main] INFO  bibliotecaudb.servicio.ServicioBiblioteca - Intento de préstamo: Usuario ID 3, Ejemplar ID 11
2025-05-11 13:55:25 [main] INFO  bibliotecaudb.servicio.ServicioBiblioteca - Intento de devolución para Préstamo ID: 9
2025-05-11 13:55:25 [main] INFO  bibliotecaudb.dao.biblioteca.PrestamoDAO - Prestamo actualizado con ID: 9
2025-05-11 13:55:25 [main] INFO  bibliotecaudb.dao.biblioteca.EjemplarDAO - Ejemplar actualizado con ID: 11
2025-05-11 13:55:25 [main] INFO  bibliotecaudb.dao.biblioteca.DevolucionDAO - Devolucion creada con ID: 3 para Prestamo ID: 9
2025-05-11 13:55:25 [main] INFO  bibliotecaudb.servicio.ServicioBiblioteca - Devolución ID: 3 registrada. Mora calculada: 0.0
2025-05-11 13:55:25 [main] INFO  bibliotecaudb.pruebas.PruebasModuloBiblioteca - --- FIN DE PRUEBAS DEL MODULO BIBLIOTECA ---
2025-05-11 13:55:25 [main] INFO  bibliotecaudb.conexion.ConexionBD - Cerrando la conexión a la BD...
2025-05-11 13:55:25 [main] INFO  bibliotecaudb.conexion.ConexionBD - Conexión cerrada correctamente.
2025-05-11 15:06:01 [main] INFO  bibliotecaudb.pruebas.PruebasModuloBiblioteca - --- INICIO DE PRUEBAS DEL MODULO BIBLIOTECA ---
2025-05-11 15:06:01 [main] INFO  bibliotecaudb.servicio.ServicioUsuario - Servicio: Intento de login para el correo: alumno1@udb.com
2025-05-11 15:06:01 [main] INFO  bibliotecaudb.conexion.ConexionBD - Configuración cargada: URL=[jdbc:mysql://localhost:3306/biblioteca], User=[root]
2025-05-11 15:06:01 [main] INFO  bibliotecaudb.conexion.ConexionBD - Conexión es null o está cerrada. Intentando establecer conexión...
2025-05-11 15:06:01 [main] INFO  bibliotecaudb.conexion.ConexionBD - Intentando conectar a URL=[jdbc:mysql://localhost:3306/biblioteca] con User=[root]
2025-05-11 15:06:02 [main] INFO  bibliotecaudb.conexion.ConexionBD - Conexión establecida exitosamente a: jdbc:mysql://localhost:3306/biblioteca
2025-05-11 15:06:02 [main] INFO  bibliotecaudb.servicio.ServicioUsuario - Servicio: Login exitoso para el usuario: Alumno1 (alumno1@udb.com)
2025-05-11 15:06:02 [main] INFO  bibliotecaudb.pruebas.PruebasModuloBiblioteca - Usuario de prueba para préstamos obtenido: Alumno1
2025-05-11 15:06:02 [main] INFO  bibliotecaudb.dao.biblioteca.ConfiguracionSistemaDAO - Configuración del sistema actualizada.
2025-05-11 15:06:02 [main] INFO  bibliotecaudb.servicio.ServicioBiblioteca - Configuracion del sistema actualizada.
2025-05-11 15:06:02 [main] INFO  bibliotecaudb.dao.biblioteca.ConfiguracionSistemaDAO - Configuración del sistema actualizada.
2025-05-11 15:06:02 [main] INFO  bibliotecaudb.servicio.ServicioBiblioteca - Configuracion del sistema actualizada.
2025-05-11 15:06:02 [main] INFO  bibliotecaudb.dao.biblioteca.TipoDocumentoDAO - Se obtuvieron 6 tipos de documento.
2025-05-11 15:06:02 [main] INFO  bibliotecaudb.dao.biblioteca.DocumentoDAO - Documento creado con ID: 10, Título: El Gran Libro de Java 1746997562370
2025-05-11 15:06:02 [main] INFO  bibliotecaudb.servicio.ServicioBiblioteca - Documento ingresado: El Gran Libro de Java 1746997562370
2025-05-11 15:06:02 [main] INFO  bibliotecaudb.dao.biblioteca.DocumentoDAO - Búsqueda por 'Gran Libro de Java' encontró 4 documentos.
2025-05-11 15:06:02 [main] INFO  bibliotecaudb.dao.biblioteca.EjemplarDAO - Ejemplar creado con ID: 12 para Documento ID: 10
2025-05-11 15:06:02 [main] INFO  bibliotecaudb.servicio.ServicioBiblioteca - Ejemplar ingresado ID: 12 para Documento ID: 10
2025-05-11 15:06:02 [main] INFO  bibliotecaudb.dao.biblioteca.EjemplarDAO - Se obtuvieron 1 ejemplares para el documento ID: 10
2025-05-11 15:06:02 [main] INFO  bibliotecaudb.servicio.ServicioBiblioteca - Intento de préstamo: Usuario ID 3, Ejemplar ID 12
2025-05-11 15:06:02 [main] INFO  bibliotecaudb.dao.biblioteca.PrestamoDAO - Se obtuvieron 0 prestamos activos para el usuario ID: 3
2025-05-11 15:06:02 [main] INFO  bibliotecaudb.dao.biblioteca.PrestamoDAO - Prestamo creado con ID: 10
2025-05-11 15:06:02 [main] INFO  bibliotecaudb.dao.biblioteca.EjemplarDAO - Ejemplar actualizado con ID: 12
2025-05-11 15:06:02 [main] INFO  bibliotecaudb.servicio.ServicioBiblioteca - Préstamo ID: 10 realizado exitosamente.
2025-05-11 15:06:02 [main] INFO  bibliotecaudb.servicio.ServicioBiblioteca - Intento de préstamo: Usuario ID 3, Ejemplar ID 12
2025-05-11 15:06:02 [main] INFO  bibliotecaudb.servicio.ServicioBiblioteca - Intento de devolución para Préstamo ID: 10
2025-05-11 15:06:02 [main] INFO  bibliotecaudb.dao.biblioteca.PrestamoDAO - Prestamo actualizado con ID: 10
2025-05-11 15:06:02 [main] INFO  bibliotecaudb.dao.biblioteca.EjemplarDAO - Ejemplar actualizado con ID: 12
2025-05-11 15:06:02 [main] INFO  bibliotecaudb.dao.biblioteca.DevolucionDAO - Devolucion creada con ID: 4 para Prestamo ID: 10
2025-05-11 15:06:02 [main] INFO  bibliotecaudb.servicio.ServicioBiblioteca - Devolución ID: 4 registrada. Mora calculada: 0.0
2025-05-11 15:06:02 [main] INFO  bibliotecaudb.pruebas.PruebasModuloBiblioteca - --- FIN DE PRUEBAS DEL MODULO BIBLIOTECA ---
2025-05-11 15:06:02 [main] INFO  bibliotecaudb.conexion.ConexionBD - Cerrando la conexión a la BD...
2025-05-11 15:06:02 [main] INFO  bibliotecaudb.conexion.ConexionBD - Conexión cerrada correctamente.
2025-05-11 21:08:22 [main] INFO  bibliotecaudb.pruebas.PruebasModuloBiblioteca - --- INICIO DE PRUEBAS DEL MODULO BIBLIOTECA ---
2025-05-11 21:08:22 [main] INFO  bibliotecaudb.servicio.ServicioUsuario - Servicio: Intento de login para el correo: alumno1@udb.com
2025-05-11 21:08:22 [main] INFO  bibliotecaudb.conexion.ConexionBD - Configuración cargada: URL=[jdbc:mysql://localhost:3306/biblioteca], User=[root]
2025-05-11 21:08:22 [main] INFO  bibliotecaudb.conexion.ConexionBD - Conexión es null o está cerrada. Intentando establecer conexión...
2025-05-11 21:08:22 [main] INFO  bibliotecaudb.conexion.ConexionBD - Intentando conectar a URL=[jdbc:mysql://localhost:3306/biblioteca] con User=[root]
2025-05-11 21:08:23 [main] INFO  bibliotecaudb.conexion.ConexionBD - Conexión establecida exitosamente a: jdbc:mysql://localhost:3306/biblioteca
2025-05-11 21:08:23 [main] INFO  bibliotecaudb.servicio.ServicioUsuario - Servicio: Login exitoso para el usuario: Alumno1 (alumno1@udb.com)
2025-05-11 21:08:23 [main] INFO  bibliotecaudb.pruebas.PruebasModuloBiblioteca - Usuario de prueba para préstamos obtenido: Alumno1
2025-05-11 21:08:23 [main] INFO  bibliotecaudb.dao.biblioteca.ConfiguracionSistemaDAO - Configuración del sistema actualizada.
2025-05-11 21:08:23 [main] INFO  bibliotecaudb.servicio.ServicioBiblioteca - Configuracion del sistema actualizada.
2025-05-11 21:08:23 [main] INFO  bibliotecaudb.dao.biblioteca.ConfiguracionSistemaDAO - Configuración del sistema actualizada.
2025-05-11 21:08:23 [main] INFO  bibliotecaudb.servicio.ServicioBiblioteca - Configuracion del sistema actualizada.
2025-05-11 21:08:23 [main] INFO  bibliotecaudb.dao.biblioteca.TipoDocumentoDAO - Se obtuvieron 6 tipos de documento.
2025-05-11 21:08:23 [main] INFO  bibliotecaudb.dao.biblioteca.DocumentoDAO - Documento creado con ID: 11, Título: El Gran Libro de Java 1747019303398
2025-05-11 21:08:23 [main] INFO  bibliotecaudb.servicio.ServicioBiblioteca - Documento ingresado: El Gran Libro de Java 1747019303398
2025-05-11 21:08:23 [main] INFO  bibliotecaudb.dao.biblioteca.DocumentoDAO - Búsqueda por 'Gran Libro de Java' encontró 5 documentos.
2025-05-11 21:08:23 [main] INFO  bibliotecaudb.dao.biblioteca.EjemplarDAO - Ejemplar creado con ID: 13 para Documento ID: 11
2025-05-11 21:08:23 [main] INFO  bibliotecaudb.servicio.ServicioBiblioteca - Ejemplar ingresado ID: 13 para Documento ID: 11
2025-05-11 21:08:23 [main] INFO  bibliotecaudb.dao.biblioteca.EjemplarDAO - Se obtuvieron 1 ejemplares para el documento ID: 11
2025-05-11 21:08:23 [main] INFO  bibliotecaudb.servicio.ServicioBiblioteca - Intento de préstamo: Usuario ID 3, Ejemplar ID 13
2025-05-11 21:08:23 [main] INFO  bibliotecaudb.dao.biblioteca.PrestamoDAO - Se obtuvieron 0 prestamos activos para el usuario ID: 3
2025-05-11 21:08:23 [main] INFO  bibliotecaudb.dao.biblioteca.PrestamoDAO - Prestamo creado con ID: 11
2025-05-11 21:08:23 [main] INFO  bibliotecaudb.dao.biblioteca.EjemplarDAO - Ejemplar actualizado con ID: 13
2025-05-11 21:08:23 [main] INFO  bibliotecaudb.servicio.ServicioBiblioteca - Préstamo ID: 11 realizado exitosamente.
2025-05-11 21:08:23 [main] INFO  bibliotecaudb.servicio.ServicioBiblioteca - Intento de préstamo: Usuario ID 3, Ejemplar ID 13
2025-05-11 21:08:23 [main] INFO  bibliotecaudb.servicio.ServicioBiblioteca - Intento de devolución para Préstamo ID: 11
2025-05-11 21:08:23 [main] INFO  bibliotecaudb.dao.biblioteca.PrestamoDAO - Prestamo actualizado con ID: 11
2025-05-11 21:08:23 [main] INFO  bibliotecaudb.dao.biblioteca.EjemplarDAO - Ejemplar actualizado con ID: 13
2025-05-11 21:08:23 [main] INFO  bibliotecaudb.dao.biblioteca.DevolucionDAO - Devolucion creada con ID: 5 para Prestamo ID: 11
2025-05-11 21:08:23 [main] INFO  bibliotecaudb.servicio.ServicioBiblioteca - Devolución ID: 5 registrada. Mora calculada: 0.0
2025-05-11 21:08:23 [main] INFO  bibliotecaudb.pruebas.PruebasModuloBiblioteca - --- FIN DE PRUEBAS DEL MODULO BIBLIOTECA ---
2025-05-11 21:08:23 [main] INFO  bibliotecaudb.conexion.ConexionBD - Cerrando la conexión a la BD...
2025-05-11 21:08:23 [main] INFO  bibliotecaudb.conexion.ConexionBD - Conexión cerrada correctamente.
2025-05-11 21:08:51 [main] INFO  bibliotecaudb.pruebas.PruebasModuloUsuario - --- INICIO DE PRUEBAS MANUALES ---
2025-05-11 21:08:51 [main] INFO  bibliotecaudb.conexion.ConexionBD - Configuración cargada: URL=[jdbc:mysql://localhost:3306/biblioteca], User=[root]
2025-05-11 21:08:51 [main] INFO  bibliotecaudb.conexion.ConexionBD - Conexión es null o está cerrada. Intentando establecer conexión...
2025-05-11 21:08:51 [main] INFO  bibliotecaudb.conexion.ConexionBD - Intentando conectar a URL=[jdbc:mysql://localhost:3306/biblioteca] con User=[root]
2025-05-11 21:08:52 [main] INFO  bibliotecaudb.conexion.ConexionBD - Conexión establecida exitosamente a: jdbc:mysql://localhost:3306/biblioteca
2025-05-11 21:08:52 [main] INFO  bibliotecaudb.dao.usuario.TipoUsuarioDAO - Se obtuvieron 3 tipos de usuario.
2025-05-11 21:08:52 [main] INFO  bibliotecaudb.pruebas.PruebasModuloUsuario - --- FIN DE PRUEBAS MANUALES ---
2025-05-11 21:08:52 [main] INFO  bibliotecaudb.conexion.ConexionBD - Cerrando la conexión a la BD...
2025-05-11 21:08:52 [main] INFO  bibliotecaudb.conexion.ConexionBD - Conexión cerrada correctamente.
2025-05-11 21:09:24 [main] INFO  bibliotecaudb.pruebas.PruebasModuloUsuario - --- INICIO DE PRUEBAS MANUALES ---
2025-05-11 21:09:24 [main] INFO  bibliotecaudb.conexion.ConexionBD - Configuración cargada: URL=[jdbc:mysql://localhost:3306/biblioteca], User=[root]
2025-05-11 21:09:24 [main] INFO  bibliotecaudb.conexion.ConexionBD - Conexión es null o está cerrada. Intentando establecer conexión...
2025-05-11 21:09:24 [main] INFO  bibliotecaudb.conexion.ConexionBD - Intentando conectar a URL=[jdbc:mysql://localhost:3306/biblioteca] con User=[root]
2025-05-11 21:09:25 [main] INFO  bibliotecaudb.conexion.ConexionBD - Conexión establecida exitosamente a: jdbc:mysql://localhost:3306/biblioteca
2025-05-11 21:09:25 [main] INFO  bibliotecaudb.dao.usuario.TipoUsuarioDAO - Se obtuvieron 3 tipos de usuario.
2025-05-11 21:09:25 [main] INFO  bibliotecaudb.servicio.ServicioUsuario - Servicio: Intento de login para correo: admin@udb.com
2025-05-11 21:09:25 [main] INFO  bibliotecaudb.servicio.ServicioUsuario - Servicio: Login exitoso para: admin@udb.com
2025-05-11 21:09:25 [main] INFO  bibliotecaudb.servicio.ServicioUsuario - Servicio: Intento de login para correo: alumno1@udb.com
2025-05-11 21:09:25 [main] INFO  bibliotecaudb.servicio.ServicioUsuario - Servicio: Intento de login para correo: noexiste@udb.com
2025-05-11 21:09:25 [main] WARN  bibliotecaudb.dao.usuario.UsuarioDAO - No se encontró usuario activo con correo: noexiste@udb.com
2025-05-11 21:09:25 [main] INFO  bibliotecaudb.pruebas.PruebasModuloUsuario - --- FIN DE PRUEBAS MANUALES ---
2025-05-11 21:09:25 [main] INFO  bibliotecaudb.conexion.ConexionBD - Cerrando la conexión a la BD...
2025-05-11 21:09:25 [main] INFO  bibliotecaudb.conexion.ConexionBD - Conexión cerrada correctamente.
2025-05-11 21:17:59 [main] INFO  bibliotecaudb.pruebas.PruebasModuloUsuario - --- INICIO DE PRUEBAS MANUALES ---
2025-05-11 21:17:59 [main] INFO  bibliotecaudb.conexion.ConexionBD - Configuración cargada: URL=[jdbc:mysql://localhost:3306/biblioteca], User=[root]
2025-05-11 21:17:59 [main] INFO  bibliotecaudb.conexion.ConexionBD - Conexión es null o está cerrada. Intentando establecer conexión...
2025-05-11 21:17:59 [main] INFO  bibliotecaudb.conexion.ConexionBD - Intentando conectar a URL=[jdbc:mysql://localhost:3306/biblioteca] con User=[root]
2025-05-11 21:18:00 [main] INFO  bibliotecaudb.conexion.ConexionBD - Conexión establecida exitosamente a: jdbc:mysql://localhost:3306/biblioteca
2025-05-11 21:18:00 [main] INFO  bibliotecaudb.dao.usuario.TipoUsuarioDAO - Se obtuvieron 3 tipos de usuario.
2025-05-11 21:18:00 [main] INFO  bibliotecaudb.servicio.ServicioUsuario - Servicio: Intento de login para correo: admin@udb.com
2025-05-11 21:18:00 [main] INFO  bibliotecaudb.servicio.ServicioUsuario - Servicio: Login exitoso para: admin@udb.com
2025-05-11 21:18:00 [main] INFO  bibliotecaudb.servicio.ServicioUsuario - Servicio: Intento de login para correo: alumno1@udb.com
2025-05-11 21:18:00 [main] INFO  bibliotecaudb.servicio.ServicioUsuario - Servicio: Intento de login para correo: noexiste@udb.com
2025-05-11 21:18:00 [main] WARN  bibliotecaudb.dao.usuario.UsuarioDAO - No se encontró usuario activo con correo: noexiste@udb.com
2025-05-11 21:18:00 [main] INFO  bibliotecaudb.pruebas.PruebasModuloUsuario - --- FIN DE PRUEBAS MANUALES ---
2025-05-11 21:18:00 [main] INFO  bibliotecaudb.conexion.ConexionBD - Cerrando la conexión a la BD...
2025-05-11 21:18:00 [main] INFO  bibliotecaudb.conexion.ConexionBD - Conexión cerrada correctamente.
2025-05-11 21:21:11 [main] INFO  bibliotecaudb.pruebas.PruebasModuloUsuario - --- INICIO DE PRUEBAS MANUALES ---
2025-05-11 21:21:11 [main] INFO  bibliotecaudb.conexion.ConexionBD - Configuracion de BD cargada.
2025-05-11 21:21:11 [main] INFO  bibliotecaudb.conexion.ConexionBD - Intentando conectar a BD: jdbc:mysql://localhost:3306/biblioteca
2025-05-11 21:21:12 [main] INFO  bibliotecaudb.conexion.ConexionBD - Conexion establecida exitosamente.
2025-05-11 21:21:12 [main] INFO  bibliotecaudb.dao.usuario.TipoUsuarioDAO - Se obtuvieron 3 tipos de usuario.
2025-05-11 21:21:12 [main] INFO  bibliotecaudb.servicio.ServicioUsuario - Servicio: Intento de login para correo: admin@udb.com
2025-05-11 21:21:12 [main] INFO  bibliotecaudb.servicio.ServicioUsuario - Servicio: Login exitoso para: admin@udb.com
2025-05-11 21:21:12 [main] INFO  bibliotecaudb.servicio.ServicioUsuario - Servicio: Intento de login para correo: alumno1@udb.com
2025-05-11 21:21:12 [main] INFO  bibliotecaudb.servicio.ServicioUsuario - Servicio: Intento de login para correo: noexiste@udb.com
2025-05-11 21:21:12 [main] WARN  bibliotecaudb.dao.usuario.UsuarioDAO - No se encontró usuario activo con correo: noexiste@udb.com
2025-05-11 21:21:12 [main] INFO  bibliotecaudb.pruebas.PruebasModuloUsuario - --- FIN DE PRUEBAS MANUALES ---
2025-05-11 21:21:12 [main] INFO  bibliotecaudb.conexion.ConexionBD - Cerrando conexion a la BD...
2025-05-11 21:21:12 [main] INFO  bibliotecaudb.conexion.ConexionBD - Conexion cerrada.
2025-05-12 11:02:48 [main] INFO  bibliotecaudb.conexion.ConexionBD - Configuracion de BD cargada.
2025-05-12 11:02:48 [main] INFO  bibliotecaudb.conexion.ConexionBD - Intentando conectar a BD: jdbc:mysql://localhost:3306/biblioteca
2025-05-12 11:02:49 [main] INFO  bibliotecaudb.conexion.ConexionBD - Conexion establecida exitosamente.
2025-05-12 11:02:49 [main] INFO  bibliotecaudb.pruebas.PruebasModuloUsuario - Prueba de conexión exitosa.
2025-05-12 11:02:49 [main] INFO  bibliotecaudb.servicio.ServicioUsuario - Login exitoso para: admin@udb.com
2025-05-12 11:02:49 [main] WARN  bibliotecaudb.servicio.ServicioUsuario - Credenciales incorrectas para: admin@udb.com
2025-05-12 11:02:49 [main] WARN  bibliotecaudb.servicio.ServicioUsuario - Credenciales incorrectas para: error@udb.com
2025-05-12 11:02:49 [main] INFO  bibliotecaudb.dao.usuario.UsuarioDAO - Usuario insertado: nuevo@udb.com
2025-05-12 11:02:49 [main] INFO  bibliotecaudb.servicio.ServicioUsuario - Usuario creado exitosamente: nuevo@udb.com
2025-05-12 11:02:49 [main] WARN  bibliotecaudb.servicio.ServicioUsuario - Intento de crear usuario con correo ya existente: admin@udb.com
2025-05-12 11:02:49 [main] INFO  bibliotecaudb.dao.usuario.UsuarioDAO - Usuario actualizado: ID=7, Correo=nuevo@udb.com
2025-05-12 11:02:49 [main] INFO  bibliotecaudb.servicio.ServicioUsuario - Datos de usuario actualizados para: nuevo@udb.com
2025-05-12 11:02:49 [main] INFO  bibliotecaudb.servicio.ServicioUsuario - Login exitoso para: admin@udb.com
2025-05-12 11:02:49 [main] INFO  bibliotecaudb.servicio.ServicioUsuario - Login exitoso para: profesor1@udb.com
2025-05-12 11:02:49 [main] INFO  bibliotecaudb.dao.usuario.UsuarioDAO - Usuario actualizado: ID=3, Correo=alumno1@udb.com
2025-05-12 11:02:49 [main] INFO  bibliotecaudb.servicio.ServicioUsuario - Contraseña restablecida para alumno1@udb.com por admin@udb.com
2025-05-12 11:02:49 [main] INFO  bibliotecaudb.servicio.ServicioUsuario - Login exitoso para: alumno1@udb.com
2025-05-12 11:02:49 [main] WARN  bibliotecaudb.servicio.ServicioUsuario - Intento de restablecer contraseña para usuario no existente: noexiste@udb.com
2025-05-12 11:02:49 [main] WARN  bibliotecaudb.servicio.ServicioUsuario - Intento no autorizado de restablecer contraseña por usuario: profesor1@udb.com
2025-05-12 11:02:49 [main] INFO  bibliotecaudb.dao.usuario.UsuarioDAO - Usuario eliminado: ID=7
2025-05-12 11:02:49 [main] INFO  bibliotecaudb.servicio.ServicioUsuario - Usuario eliminado con ID: 7
2025-05-12 11:02:49 [main] INFO  bibliotecaudb.conexion.ConexionBD - Cerrando conexion a la BD...
2025-05-12 11:02:49 [main] INFO  bibliotecaudb.conexion.ConexionBD - Conexion cerrada.
2025-05-12 11:02:55 [main] INFO  bibliotecaudb.conexion.ConexionBD - Configuracion de BD cargada.
2025-05-12 11:02:55 [main] INFO  bibliotecaudb.conexion.ConexionBD - Intentando conectar a BD: jdbc:mysql://localhost:3306/biblioteca
2025-05-12 11:02:55 [main] INFO  bibliotecaudb.conexion.ConexionBD - Conexion establecida exitosamente.
2025-05-12 11:02:55 [main] INFO  bibliotecaudb.pruebas.PruebasModuloUsuario - Prueba de conexión exitosa.
2025-05-12 11:02:56 [main] INFO  bibliotecaudb.servicio.ServicioUsuario - Login exitoso para: admin@udb.com
2025-05-12 11:02:56 [main] WARN  bibliotecaudb.servicio.ServicioUsuario - Credenciales incorrectas para: admin@udb.com
2025-05-12 11:02:56 [main] WARN  bibliotecaudb.servicio.ServicioUsuario - Credenciales incorrectas para: error@udb.com
2025-05-12 11:02:56 [main] INFO  bibliotecaudb.dao.usuario.UsuarioDAO - Usuario insertado: nuevo@udb.com
2025-05-12 11:02:56 [main] INFO  bibliotecaudb.servicio.ServicioUsuario - Usuario creado exitosamente: nuevo@udb.com
2025-05-12 11:02:56 [main] WARN  bibliotecaudb.servicio.ServicioUsuario - Intento de crear usuario con correo ya existente: admin@udb.com
2025-05-12 11:02:56 [main] INFO  bibliotecaudb.dao.usuario.UsuarioDAO - Usuario actualizado: ID=8, Correo=nuevo@udb.com
2025-05-12 11:02:56 [main] INFO  bibliotecaudb.servicio.ServicioUsuario - Datos de usuario actualizados para: nuevo@udb.com
2025-05-12 11:02:56 [main] INFO  bibliotecaudb.servicio.ServicioUsuario - Login exitoso para: admin@udb.com
2025-05-12 11:02:56 [main] INFO  bibliotecaudb.servicio.ServicioUsuario - Login exitoso para: profesor1@udb.com
2025-05-12 11:02:56 [main] INFO  bibliotecaudb.dao.usuario.UsuarioDAO - Usuario actualizado: ID=3, Correo=alumno1@udb.com
2025-05-12 11:02:56 [main] INFO  bibliotecaudb.servicio.ServicioUsuario - Contraseña restablecida para alumno1@udb.com por admin@udb.com
2025-05-12 11:02:56 [main] INFO  bibliotecaudb.servicio.ServicioUsuario - Login exitoso para: alumno1@udb.com
2025-05-12 11:02:56 [main] WARN  bibliotecaudb.servicio.ServicioUsuario - Intento de restablecer contraseña para usuario no existente: noexiste@udb.com
2025-05-12 11:02:56 [main] WARN  bibliotecaudb.servicio.ServicioUsuario - Intento no autorizado de restablecer contraseña por usuario: profesor1@udb.com
2025-05-12 11:02:56 [main] INFO  bibliotecaudb.dao.usuario.UsuarioDAO - Usuario eliminado: ID=8
2025-05-12 11:02:56 [main] INFO  bibliotecaudb.servicio.ServicioUsuario - Usuario eliminado con ID: 8
2025-05-12 11:02:56 [main] INFO  bibliotecaudb.conexion.ConexionBD - Cerrando conexion a la BD...
2025-05-12 11:02:56 [main] INFO  bibliotecaudb.conexion.ConexionBD - Conexion cerrada.
2025-05-12 12:39:20 [main] INFO  bibliotecaudb.conexion.ConexionBD - Configuracion de BD cargada.
2025-05-12 12:47:17 [main] INFO  bibliotecaudb.conexion.ConexionBD - Configuracion de BD cargada.
2025-05-12 12:49:23 [main] INFO  bibliotecaudb.conexion.ConexionBD - Configuracion de BD cargada.
2025-05-12 12:49:23 [main] INFO  bibliotecaudb.conexion.ConexionBD - Intentando conectar a BD: jdbc:mysql://localhost:3306/biblioteca
2025-05-12 12:49:24 [main] INFO  bibliotecaudb.conexion.ConexionBD - Conexion establecida exitosamente.
2025-05-12 12:49:24 [main] INFO  bibliotecaudb.servicio.ServicioUsuario - Login exitoso para: admin@udb.com
2025-05-12 12:49:24 [main] INFO  bibliotecaudb.servicio.ServicioUsuario - Login exitoso para: profesor1@udb.com
2025-05-12 12:49:24 [main] INFO  bibliotecaudb.servicio.ServicioUsuario - Login exitoso para: alumno1@udb.com
2025-05-12 12:49:24 [main] INFO  bibliotecaudb.dao.biblioteca.DocumentoDAO - Documento creado con ID: 12, Título: Microservicios con Spring Boot
2025-05-12 12:49:24 [main] INFO  bibliotecaudb.dao.biblioteca.EjemplarDAO - Ejemplar creado con ID: 14 para Documento ID: 12
2025-05-12 12:49:24 [main] INFO  bibliotecaudb.dao.biblioteca.EjemplarDAO - Ejemplar creado con ID: 15 para Documento ID: 12
2025-05-12 12:49:24 [main] INFO  bibliotecaudb.servicio.biblioteca.GestionDocumentosServicio - Documento ID 12 y 2 ejemplares creados por admin@udb.com
2025-05-12 12:49:24 [main] INFO  bibliotecaudb.dao.biblioteca.EjemplarDAO - Se obtuvieron 2 ejemplares para el documento ID: 12
2025-05-12 12:49:24 [main] INFO  bibliotecaudb.dao.biblioteca.DocumentoDAO - Busqueda por 'Java' encontro 6 documentos.
2025-05-12 12:49:24 [main] ERROR bibliotecaudb.dao.biblioteca.MoraAnualDAO - Error al obtener MoraAnual para el año: 2025
java.sql.SQLSyntaxErrorException: Table 'biblioteca.mora_anual' doesn't exist
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:112)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:114)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:990)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeQuery(ClientPreparedStatement.java:1058)
	at bibliotecaudb.dao.biblioteca.MoraAnualDAO.obtenerPorAnio(MoraAnualDAO.java:37)
	at bibliotecaudb.dao.biblioteca.MoraAnualDAO.crearOActualizar(MoraAnualDAO.java:81)
	at bibliotecaudb.servicio.biblioteca.ConfiguracionBibliotecaServicio.establecerOActualizarMoraAnual(ConfiguracionBibliotecaServicio.java:126)
	at bibliotecaudb.pruebas.PruebasModuloBiblioteca.main(PruebasModuloBiblioteca.java:131)
2025-05-12 12:49:24 [main] ERROR bibliotecaudb.servicio.biblioteca.ConfiguracionBibliotecaServicio - Error de BD al establecer/actualizar mora anual para el año: 2025
java.sql.SQLSyntaxErrorException: Table 'biblioteca.mora_anual' doesn't exist
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:112)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:114)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:990)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeQuery(ClientPreparedStatement.java:1058)
	at bibliotecaudb.dao.biblioteca.MoraAnualDAO.obtenerPorAnio(MoraAnualDAO.java:37)
	at bibliotecaudb.dao.biblioteca.MoraAnualDAO.crearOActualizar(MoraAnualDAO.java:81)
	at bibliotecaudb.servicio.biblioteca.ConfiguracionBibliotecaServicio.establecerOActualizarMoraAnual(ConfiguracionBibliotecaServicio.java:126)
	at bibliotecaudb.pruebas.PruebasModuloBiblioteca.main(PruebasModuloBiblioteca.java:131)
2025-05-12 12:49:24 [main] INFO  bibliotecaudb.dao.biblioteca.EjemplarDAO - Estado de Ejemplar ID=14 actualizado a: DISPONIBLE
2025-05-12 12:49:24 [main] INFO  bibliotecaudb.servicio.biblioteca.GestionPrestamosServicio - Iniciando proceso de préstamo para Usuario ID: 3, Ejemplar ID: 14
2025-05-12 12:49:24 [main] INFO  bibliotecaudb.dao.biblioteca.PrestamoDAO - Se obtuvieron 2 prestamos activos para el usuario ID: 3
2025-05-12 12:49:24 [main] INFO  bibliotecaudb.conexion.ConexionBD - Cerrando conexion a la BD...
2025-05-12 12:49:24 [main] INFO  bibliotecaudb.conexion.ConexionBD - Conexion cerrada.
2025-05-12 13:54:27 [main] INFO  bibliotecaudb.conexion.ConexionBD - Configuracion de BD cargada.
2025-05-12 13:54:27 [main] INFO  bibliotecaudb.conexion.ConexionBD - Intentando conectar a BD: jdbc:mysql://localhost:3306/biblioteca
2025-05-12 13:54:28 [main] INFO  bibliotecaudb.conexion.ConexionBD - Conexion establecida exitosamente.
2025-05-12 13:54:28 [main] INFO  bibliotecaudb.servicio.ServicioUsuario - Login exitoso para: admin@udb.com
2025-05-12 13:54:28 [main] INFO  bibliotecaudb.servicio.ServicioUsuario - Login exitoso para: profesor1@udb.com
2025-05-12 13:54:28 [main] INFO  bibliotecaudb.servicio.ServicioUsuario - Login exitoso para: alumno1@udb.com
2025-05-12 13:54:28 [main] INFO  bibliotecaudb.dao.biblioteca.DocumentoDAO - Documento creado con ID: 13, Título: Microservicios con Spring Boot
2025-05-12 13:54:28 [main] INFO  bibliotecaudb.dao.biblioteca.EjemplarDAO - Ejemplar creado con ID: 16 para Documento ID: 13
2025-05-12 13:54:28 [main] INFO  bibliotecaudb.dao.biblioteca.EjemplarDAO - Ejemplar creado con ID: 17 para Documento ID: 13
2025-05-12 13:54:28 [main] INFO  bibliotecaudb.servicio.biblioteca.GestionDocumentosServicio - Documento ID 13 y 2 ejemplares creados por admin@udb.com
2025-05-12 13:54:28 [main] INFO  bibliotecaudb.dao.biblioteca.EjemplarDAO - Se obtuvieron 2 ejemplares para el documento ID: 13
2025-05-12 13:54:28 [main] INFO  bibliotecaudb.dao.biblioteca.DocumentoDAO - Busqueda por 'Java' encontro 6 documentos.
2025-05-12 13:54:28 [main] ERROR bibliotecaudb.dao.biblioteca.MoraAnualDAO - Error al obtener MoraAnual para el año: 2025
java.sql.SQLSyntaxErrorException: Table 'biblioteca.mora_anual' doesn't exist
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:112)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:114)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:990)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeQuery(ClientPreparedStatement.java:1058)
	at bibliotecaudb.dao.biblioteca.MoraAnualDAO.obtenerPorAnio(MoraAnualDAO.java:37)
	at bibliotecaudb.dao.biblioteca.MoraAnualDAO.crearOActualizar(MoraAnualDAO.java:81)
	at bibliotecaudb.servicio.biblioteca.ConfiguracionBibliotecaServicio.establecerOActualizarMoraAnual(ConfiguracionBibliotecaServicio.java:126)
	at bibliotecaudb.pruebas.PruebasModuloBiblioteca.main(PruebasModuloBiblioteca.java:131)
2025-05-12 13:54:28 [main] ERROR bibliotecaudb.servicio.biblioteca.ConfiguracionBibliotecaServicio - Error de BD al establecer/actualizar mora anual para el año: 2025
java.sql.SQLSyntaxErrorException: Table 'biblioteca.mora_anual' doesn't exist
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:112)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:114)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:990)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeQuery(ClientPreparedStatement.java:1058)
	at bibliotecaudb.dao.biblioteca.MoraAnualDAO.obtenerPorAnio(MoraAnualDAO.java:37)
	at bibliotecaudb.dao.biblioteca.MoraAnualDAO.crearOActualizar(MoraAnualDAO.java:81)
	at bibliotecaudb.servicio.biblioteca.ConfiguracionBibliotecaServicio.establecerOActualizarMoraAnual(ConfiguracionBibliotecaServicio.java:126)
	at bibliotecaudb.pruebas.PruebasModuloBiblioteca.main(PruebasModuloBiblioteca.java:131)
2025-05-12 13:54:28 [main] INFO  bibliotecaudb.dao.biblioteca.EjemplarDAO - Estado de Ejemplar ID=16 actualizado a: DISPONIBLE
2025-05-12 13:54:28 [main] INFO  bibliotecaudb.servicio.biblioteca.GestionPrestamosServicio - Iniciando proceso de préstamo para Usuario ID: 3, Ejemplar ID: 16
2025-05-12 13:54:28 [main] INFO  bibliotecaudb.dao.biblioteca.PrestamoDAO - Se obtuvieron 2 prestamos activos para el usuario ID: 3
2025-05-12 13:54:28 [main] INFO  bibliotecaudb.conexion.ConexionBD - Cerrando conexion a la BD...
2025-05-12 13:54:28 [main] INFO  bibliotecaudb.conexion.ConexionBD - Conexion cerrada.
2025-05-12 14:07:26 [main] INFO  bibliotecaudb.conexion.ConexionBD - Configuracion de BD cargada.
2025-05-12 14:07:26 [main] INFO  bibliotecaudb.conexion.ConexionBD - Intentando conectar a BD: jdbc:mysql://localhost:3306/biblioteca
2025-05-12 14:07:26 [main] INFO  bibliotecaudb.conexion.ConexionBD - Conexion establecida exitosamente.
2025-05-12 14:07:26 [main] INFO  bibliotecaudb.servicio.ServicioUsuario - Login exitoso para: admin@udb.com
2025-05-12 14:07:26 [main] INFO  bibliotecaudb.servicio.ServicioUsuario - Login exitoso para: profesor1@udb.com
2025-05-12 14:07:26 [main] INFO  bibliotecaudb.servicio.ServicioUsuario - Login exitoso para: alumno1@udb.com
2025-05-12 14:07:26 [main] INFO  bibliotecaudb.dao.biblioteca.DocumentoDAO - Documento creado con ID: 14, Título: Microservicios con Spring Boot
2025-05-12 14:07:27 [main] INFO  bibliotecaudb.dao.biblioteca.EjemplarDAO - Ejemplar creado con ID: 18 para Documento ID: 14
2025-05-12 14:07:27 [main] INFO  bibliotecaudb.dao.biblioteca.EjemplarDAO - Ejemplar creado con ID: 19 para Documento ID: 14
2025-05-12 14:07:27 [main] INFO  bibliotecaudb.servicio.biblioteca.GestionDocumentosServicio - Documento ID 14 y 2 ejemplares creados por admin@udb.com
2025-05-12 14:07:27 [main] INFO  bibliotecaudb.dao.biblioteca.EjemplarDAO - Se obtuvieron 2 ejemplares para el documento ID: 14
2025-05-12 14:07:27 [main] INFO  bibliotecaudb.dao.biblioteca.DocumentoDAO - Busqueda por 'Java' encontro 6 documentos.
2025-05-12 14:07:27 [main] INFO  bibliotecaudb.dao.biblioteca.MoraAnualDAO - MoraAnual actualizada para el año: 2025
2025-05-12 14:07:27 [main] INFO  bibliotecaudb.servicio.biblioteca.ConfiguracionBibliotecaServicio - Mora anual para 2025 establecida/actualizada a: 0.30 por admin@udb.com
2025-05-12 14:07:27 [main] INFO  bibliotecaudb.dao.biblioteca.EjemplarDAO - Estado de Ejemplar ID=18 actualizado a: DISPONIBLE
2025-05-12 14:07:27 [main] INFO  bibliotecaudb.servicio.biblioteca.GestionPrestamosServicio - Iniciando proceso de préstamo para Usuario ID: 3, Ejemplar ID: 18
2025-05-12 14:07:27 [main] INFO  bibliotecaudb.dao.biblioteca.PrestamoDAO - Se obtuvieron 2 prestamos activos para el usuario ID: 3
2025-05-12 14:07:27 [main] INFO  bibliotecaudb.conexion.ConexionBD - Cerrando conexion a la BD...
2025-05-12 14:07:27 [main] INFO  bibliotecaudb.conexion.ConexionBD - Conexion cerrada.
2025-05-12 14:11:29 [main] INFO  bibliotecaudb.conexion.ConexionBD - Configuracion de BD cargada.
2025-05-12 14:11:29 [main] INFO  bibliotecaudb.conexion.ConexionBD - Intentando conectar a BD: jdbc:mysql://localhost:3306/biblioteca
2025-05-12 14:11:30 [main] INFO  bibliotecaudb.conexion.ConexionBD - Conexion establecida exitosamente.
2025-05-12 14:11:30 [main] INFO  bibliotecaudb.servicio.ServicioUsuario - Login exitoso para: admin@udb.com
2025-05-12 14:11:30 [main] INFO  bibliotecaudb.servicio.ServicioUsuario - Login exitoso para: profesor1@udb.com
2025-05-12 14:11:30 [main] INFO  bibliotecaudb.servicio.ServicioUsuario - Login exitoso para: alumno1@udb.com
2025-05-12 14:11:30 [main] INFO  bibliotecaudb.dao.biblioteca.DocumentoDAO - Documento creado con ID: 15, Título: Microservicios con Spring Boot
2025-05-12 14:11:30 [main] INFO  bibliotecaudb.dao.biblioteca.EjemplarDAO - Ejemplar creado con ID: 20 para Documento ID: 15
2025-05-12 14:11:30 [main] INFO  bibliotecaudb.dao.biblioteca.EjemplarDAO - Ejemplar creado con ID: 21 para Documento ID: 15
2025-05-12 14:11:30 [main] INFO  bibliotecaudb.servicio.biblioteca.GestionDocumentosServicio - Documento ID 15 y 2 ejemplares creados por admin@udb.com
2025-05-12 14:11:30 [main] INFO  bibliotecaudb.dao.biblioteca.EjemplarDAO - Se obtuvieron 2 ejemplares para el documento ID: 15
2025-05-12 14:11:30 [main] INFO  bibliotecaudb.dao.biblioteca.DocumentoDAO - Busqueda por 'Java' encontro 6 documentos.
2025-05-12 14:11:30 [main] INFO  bibliotecaudb.dao.biblioteca.MoraAnualDAO - MoraAnual actualizada para el año: 2025
2025-05-12 14:11:30 [main] INFO  bibliotecaudb.servicio.biblioteca.ConfiguracionBibliotecaServicio - Mora anual para 2025 establecida/actualizada a: 0.30 por admin@udb.com
2025-05-12 14:11:30 [main] INFO  bibliotecaudb.dao.biblioteca.EjemplarDAO - Estado de Ejemplar ID=20 actualizado a: DISPONIBLE
2025-05-12 14:11:30 [main] INFO  bibliotecaudb.servicio.biblioteca.GestionPrestamosServicio - Iniciando proceso de préstamo para Usuario ID: 3, Ejemplar ID: 20
2025-05-12 14:11:30 [main] INFO  bibliotecaudb.dao.biblioteca.PrestamoDAO - Se obtuvieron 2 prestamos activos para el usuario ID: 3
2025-05-12 14:11:30 [main] INFO  bibliotecaudb.conexion.ConexionBD - Cerrando conexion a la BD...
2025-05-12 14:11:30 [main] INFO  bibliotecaudb.conexion.ConexionBD - Conexion cerrada.
2025-05-12 14:16:07 [main] INFO  bibliotecaudb.conexion.ConexionBD - Configuracion de BD cargada.
2025-05-12 14:16:07 [main] INFO  bibliotecaudb.conexion.ConexionBD - Intentando conectar a BD: jdbc:mysql://localhost:3306/biblioteca
2025-05-12 14:16:08 [main] INFO  bibliotecaudb.conexion.ConexionBD - Conexion establecida exitosamente.
2025-05-12 14:16:08 [main] INFO  bibliotecaudb.servicio.ServicioUsuario - Login exitoso para: admin@udb.com
2025-05-12 14:16:08 [main] INFO  bibliotecaudb.servicio.ServicioUsuario - Login exitoso para: profesor1@udb.com
2025-05-12 14:16:08 [main] INFO  bibliotecaudb.servicio.ServicioUsuario - Login exitoso para: alumno1@udb.com
2025-05-12 14:16:08 [main] INFO  bibliotecaudb.dao.biblioteca.DocumentoDAO - Documento creado con ID: 16, Título: Microservicios con Spring Boot
2025-05-12 14:16:08 [main] INFO  bibliotecaudb.dao.biblioteca.EjemplarDAO - Ejemplar creado con ID: 22 para Documento ID: 16
2025-05-12 14:16:08 [main] INFO  bibliotecaudb.dao.biblioteca.EjemplarDAO - Ejemplar creado con ID: 23 para Documento ID: 16
2025-05-12 14:16:08 [main] INFO  bibliotecaudb.servicio.biblioteca.GestionDocumentosServicio - Documento ID 16 y 2 ejemplares creados por admin@udb.com
2025-05-12 14:16:08 [main] INFO  bibliotecaudb.dao.biblioteca.EjemplarDAO - Se obtuvieron 2 ejemplares para el documento ID: 16
2025-05-12 14:16:08 [main] INFO  bibliotecaudb.dao.biblioteca.DocumentoDAO - Busqueda por 'Java' encontro 6 documentos.
2025-05-12 14:16:08 [main] INFO  bibliotecaudb.dao.biblioteca.MoraAnualDAO - MoraAnual actualizada para el año: 2025
2025-05-12 14:16:08 [main] INFO  bibliotecaudb.servicio.biblioteca.ConfiguracionBibliotecaServicio - Mora anual para 2025 establecida/actualizada a: 0.30 por admin@udb.com
2025-05-12 14:16:08 [main] INFO  bibliotecaudb.dao.biblioteca.EjemplarDAO - Estado de Ejemplar ID=22 actualizado a: DISPONIBLE
2025-05-12 14:16:08 [main] INFO  bibliotecaudb.servicio.biblioteca.GestionPrestamosServicio - Iniciando proceso de préstamo para Usuario ID: 3, Ejemplar ID: 22
2025-05-12 14:16:08 [main] INFO  bibliotecaudb.dao.biblioteca.PrestamoDAO - Se obtuvieron 2 prestamos activos para el usuario ID: 3
2025-05-12 14:16:08 [main] INFO  bibliotecaudb.conexion.ConexionBD - Cerrando conexion a la BD...
2025-05-12 14:16:08 [main] INFO  bibliotecaudb.conexion.ConexionBD - Conexion cerrada.
2025-05-12 14:22:25 [main] INFO  bibliotecaudb.conexion.ConexionBD - Configuracion de BD cargada.
2025-05-12 14:22:25 [main] INFO  bibliotecaudb.conexion.ConexionBD - Intentando conectar a BD: jdbc:mysql://localhost:3306/biblioteca
2025-05-12 14:22:26 [main] INFO  bibliotecaudb.conexion.ConexionBD - Conexion establecida exitosamente.
2025-05-12 14:22:27 [main] INFO  bibliotecaudb.servicio.ServicioUsuario - Login exitoso para: admin@udb.com
2025-05-12 14:22:27 [main] INFO  bibliotecaudb.servicio.ServicioUsuario - Login exitoso para: profesor1@udb.com
2025-05-12 14:22:27 [main] INFO  bibliotecaudb.servicio.ServicioUsuario - Login exitoso para: alumno1@udb.com
2025-05-12 14:22:27 [main] INFO  bibliotecaudb.dao.biblioteca.DocumentoDAO - Documento creado con ID: 17, Título: Microservicios con Spring Boot
2025-05-12 14:22:27 [main] INFO  bibliotecaudb.dao.biblioteca.EjemplarDAO - Ejemplar creado con ID: 24 para Documento ID: 17
2025-05-12 14:22:27 [main] INFO  bibliotecaudb.dao.biblioteca.EjemplarDAO - Ejemplar creado con ID: 25 para Documento ID: 17
2025-05-12 14:22:27 [main] INFO  bibliotecaudb.servicio.biblioteca.GestionDocumentosServicio - Documento ID 17 y 2 ejemplares creados por admin@udb.com
2025-05-12 14:22:27 [main] INFO  bibliotecaudb.dao.biblioteca.EjemplarDAO - Se obtuvieron 2 ejemplares para el documento ID: 17
2025-05-12 14:22:27 [main] INFO  bibliotecaudb.dao.biblioteca.DocumentoDAO - Busqueda por 'Java' encontro 6 documentos.
2025-05-12 14:22:27 [main] INFO  bibliotecaudb.dao.biblioteca.MoraAnualDAO - MoraAnual actualizada para el año: 2025
2025-05-12 14:22:27 [main] INFO  bibliotecaudb.servicio.biblioteca.ConfiguracionBibliotecaServicio - Mora anual para 2025 establecida/actualizada a: 0.30 por admin@udb.com
2025-05-12 14:22:27 [main] INFO  bibliotecaudb.dao.biblioteca.EjemplarDAO - Estado de Ejemplar ID=24 actualizado a: DISPONIBLE
2025-05-12 14:22:27 [main] INFO  bibliotecaudb.servicio.biblioteca.GestionPrestamosServicio - Iniciando proceso de préstamo para Usuario ID: 3, Ejemplar ID: 24
2025-05-12 14:22:27 [main] INFO  bibliotecaudb.dao.biblioteca.PrestamoDAO - Se obtuvieron 2 prestamos activos para el usuario ID: 3
2025-05-12 14:22:27 [main] INFO  bibliotecaudb.conexion.ConexionBD - Cerrando conexion a la BD...
2025-05-12 14:22:27 [main] INFO  bibliotecaudb.conexion.ConexionBD - Conexion cerrada.
2025-05-12 14:30:56 [main] INFO  bibliotecaudb.conexion.ConexionBD - Configuracion de BD cargada.
2025-05-12 14:30:56 [main] INFO  bibliotecaudb.conexion.ConexionBD - Intentando conectar a BD: jdbc:mysql://localhost:3306/biblioteca
2025-05-12 14:30:57 [main] INFO  bibliotecaudb.conexion.ConexionBD - Conexion establecida exitosamente.
2025-05-12 14:30:57 [main] INFO  bibliotecaudb.servicio.ServicioUsuario - Login exitoso para: admin@udb.com
2025-05-12 14:30:57 [main] INFO  bibliotecaudb.servicio.ServicioUsuario - Login exitoso para: profesor1@udb.com
2025-05-12 14:30:57 [main] INFO  bibliotecaudb.servicio.ServicioUsuario - Login exitoso para: alumno1@udb.com
2025-05-12 14:30:57 [main] INFO  bibliotecaudb.dao.biblioteca.DocumentoDAO - Documento creado con ID: 18, Título: Microservicios con Spring Boot
2025-05-12 14:30:57 [main] INFO  bibliotecaudb.dao.biblioteca.EjemplarDAO - Ejemplar creado con ID: 26 para Documento ID: 18
2025-05-12 14:30:57 [main] INFO  bibliotecaudb.dao.biblioteca.EjemplarDAO - Ejemplar creado con ID: 27 para Documento ID: 18
2025-05-12 14:30:57 [main] INFO  bibliotecaudb.servicio.biblioteca.GestionDocumentosServicio - Documento ID 18 y 2 ejemplares creados por admin@udb.com
2025-05-12 14:30:57 [main] INFO  bibliotecaudb.dao.biblioteca.EjemplarDAO - Se obtuvieron 2 ejemplares para el documento ID: 18
2025-05-12 14:30:57 [main] INFO  bibliotecaudb.dao.biblioteca.DocumentoDAO - Busqueda por 'Java' encontro 6 documentos.
2025-05-12 14:30:57 [main] INFO  bibliotecaudb.dao.biblioteca.MoraAnualDAO - MoraAnual actualizada para el año: 2025
2025-05-12 14:30:57 [main] INFO  bibliotecaudb.servicio.biblioteca.ConfiguracionBibliotecaServicio - Mora anual para 2025 establecida/actualizada a: 0.30 por admin@udb.com
2025-05-12 14:30:57 [main] INFO  bibliotecaudb.dao.biblioteca.EjemplarDAO - Estado de Ejemplar ID=26 actualizado a: DISPONIBLE
2025-05-12 14:30:57 [main] INFO  bibliotecaudb.servicio.biblioteca.GestionPrestamosServicio - Iniciando proceso de préstamo para Usuario ID: 3, Ejemplar ID: 26
2025-05-12 14:30:57 [main] INFO  bibliotecaudb.dao.biblioteca.PrestamoDAO - Se obtuvieron 2 prestamos activos para el usuario ID: 3
2025-05-12 14:30:57 [main] INFO  bibliotecaudb.conexion.ConexionBD - Cerrando conexion a la BD...
2025-05-12 14:30:58 [main] INFO  bibliotecaudb.conexion.ConexionBD - Conexion cerrada.
2025-05-12 14:41:27 [main] INFO  bibliotecaudb.conexion.ConexionBD - Configuracion de BD cargada.
2025-05-12 14:41:27 [main] INFO  bibliotecaudb.conexion.ConexionBD - Intentando conectar a BD: jdbc:mysql://localhost:3306/biblioteca
2025-05-12 14:41:29 [main] INFO  bibliotecaudb.conexion.ConexionBD - Conexion establecida exitosamente.
2025-05-12 14:41:29 [main] INFO  bibliotecaudb.servicio.ServicioUsuario - Login exitoso para: admin@udb.com
2025-05-12 14:41:29 [main] INFO  bibliotecaudb.servicio.ServicioUsuario - Login exitoso para: profesor1@udb.com
2025-05-12 14:41:29 [main] INFO  bibliotecaudb.servicio.ServicioUsuario - Login exitoso para: alumno1@udb.com
2025-05-12 14:41:29 [main] INFO  bibliotecaudb.dao.biblioteca.DocumentoDAO - Documento creado con ID: 19, Título: Microservicios con Spring Boot
2025-05-12 14:41:29 [main] INFO  bibliotecaudb.dao.biblioteca.EjemplarDAO - Ejemplar creado con ID: 28 para Documento ID: 19
2025-05-12 14:41:29 [main] INFO  bibliotecaudb.dao.biblioteca.EjemplarDAO - Ejemplar creado con ID: 29 para Documento ID: 19
2025-05-12 14:41:29 [main] INFO  bibliotecaudb.servicio.biblioteca.GestionDocumentosServicio - Documento ID 19 y 2 ejemplares creados por admin@udb.com
2025-05-12 14:41:29 [main] INFO  bibliotecaudb.dao.biblioteca.EjemplarDAO - Se obtuvieron 2 ejemplares para el documento ID: 19
2025-05-12 14:41:29 [main] INFO  bibliotecaudb.dao.biblioteca.DocumentoDAO - Busqueda por 'Java' encontro 6 documentos.
2025-05-12 14:41:29 [main] INFO  bibliotecaudb.dao.biblioteca.MoraAnualDAO - MoraAnual actualizada para el año: 2025
2025-05-12 14:41:29 [main] INFO  bibliotecaudb.servicio.biblioteca.ConfiguracionBibliotecaServicio - Mora anual para 2025 establecida/actualizada a: 0.30 por admin@udb.com
2025-05-12 14:41:29 [main] INFO  bibliotecaudb.dao.biblioteca.EjemplarDAO - Estado de Ejemplar ID=28 actualizado a: DISPONIBLE
2025-05-12 14:41:29 [main] INFO  bibliotecaudb.servicio.biblioteca.GestionPrestamosServicio - Iniciando proceso de préstamo para Usuario ID: 3, Ejemplar ID: 28
2025-05-12 14:41:29 [main] INFO  bibliotecaudb.dao.biblioteca.PrestamoDAO - Se obtuvieron 0 prestamos activos para el usuario ID: 3
2025-05-12 14:41:29 [main] INFO  bibliotecaudb.servicio.biblioteca.GestionPrestamosServicio - Aplicando políticas de préstamo para Alumno.
2025-05-12 14:41:29 [main] INFO  bibliotecaudb.dao.biblioteca.PrestamoDAO - Prestamo creado con ID: 12
2025-05-12 14:41:29 [main] INFO  bibliotecaudb.dao.biblioteca.EjemplarDAO - Estado de Ejemplar ID=28 actualizado a: PRESTADO
2025-05-12 14:41:29 [main] INFO  bibliotecaudb.servicio.biblioteca.GestionPrestamosServicio - Préstamo ID 12 realizado. Fecha límite: 2025-05-19
2025-05-12 14:41:29 [main] INFO  bibliotecaudb.dao.biblioteca.EjemplarDAO - Se obtuvieron 2 ejemplares para el documento ID: 19
2025-05-12 14:41:29 [main] INFO  bibliotecaudb.dao.biblioteca.PrestamoDAO - Se obtuvieron 1 prestamos activos para el usuario ID: 3
2025-05-12 14:41:29 [main] INFO  bibliotecaudb.servicio.biblioteca.GestionPrestamosServicio - Iniciando proceso de préstamo para Usuario ID: 3, Ejemplar ID: 29
2025-05-12 14:41:29 [main] INFO  bibliotecaudb.dao.biblioteca.PrestamoDAO - Se obtuvieron 1 prestamos activos para el usuario ID: 3
2025-05-12 14:41:29 [main] INFO  bibliotecaudb.servicio.biblioteca.GestionPrestamosServicio - Aplicando políticas de préstamo para Alumno.
2025-05-12 14:41:29 [main] INFO  bibliotecaudb.dao.biblioteca.PrestamoDAO - Prestamo creado con ID: 13
2025-05-12 14:41:29 [main] INFO  bibliotecaudb.dao.biblioteca.EjemplarDAO - Estado de Ejemplar ID=29 actualizado a: PRESTADO
2025-05-12 14:41:29 [main] INFO  bibliotecaudb.servicio.biblioteca.GestionPrestamosServicio - Préstamo ID 13 realizado. Fecha límite: 2025-05-19
2025-05-12 14:41:29 [main] INFO  bibliotecaudb.dao.biblioteca.PrestamoDAO - Se obtuvieron 2 prestamos activos para el usuario ID: 3
2025-05-12 14:41:29 [main] INFO  bibliotecaudb.dao.biblioteca.PrestamoDAO - Se obtuvieron 2 prestamos activos para el usuario ID: 3
2025-05-12 14:41:29 [main] INFO  bibliotecaudb.servicio.biblioteca.GestionPrestamosServicio - Iniciando proceso de devolución para Préstamo ID: 12
2025-05-12 14:41:29 [main] INFO  bibliotecaudb.dao.biblioteca.PrestamoDAO - Prestamo actualizado con ID: 12
2025-05-12 14:41:29 [main] INFO  bibliotecaudb.dao.biblioteca.DevolucionDAO - Devolucion creada con ID: 6 para Prestamo ID: 12
2025-05-12 14:41:29 [main] INFO  bibliotecaudb.dao.biblioteca.EjemplarDAO - Estado de Ejemplar ID=28 actualizado a: DISPONIBLE
2025-05-12 14:41:29 [main] INFO  bibliotecaudb.servicio.biblioteca.GestionPrestamosServicio - Devolución ID 6 registrada exitosamente para Préstamo ID: 12
2025-05-12 14:41:29 [main] INFO  bibliotecaudb.conexion.ConexionBD - Cerrando conexion a la BD...
2025-05-12 14:41:29 [main] INFO  bibliotecaudb.conexion.ConexionBD - Conexion cerrada.
2025-05-12 14:57:11 [main] INFO  bibliotecaudb.conexion.ConexionBD - Configuracion de BD cargada.
2025-05-12 14:57:11 [main] INFO  bibliotecaudb.conexion.ConexionBD - Intentando conectar a BD: jdbc:mysql://localhost:3306/biblioteca
2025-05-12 14:57:12 [main] INFO  bibliotecaudb.conexion.ConexionBD - Conexion establecida exitosamente.
2025-05-12 14:57:12 [main] INFO  bibliotecaudb.servicio.ServicioUsuario - Login exitoso para: admin@udb.com
2025-05-12 14:57:12 [main] INFO  bibliotecaudb.servicio.ServicioUsuario - Login exitoso para: profesor1@udb.com
2025-05-12 14:57:12 [main] INFO  bibliotecaudb.servicio.ServicioUsuario - Login exitoso para: alumno1@udb.com
2025-05-12 14:57:13 [main] INFO  bibliotecaudb.dao.biblioteca.DocumentoDAO - Documento creado con ID: 20, Título: Microservicios con Spring Boot
2025-05-12 14:57:13 [main] INFO  bibliotecaudb.dao.biblioteca.EjemplarDAO - Ejemplar creado con ID: 30 para Documento ID: 20
2025-05-12 14:57:13 [main] INFO  bibliotecaudb.dao.biblioteca.EjemplarDAO - Ejemplar creado con ID: 31 para Documento ID: 20
2025-05-12 14:57:13 [main] INFO  bibliotecaudb.servicio.biblioteca.GestionDocumentosServicio - Documento ID 20 y 2 ejemplares creados por admin@udb.com
2025-05-12 14:57:13 [main] INFO  bibliotecaudb.dao.biblioteca.EjemplarDAO - Se obtuvieron 2 ejemplares para el documento ID: 20
2025-05-12 14:57:13 [main] INFO  bibliotecaudb.dao.biblioteca.DocumentoDAO - Busqueda por 'Java' encontro 3 documentos.
2025-05-12 14:57:13 [main] INFO  bibliotecaudb.dao.biblioteca.MoraAnualDAO - MoraAnual actualizada para el año: 2025
2025-05-12 14:57:13 [main] INFO  bibliotecaudb.servicio.biblioteca.ConfiguracionBibliotecaServicio - Mora anual para 2025 establecida/actualizada a: 0.30 por admin@udb.com
2025-05-12 14:57:13 [main] INFO  bibliotecaudb.dao.biblioteca.EjemplarDAO - Estado de Ejemplar ID=30 actualizado a: DISPONIBLE
2025-05-12 14:57:13 [main] INFO  bibliotecaudb.servicio.biblioteca.GestionPrestamosServicio - Iniciando proceso de préstamo para Usuario ID: 3, Ejemplar ID: 30
2025-05-12 14:57:13 [main] INFO  bibliotecaudb.dao.biblioteca.PrestamoDAO - Se obtuvieron 0 prestamos activos para el usuario ID: 3
2025-05-12 14:57:13 [main] INFO  bibliotecaudb.servicio.biblioteca.GestionPrestamosServicio - Aplicando políticas de préstamo para Alumno.
2025-05-12 14:57:13 [main] INFO  bibliotecaudb.dao.biblioteca.PrestamoDAO - Prestamo creado con ID: 14
2025-05-12 14:57:13 [main] INFO  bibliotecaudb.dao.biblioteca.EjemplarDAO - Estado de Ejemplar ID=30 actualizado a: PRESTADO
2025-05-12 14:57:13 [main] INFO  bibliotecaudb.servicio.biblioteca.GestionPrestamosServicio - Préstamo ID 14 realizado. Fecha límite: 2025-05-19
2025-05-12 14:57:13 [main] INFO  bibliotecaudb.dao.biblioteca.EjemplarDAO - Se obtuvieron 2 ejemplares para el documento ID: 20
2025-05-12 14:57:13 [main] INFO  bibliotecaudb.dao.biblioteca.PrestamoDAO - Se obtuvieron 1 prestamos activos para el usuario ID: 3
2025-05-12 14:57:13 [main] INFO  bibliotecaudb.servicio.biblioteca.GestionPrestamosServicio - Iniciando proceso de préstamo para Usuario ID: 3, Ejemplar ID: 31
2025-05-12 14:57:13 [main] INFO  bibliotecaudb.dao.biblioteca.PrestamoDAO - Se obtuvieron 1 prestamos activos para el usuario ID: 3
2025-05-12 14:57:13 [main] INFO  bibliotecaudb.servicio.biblioteca.GestionPrestamosServicio - Aplicando políticas de préstamo para Alumno.
2025-05-12 14:57:13 [main] INFO  bibliotecaudb.dao.biblioteca.PrestamoDAO - Prestamo creado con ID: 15
2025-05-12 14:57:13 [main] INFO  bibliotecaudb.dao.biblioteca.EjemplarDAO - Estado de Ejemplar ID=31 actualizado a: PRESTADO
2025-05-12 14:57:13 [main] INFO  bibliotecaudb.servicio.biblioteca.GestionPrestamosServicio - Préstamo ID 15 realizado. Fecha límite: 2025-05-19
2025-05-12 14:57:13 [main] INFO  bibliotecaudb.dao.biblioteca.PrestamoDAO - Se obtuvieron 2 prestamos activos para el usuario ID: 3
2025-05-12 14:57:13 [main] INFO  bibliotecaudb.dao.biblioteca.PrestamoDAO - Se obtuvieron 2 prestamos activos para el usuario ID: 3
2025-05-12 14:57:13 [main] INFO  bibliotecaudb.servicio.biblioteca.GestionPrestamosServicio - Iniciando proceso de devolución para Préstamo ID: 14
2025-05-12 14:57:13 [main] INFO  bibliotecaudb.dao.biblioteca.PrestamoDAO - Prestamo actualizado con ID: 14
2025-05-12 14:57:13 [main] INFO  bibliotecaudb.dao.biblioteca.DevolucionDAO - Devolucion creada con ID: 7 para Prestamo ID: 14
2025-05-12 14:57:13 [main] INFO  bibliotecaudb.dao.biblioteca.EjemplarDAO - Estado de Ejemplar ID=30 actualizado a: DISPONIBLE
2025-05-12 14:57:13 [main] INFO  bibliotecaudb.servicio.biblioteca.GestionPrestamosServicio - Devolución ID 7 registrada exitosamente para Préstamo ID: 14
2025-05-12 14:57:13 [main] INFO  bibliotecaudb.conexion.ConexionBD - Cerrando conexion a la BD...
2025-05-12 14:57:13 [main] INFO  bibliotecaudb.conexion.ConexionBD - Conexion cerrada.
2025-05-12 21:28:27 [main] INFO  bibliotecaudb.conexion.ConexionBD - Configuracion de BD cargada.
2025-05-12 21:28:27 [main] INFO  bibliotecaudb.conexion.ConexionBD - Intentando conectar a BD: jdbc:mysql://localhost:3306/biblioteca
2025-05-12 21:28:28 [main] INFO  bibliotecaudb.conexion.ConexionBD - Conexion establecida exitosamente.
2025-05-12 21:28:28 [main] INFO  bibliotecaudb.dao.usuario.impl.TipoUsuarioDAOImpl - Ejecutando query: SELECT id, tipo FROM tipo_usuario ORDER BY id
2025-05-12 21:28:28 [main] INFO  bibliotecaudb.dao.usuario.impl.TipoUsuarioDAOImpl - Ejecutando query: SELECT id, tipo FROM tipo_usuario WHERE id = ? con ID: 1
2025-05-12 21:28:28 [main] INFO  bibliotecaudb.dao.usuario.impl.TipoUsuarioDAOImpl - Ejecutando query: SELECT id, tipo FROM tipo_usuario WHERE tipo = ? con nombre: Alumno
2025-05-12 21:28:28 [main] INFO  bibliotecaudb.dao.usuario.impl.UsuarioDAOImpl - Ejecutando query: INSERT INTO usuarios (nombre, correo, contrasena, id_tipo_usuario, estado) VALUES (?, ?, ?, ?, ?)
2025-05-12 21:28:28 [main] INFO  bibliotecaudb.dao.usuario.impl.UsuarioDAOImpl - Usuario insertado con ID: 9. Filas afectadas: 1
2025-05-12 21:28:28 [main] INFO  bibliotecaudb.dao.usuario.impl.UsuarioDAOImpl - Ejecutando query: SELECT id, nombre, correo, contrasena, id_tipo_usuario, estado FROM usuarios WHERE correo = ? para correo: profesor.junit@udb.edu.sv
2025-05-12 21:28:28 [main] INFO  bibliotecaudb.dao.usuario.impl.TipoUsuarioDAOImpl - Ejecutando query: SELECT id, tipo FROM tipo_usuario WHERE id = ? con ID: 2
2025-05-12 21:28:28 [main] INFO  bibliotecaudb.dao.usuario.impl.UsuarioDAOImpl - Ejecutando query de login para correo: admin@udb.com
2025-05-12 21:28:28 [main] INFO  bibliotecaudb.dao.usuario.impl.UsuarioDAOImpl - Login exitoso para: admin@udb.com, Usuario: admin, Tipo: Administrador
2025-05-12 21:28:28 [main] INFO  bibliotecaudb.dao.usuario.impl.UsuarioDAOImpl - Ejecutando query de login para correo: admin@udb.com
2025-05-12 21:28:28 [main] WARN  bibliotecaudb.dao.usuario.impl.UsuarioDAOImpl - Login fallido para correo: admin@udb.com. Usuario no encontrado o contraseña incorrecta o usuario inactivo.
2025-05-12 21:28:28 [main] INFO  bibliotecaudb.dao.usuario.impl.UsuarioDAOImpl - Ejecutando query: UPDATE usuarios SET nombre = ?, correo = ?, contrasena = ?, id_tipo_usuario = ?, estado = ? WHERE id = ? para ID: 9
2025-05-12 21:28:28 [main] INFO  bibliotecaudb.dao.usuario.impl.UsuarioDAOImpl - Usuario actualizado. Filas afectadas: 1
2025-05-12 21:28:28 [main] INFO  bibliotecaudb.dao.usuario.impl.UsuarioDAOImpl - Ejecutando query de login para correo: profesor.junit@udb.edu.sv
2025-05-12 21:28:28 [main] WARN  bibliotecaudb.dao.usuario.impl.UsuarioDAOImpl - Login fallido para correo: profesor.junit@udb.edu.sv. Usuario no encontrado o contraseña incorrecta o usuario inactivo.
2025-05-12 21:28:28 [main] INFO  bibliotecaudb.dao.usuario.impl.UsuarioDAOImpl - Ejecutando query: UPDATE usuarios SET nombre = ?, correo = ?, contrasena = ?, id_tipo_usuario = ?, estado = ? WHERE id = ? para ID: 9
2025-05-12 21:28:28 [main] INFO  bibliotecaudb.dao.usuario.impl.UsuarioDAOImpl - Usuario actualizado. Filas afectadas: 1
2025-05-12 21:28:28 [main] INFO  bibliotecaudb.dao.usuario.impl.UsuarioDAOImpl - Ejecutando query: UPDATE usuarios SET nombre = ?, correo = ?, contrasena = ?, id_tipo_usuario = ?, estado = ? WHERE id = ? para ID: 9
2025-05-12 21:28:28 [main] INFO  bibliotecaudb.dao.usuario.impl.UsuarioDAOImpl - Usuario actualizado. Filas afectadas: 1
2025-05-12 21:28:28 [main] INFO  bibliotecaudb.dao.usuario.impl.UsuarioDAOImpl - Ejecutando query: SELECT id, nombre, correo, contrasena, id_tipo_usuario, estado FROM usuarios WHERE id = ? para ID: 9
2025-05-12 21:28:28 [main] INFO  bibliotecaudb.dao.usuario.impl.TipoUsuarioDAOImpl - Ejecutando query: SELECT id, tipo FROM tipo_usuario WHERE id = ? con ID: 2
2025-05-12 21:28:28 [main] INFO  bibliotecaudb.dao.usuario.impl.UsuarioDAOImpl - Ejecutando query: SELECT id, nombre, correo, contrasena, id_tipo_usuario, estado FROM usuarios WHERE correo = ? para correo: alumno1@udb.com
2025-05-12 21:28:28 [main] INFO  bibliotecaudb.dao.usuario.impl.TipoUsuarioDAOImpl - Ejecutando query: SELECT id, tipo FROM tipo_usuario WHERE id = ? con ID: 3
2025-05-12 21:28:28 [main] INFO  bibliotecaudb.dao.usuario.impl.UsuarioDAOImpl - Ejecutando query: UPDATE usuarios SET contrasena = ? WHERE correo = ? para correo: alumno1@udb.com
2025-05-12 21:28:28 [main] INFO  bibliotecaudb.dao.usuario.impl.UsuarioDAOImpl - Contraseña actualizada para el correo alumno1@udb.com. Filas afectadas: 1
2025-05-12 21:28:28 [main] INFO  bibliotecaudb.dao.usuario.impl.UsuarioDAOImpl - Ejecutando query de login para correo: alumno1@udb.com
2025-05-12 21:28:28 [main] INFO  bibliotecaudb.dao.usuario.impl.UsuarioDAOImpl - Login exitoso para: alumno1@udb.com, Usuario: Alumno1, Tipo: Alumno
2025-05-12 21:28:28 [main] INFO  bibliotecaudb.dao.usuario.impl.UsuarioDAOImpl - Ejecutando query: UPDATE usuarios SET contrasena = ? WHERE correo = ? para correo: alumno1@udb.com
2025-05-12 21:28:28 [main] INFO  bibliotecaudb.dao.usuario.impl.UsuarioDAOImpl - Contraseña actualizada para el correo alumno1@udb.com. Filas afectadas: 1
2025-05-12 21:28:28 [main] INFO  bibliotecaudb.dao.usuario.impl.UsuarioDAOImpl - Ejecutando query: SELECT id, nombre, correo, contrasena, id_tipo_usuario, estado FROM usuarios ORDER BY nombre
2025-05-12 21:28:28 [main] INFO  bibliotecaudb.dao.usuario.impl.TipoUsuarioDAOImpl - Ejecutando query: SELECT id, tipo FROM tipo_usuario WHERE id = ? con ID: 1
2025-05-12 21:28:28 [main] INFO  bibliotecaudb.dao.usuario.impl.TipoUsuarioDAOImpl - Ejecutando query: SELECT id, tipo FROM tipo_usuario WHERE id = ? con ID: 3
2025-05-12 21:28:28 [main] INFO  bibliotecaudb.dao.usuario.impl.TipoUsuarioDAOImpl - Ejecutando query: SELECT id, tipo FROM tipo_usuario WHERE id = ? con ID: 2
2025-05-12 21:28:28 [main] INFO  bibliotecaudb.dao.usuario.impl.TipoUsuarioDAOImpl - Ejecutando query: SELECT id, tipo FROM tipo_usuario WHERE id = ? con ID: 2
2025-05-12 21:28:28 [main] INFO  bibliotecaudb.dao.usuario.impl.UsuarioDAOImpl - Ejecutando query: DELETE FROM usuarios WHERE id = ? para ID: 9
2025-05-12 21:28:28 [main] INFO  bibliotecaudb.dao.usuario.impl.UsuarioDAOImpl - Usuario eliminado. Filas afectadas: 1
2025-05-12 21:28:28 [main] INFO  bibliotecaudb.dao.usuario.impl.UsuarioDAOImpl - Ejecutando query: SELECT id, nombre, correo, contrasena, id_tipo_usuario, estado FROM usuarios WHERE id = ? para ID: 9
2025-05-13 21:53:16 [main] INFO  bibliotecaudb.pruebas.PruebaConexionBD - Intentando obtener conexión a la base de datos...
2025-05-13 21:53:16 [main] INFO  bibliotecaudb.conexion.ConexionBD - Configuracion de BD cargada.
2025-05-13 21:53:16 [main] INFO  bibliotecaudb.conexion.ConexionBD - Intentando conectar a BD: jdbc:mysql://localhost:3306/biblioteca
2025-05-13 21:53:16 [main] INFO  bibliotecaudb.conexion.ConexionBD - Conexion establecida exitosamente.
2025-05-13 21:53:16 [main] INFO  bibliotecaudb.pruebas.PruebaConexionBD - ¡Conexión a la base de datos establecida exitosamente!
2025-05-13 21:53:16 [main] INFO  bibliotecaudb.pruebas.PruebaConexionBD - URL de la BD: jdbc:mysql://localhost:3306/biblioteca
2025-05-13 21:53:16 [main] INFO  bibliotecaudb.pruebas.PruebaConexionBD - Usuario de la BD: root@localhost
2025-05-13 21:59:39 [main] INFO  bibliotecaudb.pruebas.PruebasBibliotecaService - === INICIO DE PRUEBAS DEL SERVICIO DE BIBLIOTECA ===
2025-05-13 21:59:39 [main] INFO  bibliotecaudb.pruebas.PruebasBibliotecaService - 
--- Configuración: Autenticando Usuarios ---
2025-05-13 21:59:39 [main] INFO  bibliotecaudb.conexion.ConexionBD - Configuracion de BD cargada.
2025-05-13 21:59:39 [main] INFO  bibliotecaudb.conexion.ConexionBD - Intentando conectar a BD: jdbc:mysql://localhost:3306/biblioteca
2025-05-13 21:59:40 [main] INFO  bibliotecaudb.conexion.ConexionBD - Conexion establecida exitosamente.
2025-05-13 21:59:40 [main] INFO  bibliotecaudb.dao.usuario.impl.UsuarioDAOImpl - Ejecutando query de login para correo: admin@udb.com
2025-05-13 21:59:40 [main] INFO  bibliotecaudb.dao.usuario.impl.UsuarioDAOImpl - Login exitoso para: admin@udb.com, Usuario: admin, Tipo: Administrador
2025-05-13 21:59:40 [main] INFO  bibliotecaudb.servicios.impl.UsuarioServiceImpl - Usuario autenticado: admin@udb.com, Tipo: Administrador
2025-05-13 21:59:40 [main] INFO  bibliotecaudb.pruebas.PruebasBibliotecaService - Admin autenticado: admin
2025-05-13 21:59:40 [main] INFO  bibliotecaudb.dao.usuario.impl.UsuarioDAOImpl - Ejecutando query: SELECT id, nombre, correo, contrasena, id_tipo_usuario, estado FROM usuarios WHERE correo = ? para correo: alumno1@udb.com
2025-05-13 21:59:40 [main] INFO  bibliotecaudb.dao.usuario.impl.TipoUsuarioDAOImpl - Ejecutando query: SELECT id, tipo FROM tipo_usuario WHERE id = ? con ID: 3
2025-05-13 21:59:40 [main] INFO  bibliotecaudb.pruebas.PruebasBibliotecaService - Alumno de prueba ('alumno1@udb.com') obtenido: Alumno1
2025-05-13 21:59:40 [main] INFO  bibliotecaudb.pruebas.PruebasBibliotecaService - 
--- Pruebas de Catálogo ---
2025-05-13 21:59:40 [main] INFO  bibliotecaudb.dao.biblioteca.impl.DocumentoDAOImpl - Ejecutando query: INSERT INTO documentos (titulo, autor, editorial, anio_publicacion, id_tipo_documento) VALUES (?, ?, ?, ?, ?)
2025-05-13 21:59:40 [main] INFO  bibliotecaudb.dao.biblioteca.impl.DocumentoDAOImpl - Documento insertado con ID: 21
2025-05-13 21:59:40 [main] INFO  bibliotecaudb.dao.biblioteca.impl.EjemplarDAOImpl - Ejecutando query: INSERT INTO ejemplares (id_documento, ubicacion, estado) VALUES (?, ?, ?)
2025-05-13 21:59:40 [main] INFO  bibliotecaudb.dao.biblioteca.impl.EjemplarDAOImpl - Ejemplar insertado con ID: 32
2025-05-13 21:59:40 [main] INFO  bibliotecaudb.dao.biblioteca.impl.EjemplarDAOImpl - Ejecutando query: INSERT INTO ejemplares (id_documento, ubicacion, estado) VALUES (?, ?, ?)
2025-05-13 21:59:40 [main] INFO  bibliotecaudb.dao.biblioteca.impl.EjemplarDAOImpl - Ejemplar insertado con ID: 33
2025-05-13 21:59:40 [main] INFO  bibliotecaudb.servicios.impl.BibliotecaServiceImpl - Documento y 2 ejemplares registrados exitosamente.
2025-05-13 21:59:40 [main] INFO  bibliotecaudb.pruebas.PruebasBibliotecaService - ÉXITO: Documento y ejemplares registrados. ID Documento: 21
2025-05-13 21:59:40 [main] INFO  bibliotecaudb.pruebas.PruebasBibliotecaService - ID del primer ejemplar para prestar: 32
2025-05-13 21:59:40 [main] INFO  bibliotecaudb.pruebas.PruebasBibliotecaService - 
[Prueba Catálogo 2: Buscar Documentos ('Java Service')]
2025-05-13 21:59:40 [main] INFO  bibliotecaudb.dao.biblioteca.impl.DocumentoDAOImpl - Ejecutando búsqueda general de documentos con término: Java Service
2025-05-13 21:59:40 [main] INFO  bibliotecaudb.dao.biblioteca.impl.TipoDocumentoDAOImpl - Ejecutando query: SELECT id, tipo FROM tipo_documento WHERE id = ? con ID: 1
2025-05-13 21:59:40 [main] INFO  bibliotecaudb.pruebas.PruebasBibliotecaService - Documentos encontrados: 1
2025-05-13 21:59:40 [main] INFO  bibliotecaudb.pruebas.PruebasBibliotecaService - 
--- Pruebas de Préstamos (Usuario: Alumno1, Ejemplar ID: 32) ---
2025-05-13 21:59:40 [main] INFO  bibliotecaudb.pruebas.PruebasBibliotecaService - 
[Prueba Préstamo 3: Realizar Préstamo Exitoso]
2025-05-13 21:59:40 [main] INFO  bibliotecaudb.dao.usuario.impl.UsuarioDAOImpl - Ejecutando query: SELECT id, nombre, correo, contrasena, id_tipo_usuario, estado FROM usuarios WHERE id = ? para ID: 3
2025-05-13 21:59:40 [main] INFO  bibliotecaudb.dao.usuario.impl.TipoUsuarioDAOImpl - Ejecutando query: SELECT id, tipo FROM tipo_usuario WHERE id = ? con ID: 3
2025-05-13 21:59:40 [main] INFO  bibliotecaudb.dao.biblioteca.impl.EjemplarDAOImpl - Ejecutando query: SELECT id, id_documento, ubicacion, estado FROM ejemplares WHERE id = ? con ID: 32
2025-05-13 21:59:40 [main] INFO  bibliotecaudb.dao.biblioteca.impl.DocumentoDAOImpl - Ejecutando query: SELECT id, titulo, autor, editorial, anio_publicacion, id_tipo_documento FROM documentos WHERE id = ? con ID: 21
2025-05-13 21:59:40 [main] INFO  bibliotecaudb.dao.biblioteca.impl.TipoDocumentoDAOImpl - Ejecutando query: SELECT id, tipo FROM tipo_documento WHERE id = ? con ID: 1
2025-05-13 21:59:40 [main] INFO  bibliotecaudb.dao.biblioteca.impl.PrestamoDAOImpl - Ejecutando query: SELECT id, id_usuario, id_ejemplar, fecha_prestamo, fecha_devolucion, fecha_limite, mora FROM prestamos WHERE id_usuario = ? AND fecha_devolucion IS NULL AND fecha_limite < CURDATE() con parámetro: 3
2025-05-13 21:59:40 [main] INFO  bibliotecaudb.dao.biblioteca.impl.PoliticasPrestamosDAOImpl - Ejecutando query: SELECT id_politica, id_tipo_usuario, max_ejemplares_prestamo, dias_prestamo_default FROM politicas_prestamo WHERE id_tipo_usuario = ? con idTipoUsuario: 3
2025-05-13 21:59:40 [main] INFO  bibliotecaudb.dao.usuario.impl.TipoUsuarioDAOImpl - Ejecutando query: SELECT id, tipo FROM tipo_usuario WHERE id = ? con ID: 3
2025-05-13 21:59:40 [main] INFO  bibliotecaudb.dao.biblioteca.impl.PrestamoDAOImpl - Ejecutando query: SELECT COUNT(*) FROM prestamos WHERE id_usuario = ? AND fecha_devolucion IS NULL para idUsuario: 3
2025-05-13 21:59:40 [main] INFO  bibliotecaudb.dao.biblioteca.impl.PrestamoDAOImpl - Ejecutando query: INSERT INTO prestamos (id_usuario, id_ejemplar, fecha_prestamo, fecha_limite, mora) VALUES (?, ?, ?, ?, ?)
2025-05-13 21:59:40 [main] INFO  bibliotecaudb.dao.biblioteca.impl.PrestamoDAOImpl - Préstamo insertado con ID: 16
2025-05-13 21:59:40 [main] INFO  bibliotecaudb.servicios.impl.BibliotecaServiceImpl - Préstamo realizado exitosamente ID: 16 para usuario ID: 3, ejemplar ID: 32
2025-05-13 21:59:40 [main] INFO  bibliotecaudb.dao.biblioteca.impl.PrestamoDAOImpl - Ejecutando query: SELECT id, id_usuario, id_ejemplar, fecha_prestamo, fecha_devolucion, fecha_limite, mora FROM prestamos WHERE id = ? con ID: 16
2025-05-13 21:59:40 [main] INFO  bibliotecaudb.dao.usuario.impl.UsuarioDAOImpl - Ejecutando query: SELECT id, nombre, correo, contrasena, id_tipo_usuario, estado FROM usuarios WHERE id = ? para ID: 3
2025-05-13 21:59:40 [main] INFO  bibliotecaudb.dao.usuario.impl.TipoUsuarioDAOImpl - Ejecutando query: SELECT id, tipo FROM tipo_usuario WHERE id = ? con ID: 3
2025-05-13 21:59:40 [main] INFO  bibliotecaudb.dao.biblioteca.impl.EjemplarDAOImpl - Ejecutando query: SELECT id, id_documento, ubicacion, estado FROM ejemplares WHERE id = ? con ID: 32
2025-05-13 21:59:40 [main] INFO  bibliotecaudb.dao.biblioteca.impl.DocumentoDAOImpl - Ejecutando query: SELECT id, titulo, autor, editorial, anio_publicacion, id_tipo_documento FROM documentos WHERE id = ? con ID: 21
2025-05-13 21:59:40 [main] INFO  bibliotecaudb.dao.biblioteca.impl.TipoDocumentoDAOImpl - Ejecutando query: SELECT id, tipo FROM tipo_documento WHERE id = ? con ID: 1
2025-05-13 21:59:40 [main] INFO  bibliotecaudb.pruebas.PruebasBibliotecaService - ÉXITO: Préstamo realizado. ID: 16, Límite: 2025-05-20
2025-05-13 21:59:40 [main] INFO  bibliotecaudb.pruebas.PruebasBibliotecaService - 
[Prueba Préstamo 4: Intentar Prestar Mismo Ejemplar de Nuevo]
2025-05-13 21:59:40 [main] INFO  bibliotecaudb.dao.usuario.impl.UsuarioDAOImpl - Ejecutando query: SELECT id, nombre, correo, contrasena, id_tipo_usuario, estado FROM usuarios WHERE id = ? para ID: 3
2025-05-13 21:59:40 [main] INFO  bibliotecaudb.dao.usuario.impl.TipoUsuarioDAOImpl - Ejecutando query: SELECT id, tipo FROM tipo_usuario WHERE id = ? con ID: 3
2025-05-13 21:59:40 [main] INFO  bibliotecaudb.dao.biblioteca.impl.EjemplarDAOImpl - Ejecutando query: SELECT id, id_documento, ubicacion, estado FROM ejemplares WHERE id = ? con ID: 32
2025-05-13 21:59:40 [main] INFO  bibliotecaudb.dao.biblioteca.impl.DocumentoDAOImpl - Ejecutando query: SELECT id, titulo, autor, editorial, anio_publicacion, id_tipo_documento FROM documentos WHERE id = ? con ID: 21
2025-05-13 21:59:40 [main] INFO  bibliotecaudb.dao.biblioteca.impl.TipoDocumentoDAOImpl - Ejecutando query: SELECT id, tipo FROM tipo_documento WHERE id = ? con ID: 1
2025-05-13 21:59:40 [main] ERROR bibliotecaudb.servicios.impl.BibliotecaServiceImpl - Rollback realizado (préstamo).
bibliotecaudb.excepciones.BibliotecaException: El ejemplar 'Aventuras en Java Service' (ID: 32) no está disponible.
	at bibliotecaudb.servicios.impl.BibliotecaServiceImpl.realizarPrestamo(BibliotecaServiceImpl.java:167)
	at bibliotecaudb.pruebas.PruebasBibliotecaService.main(PruebasBibliotecaService.java:140)
2025-05-13 21:59:40 [main] INFO  bibliotecaudb.pruebas.PruebasBibliotecaService - ÉXITO: No se pudo prestar ejemplar no disponible: El ejemplar 'Aventuras en Java Service' (ID: 32) no está disponible.
2025-05-13 21:59:40 [main] INFO  bibliotecaudb.pruebas.PruebasBibliotecaService - 
--- Pruebas de Devoluciones (Préstamo ID: 16) ---
2025-05-13 21:59:40 [main] INFO  bibliotecaudb.pruebas.PruebasBibliotecaService - 
[Prueba Devolución 5: Registrar Devolución con Mora Simulada]
2025-05-13 21:59:40 [main] INFO  bibliotecaudb.dao.biblioteca.impl.PrestamoDAOImpl - Ejecutando query: SELECT id, id_usuario, id_ejemplar, fecha_prestamo, fecha_devolucion, fecha_limite, mora FROM prestamos WHERE id = ? con ID: 16
2025-05-13 21:59:40 [main] INFO  bibliotecaudb.dao.usuario.impl.UsuarioDAOImpl - Ejecutando query: SELECT id, nombre, correo, contrasena, id_tipo_usuario, estado FROM usuarios WHERE id = ? para ID: 3
2025-05-13 21:59:40 [main] INFO  bibliotecaudb.dao.usuario.impl.TipoUsuarioDAOImpl - Ejecutando query: SELECT id, tipo FROM tipo_usuario WHERE id = ? con ID: 3
2025-05-13 21:59:40 [main] INFO  bibliotecaudb.dao.biblioteca.impl.EjemplarDAOImpl - Ejecutando query: SELECT id, id_documento, ubicacion, estado FROM ejemplares WHERE id = ? con ID: 32
2025-05-13 21:59:40 [main] INFO  bibliotecaudb.dao.biblioteca.impl.DocumentoDAOImpl - Ejecutando query: SELECT id, titulo, autor, editorial, anio_publicacion, id_tipo_documento FROM documentos WHERE id = ? con ID: 21
2025-05-13 21:59:40 [main] INFO  bibliotecaudb.dao.biblioteca.impl.TipoDocumentoDAOImpl - Ejecutando query: SELECT id, tipo FROM tipo_documento WHERE id = ? con ID: 1
2025-05-13 21:59:40 [main] INFO  bibliotecaudb.dao.biblioteca.impl.PrestamoDAOImpl - Ejecutando query: SELECT id, id_usuario, id_ejemplar, fecha_prestamo, fecha_devolucion, fecha_limite, mora FROM prestamos WHERE id = ? con ID: 16
2025-05-13 21:59:40 [main] INFO  bibliotecaudb.dao.usuario.impl.UsuarioDAOImpl - Ejecutando query: SELECT id, nombre, correo, contrasena, id_tipo_usuario, estado FROM usuarios WHERE id = ? para ID: 3
2025-05-13 21:59:40 [main] INFO  bibliotecaudb.dao.usuario.impl.TipoUsuarioDAOImpl - Ejecutando query: SELECT id, tipo FROM tipo_usuario WHERE id = ? con ID: 3
2025-05-13 21:59:40 [main] INFO  bibliotecaudb.dao.biblioteca.impl.EjemplarDAOImpl - Ejecutando query: SELECT id, id_documento, ubicacion, estado FROM ejemplares WHERE id = ? con ID: 32
2025-05-13 21:59:40 [main] INFO  bibliotecaudb.dao.biblioteca.impl.DocumentoDAOImpl - Ejecutando query: SELECT id, titulo, autor, editorial, anio_publicacion, id_tipo_documento FROM documentos WHERE id = ? con ID: 21
2025-05-13 21:59:40 [main] INFO  bibliotecaudb.dao.biblioteca.impl.TipoDocumentoDAOImpl - Ejecutando query: SELECT id, tipo FROM tipo_documento WHERE id = ? con ID: 1
2025-05-13 21:59:40 [main] INFO  bibliotecaudb.dao.biblioteca.impl.MoraAnualDAOImpl - Ejecutando query: SELECT anio, mora_diaria FROM mora_anual WHERE anio = ? para año: 2025
2025-05-13 21:59:40 [main] INFO  bibliotecaudb.servicios.impl.BibliotecaServiceImpl - Mora calculada para préstamo ID 16: 1.50
2025-05-13 21:59:40 [main] INFO  bibliotecaudb.dao.biblioteca.impl.PrestamoDAOImpl - Registrando devolución en tabla prestamos para ID: 16
2025-05-13 21:59:40 [main] INFO  bibliotecaudb.dao.biblioteca.impl.PrestamoDAOImpl - Devolución registrada en préstamo. Filas afectadas: 1
2025-05-13 21:59:40 [main] INFO  bibliotecaudb.dao.biblioteca.impl.DevolucionDAOImpl - Ejecutando query: INSERT INTO devoluciones (id_prestamo, fecha_devolucion, mora_pagada) VALUES (?, ?, ?)
2025-05-13 21:59:40 [main] INFO  bibliotecaudb.dao.biblioteca.impl.DevolucionDAOImpl - Devolución insertada con ID: 8
2025-05-13 21:59:40 [main] INFO  bibliotecaudb.servicios.impl.BibliotecaServiceImpl - Devolución registrada exitosamente ID: 8 para préstamo ID: 16
2025-05-13 21:59:40 [main] INFO  bibliotecaudb.dao.biblioteca.impl.DevolucionDAOImpl - Ejecutando query: SELECT id, id_prestamo, fecha_devolucion, mora_pagada FROM devoluciones WHERE id = ? con ID: 8
2025-05-13 21:59:40 [main] INFO  bibliotecaudb.dao.biblioteca.impl.PrestamoDAOImpl - Ejecutando query: SELECT id, id_usuario, id_ejemplar, fecha_prestamo, fecha_devolucion, fecha_limite, mora FROM prestamos WHERE id = ? con ID: 16
2025-05-13 21:59:40 [main] INFO  bibliotecaudb.dao.usuario.impl.UsuarioDAOImpl - Ejecutando query: SELECT id, nombre, correo, contrasena, id_tipo_usuario, estado FROM usuarios WHERE id = ? para ID: 3
2025-05-13 21:59:40 [main] INFO  bibliotecaudb.dao.usuario.impl.TipoUsuarioDAOImpl - Ejecutando query: SELECT id, tipo FROM tipo_usuario WHERE id = ? con ID: 3
2025-05-13 21:59:40 [main] INFO  bibliotecaudb.dao.biblioteca.impl.EjemplarDAOImpl - Ejecutando query: SELECT id, id_documento, ubicacion, estado FROM ejemplares WHERE id = ? con ID: 32
2025-05-13 21:59:40 [main] INFO  bibliotecaudb.dao.biblioteca.impl.DocumentoDAOImpl - Ejecutando query: SELECT id, titulo, autor, editorial, anio_publicacion, id_tipo_documento FROM documentos WHERE id = ? con ID: 21
2025-05-13 21:59:40 [main] INFO  bibliotecaudb.dao.biblioteca.impl.TipoDocumentoDAOImpl - Ejecutando query: SELECT id, tipo FROM tipo_documento WHERE id = ? con ID: 1
2025-05-13 21:59:40 [main] INFO  bibliotecaudb.pruebas.PruebasBibliotecaService - ÉXITO: Devolución registrada. ID: 8, Mora Pagada: 1.50
2025-05-13 21:59:40 [main] INFO  bibliotecaudb.dao.biblioteca.impl.EjemplarDAOImpl - Ejecutando query: SELECT id, id_documento, ubicacion, estado FROM ejemplares WHERE id = ? con ID: 32
2025-05-13 21:59:40 [main] INFO  bibliotecaudb.dao.biblioteca.impl.DocumentoDAOImpl - Ejecutando query: SELECT id, titulo, autor, editorial, anio_publicacion, id_tipo_documento FROM documentos WHERE id = ? con ID: 21
2025-05-13 21:59:40 [main] INFO  bibliotecaudb.dao.biblioteca.impl.TipoDocumentoDAOImpl - Ejecutando query: SELECT id, tipo FROM tipo_documento WHERE id = ? con ID: 1
2025-05-13 21:59:40 [main] INFO  bibliotecaudb.pruebas.PruebasBibliotecaService - Verificación: Ejemplar ID 32 está ahora DISPONIBLE.
2025-05-13 21:59:40 [main] INFO  bibliotecaudb.pruebas.PruebasBibliotecaService - 
--- Pruebas de Configuración (Admin) ---
2025-05-13 21:59:40 [main] INFO  bibliotecaudb.pruebas.PruebasBibliotecaService - 
[Prueba Config 6: Actualizar Política Alumnos]
2025-05-13 21:59:40 [main] INFO  bibliotecaudb.dao.biblioteca.impl.PoliticasPrestamosDAOImpl - Ejecutando query: SELECT id_politica, id_tipo_usuario, max_ejemplares_prestamo, dias_prestamo_default FROM politicas_prestamo ORDER BY id_tipo_usuario
2025-05-13 21:59:40 [main] INFO  bibliotecaudb.dao.usuario.impl.TipoUsuarioDAOImpl - Ejecutando query: SELECT id, tipo FROM tipo_usuario WHERE id = ? con ID: 1
2025-05-13 21:59:40 [main] INFO  bibliotecaudb.dao.usuario.impl.TipoUsuarioDAOImpl - Ejecutando query: SELECT id, tipo FROM tipo_usuario WHERE id = ? con ID: 2
2025-05-13 21:59:40 [main] INFO  bibliotecaudb.dao.usuario.impl.TipoUsuarioDAOImpl - Ejecutando query: SELECT id, tipo FROM tipo_usuario WHERE id = ? con ID: 3
2025-05-13 21:59:40 [main] INFO  bibliotecaudb.dao.biblioteca.impl.PoliticasPrestamosDAOImpl - Actualizando política para tipo_usuario ID: 3
2025-05-13 21:59:40 [main] INFO  bibliotecaudb.dao.biblioteca.impl.PoliticasPrestamosDAOImpl - Política de préstamo actualizada. Filas afectadas: 1
2025-05-13 21:59:40 [main] INFO  bibliotecaudb.dao.biblioteca.impl.PoliticasPrestamosDAOImpl - Ejecutando query: SELECT id_politica, id_tipo_usuario, max_ejemplares_prestamo, dias_prestamo_default FROM politicas_prestamo ORDER BY id_tipo_usuario
2025-05-13 21:59:40 [main] INFO  bibliotecaudb.dao.usuario.impl.TipoUsuarioDAOImpl - Ejecutando query: SELECT id, tipo FROM tipo_usuario WHERE id = ? con ID: 1
2025-05-13 21:59:40 [main] INFO  bibliotecaudb.dao.usuario.impl.TipoUsuarioDAOImpl - Ejecutando query: SELECT id, tipo FROM tipo_usuario WHERE id = ? con ID: 2
2025-05-13 21:59:40 [main] INFO  bibliotecaudb.dao.usuario.impl.TipoUsuarioDAOImpl - Ejecutando query: SELECT id, tipo FROM tipo_usuario WHERE id = ? con ID: 3
2025-05-13 21:59:40 [main] INFO  bibliotecaudb.pruebas.PruebasBibliotecaService - ÉXITO: Política de alumnos actualizada. Nuevo max: 4
2025-05-13 21:59:40 [main] INFO  bibliotecaudb.dao.biblioteca.impl.PoliticasPrestamosDAOImpl - Actualizando política para tipo_usuario ID: 3
2025-05-13 21:59:40 [main] INFO  bibliotecaudb.dao.biblioteca.impl.PoliticasPrestamosDAOImpl - Política de préstamo actualizada. Filas afectadas: 1
2025-05-13 21:59:40 [main] INFO  bibliotecaudb.pruebas.PruebasBibliotecaService - 
=== FIN DE PRUEBAS DEL SERVICIO DE BIBLIOTECA ===
2025-05-13 22:01:51 [main] INFO  bibliotecaudb.conexion.ConexionBD - Configuracion de BD cargada.
2025-05-13 22:01:51 [main] INFO  bibliotecaudb.conexion.ConexionBD - Intentando conectar a BD: jdbc:mysql://localhost:3306/biblioteca
2025-05-13 22:01:52 [main] INFO  bibliotecaudb.conexion.ConexionBD - Conexion establecida exitosamente.
2025-05-13 22:01:52 [main] INFO  bibliotecaudb.dao.usuario.impl.TipoUsuarioDAOImpl - Ejecutando query: SELECT id, tipo FROM tipo_usuario ORDER BY id
2025-05-13 22:01:52 [main] INFO  bibliotecaudb.dao.usuario.impl.TipoUsuarioDAOImpl - Ejecutando query: SELECT id, tipo FROM tipo_usuario WHERE id = ? con ID: 1
2025-05-13 22:01:52 [main] INFO  bibliotecaudb.dao.usuario.impl.TipoUsuarioDAOImpl - Ejecutando query: SELECT id, tipo FROM tipo_usuario WHERE tipo = ? con nombre: Alumno
2025-05-13 22:01:52 [main] INFO  bibliotecaudb.dao.usuario.impl.UsuarioDAOImpl - Ejecutando query: INSERT INTO usuarios (nombre, correo, contrasena, id_tipo_usuario, estado) VALUES (?, ?, ?, ?, ?)
2025-05-13 22:01:52 [main] INFO  bibliotecaudb.dao.usuario.impl.UsuarioDAOImpl - Usuario insertado con ID: 10. Filas afectadas: 1
2025-05-13 22:01:52 [main] INFO  bibliotecaudb.dao.usuario.impl.UsuarioDAOImpl - Ejecutando query: SELECT id, nombre, correo, contrasena, id_tipo_usuario, estado FROM usuarios WHERE correo = ? para correo: profesor.junit@udb.edu.sv
2025-05-13 22:01:52 [main] INFO  bibliotecaudb.dao.usuario.impl.TipoUsuarioDAOImpl - Ejecutando query: SELECT id, tipo FROM tipo_usuario WHERE id = ? con ID: 2
2025-05-13 22:01:52 [main] INFO  bibliotecaudb.dao.usuario.impl.UsuarioDAOImpl - Ejecutando query de login para correo: admin@udb.com
2025-05-13 22:01:52 [main] INFO  bibliotecaudb.dao.usuario.impl.UsuarioDAOImpl - Login exitoso para: admin@udb.com, Usuario: admin, Tipo: Administrador
2025-05-13 22:01:52 [main] INFO  bibliotecaudb.dao.usuario.impl.UsuarioDAOImpl - Ejecutando query de login para correo: admin@udb.com
2025-05-13 22:01:52 [main] WARN  bibliotecaudb.dao.usuario.impl.UsuarioDAOImpl - Login fallido para correo: admin@udb.com. Usuario no encontrado o contraseña incorrecta o usuario inactivo.
2025-05-13 22:01:52 [main] INFO  bibliotecaudb.dao.usuario.impl.UsuarioDAOImpl - Ejecutando query: UPDATE usuarios SET nombre = ?, correo = ?, contrasena = ?, id_tipo_usuario = ?, estado = ? WHERE id = ? para ID: 10
2025-05-13 22:01:52 [main] INFO  bibliotecaudb.dao.usuario.impl.UsuarioDAOImpl - Usuario actualizado. Filas afectadas: 1
2025-05-13 22:01:52 [main] INFO  bibliotecaudb.dao.usuario.impl.UsuarioDAOImpl - Ejecutando query de login para correo: profesor.junit@udb.edu.sv
2025-05-13 22:01:52 [main] WARN  bibliotecaudb.dao.usuario.impl.UsuarioDAOImpl - Login fallido para correo: profesor.junit@udb.edu.sv. Usuario no encontrado o contraseña incorrecta o usuario inactivo.
2025-05-13 22:01:52 [main] INFO  bibliotecaudb.dao.usuario.impl.UsuarioDAOImpl - Ejecutando query: UPDATE usuarios SET nombre = ?, correo = ?, contrasena = ?, id_tipo_usuario = ?, estado = ? WHERE id = ? para ID: 10
2025-05-13 22:01:52 [main] INFO  bibliotecaudb.dao.usuario.impl.UsuarioDAOImpl - Usuario actualizado. Filas afectadas: 1
2025-05-13 22:01:52 [main] INFO  bibliotecaudb.dao.usuario.impl.UsuarioDAOImpl - Ejecutando query: UPDATE usuarios SET nombre = ?, correo = ?, contrasena = ?, id_tipo_usuario = ?, estado = ? WHERE id = ? para ID: 10
2025-05-13 22:01:52 [main] INFO  bibliotecaudb.dao.usuario.impl.UsuarioDAOImpl - Usuario actualizado. Filas afectadas: 1
2025-05-13 22:01:52 [main] INFO  bibliotecaudb.dao.usuario.impl.UsuarioDAOImpl - Ejecutando query: SELECT id, nombre, correo, contrasena, id_tipo_usuario, estado FROM usuarios WHERE id = ? para ID: 10
2025-05-13 22:01:52 [main] INFO  bibliotecaudb.dao.usuario.impl.TipoUsuarioDAOImpl - Ejecutando query: SELECT id, tipo FROM tipo_usuario WHERE id = ? con ID: 2
2025-05-13 22:01:52 [main] INFO  bibliotecaudb.dao.usuario.impl.UsuarioDAOImpl - Ejecutando query: SELECT id, nombre, correo, contrasena, id_tipo_usuario, estado FROM usuarios WHERE correo = ? para correo: alumno1@udb.com
2025-05-13 22:01:52 [main] INFO  bibliotecaudb.dao.usuario.impl.TipoUsuarioDAOImpl - Ejecutando query: SELECT id, tipo FROM tipo_usuario WHERE id = ? con ID: 3
2025-05-13 22:01:52 [main] INFO  bibliotecaudb.dao.usuario.impl.UsuarioDAOImpl - Ejecutando query: UPDATE usuarios SET contrasena = ? WHERE correo = ? para correo: alumno1@udb.com
2025-05-13 22:01:52 [main] INFO  bibliotecaudb.dao.usuario.impl.UsuarioDAOImpl - Contraseña actualizada para el correo alumno1@udb.com. Filas afectadas: 1
2025-05-13 22:01:52 [main] INFO  bibliotecaudb.dao.usuario.impl.UsuarioDAOImpl - Ejecutando query de login para correo: alumno1@udb.com
2025-05-13 22:01:52 [main] INFO  bibliotecaudb.dao.usuario.impl.UsuarioDAOImpl - Login exitoso para: alumno1@udb.com, Usuario: Alumno1, Tipo: Alumno
2025-05-13 22:01:52 [main] INFO  bibliotecaudb.dao.usuario.impl.UsuarioDAOImpl - Ejecutando query: UPDATE usuarios SET contrasena = ? WHERE correo = ? para correo: alumno1@udb.com
2025-05-13 22:01:52 [main] INFO  bibliotecaudb.dao.usuario.impl.UsuarioDAOImpl - Contraseña actualizada para el correo alumno1@udb.com. Filas afectadas: 1
2025-05-13 22:01:52 [main] INFO  bibliotecaudb.dao.usuario.impl.UsuarioDAOImpl - Ejecutando query: SELECT id, nombre, correo, contrasena, id_tipo_usuario, estado FROM usuarios ORDER BY nombre
2025-05-13 22:01:52 [main] INFO  bibliotecaudb.dao.usuario.impl.TipoUsuarioDAOImpl - Ejecutando query: SELECT id, tipo FROM tipo_usuario WHERE id = ? con ID: 1
2025-05-13 22:01:52 [main] INFO  bibliotecaudb.dao.usuario.impl.TipoUsuarioDAOImpl - Ejecutando query: SELECT id, tipo FROM tipo_usuario WHERE id = ? con ID: 3
2025-05-13 22:01:52 [main] INFO  bibliotecaudb.dao.usuario.impl.TipoUsuarioDAOImpl - Ejecutando query: SELECT id, tipo FROM tipo_usuario WHERE id = ? con ID: 2
2025-05-13 22:01:52 [main] INFO  bibliotecaudb.dao.usuario.impl.TipoUsuarioDAOImpl - Ejecutando query: SELECT id, tipo FROM tipo_usuario WHERE id = ? con ID: 2
2025-05-13 22:01:52 [main] INFO  bibliotecaudb.dao.usuario.impl.UsuarioDAOImpl - Ejecutando query: DELETE FROM usuarios WHERE id = ? para ID: 10
2025-05-13 22:01:52 [main] INFO  bibliotecaudb.dao.usuario.impl.UsuarioDAOImpl - Usuario eliminado. Filas afectadas: 1
2025-05-13 22:01:52 [main] INFO  bibliotecaudb.dao.usuario.impl.UsuarioDAOImpl - Ejecutando query: SELECT id, nombre, correo, contrasena, id_tipo_usuario, estado FROM usuarios WHERE id = ? para ID: 10
2025-05-13 22:04:59 [main] INFO  bibliotecaudb.pruebas.PruebasUsuarioService - === INICIO DE PRUEBAS DEL SERVICIO DE USUARIOS ===
2025-05-13 22:04:59 [main] INFO  bibliotecaudb.pruebas.PruebasUsuarioService - 
[Prueba 1: Autenticar Admin]
2025-05-13 22:04:59 [main] INFO  bibliotecaudb.conexion.ConexionBD - Configuracion de BD cargada.
2025-05-13 22:04:59 [main] INFO  bibliotecaudb.conexion.ConexionBD - Intentando conectar a BD: jdbc:mysql://localhost:3306/biblioteca
2025-05-13 22:05:00 [main] INFO  bibliotecaudb.conexion.ConexionBD - Conexion establecida exitosamente.
2025-05-13 22:05:00 [main] INFO  bibliotecaudb.dao.usuario.impl.UsuarioDAOImpl - Ejecutando query de login para correo: admin@udb.com
2025-05-13 22:05:00 [main] INFO  bibliotecaudb.dao.usuario.impl.UsuarioDAOImpl - Login exitoso para: admin@udb.com, Usuario: admin, Tipo: Administrador
2025-05-13 22:05:00 [main] INFO  bibliotecaudb.servicios.impl.UsuarioServiceImpl - Usuario autenticado: admin@udb.com, Tipo: Administrador
2025-05-13 22:05:00 [main] INFO  bibliotecaudb.pruebas.PruebasUsuarioService - Admin autenticado: admin, Tipo: Administrador
2025-05-13 22:05:00 [main] INFO  bibliotecaudb.pruebas.PruebasUsuarioService - 
[Prueba 2: Autenticar Usuario Inexistente]
2025-05-13 22:05:00 [main] INFO  bibliotecaudb.dao.usuario.impl.UsuarioDAOImpl - Ejecutando query de login para correo: noexiste@udb.com
2025-05-13 22:05:00 [main] WARN  bibliotecaudb.dao.usuario.impl.UsuarioDAOImpl - Login fallido para correo: noexiste@udb.com. Usuario no encontrado o contraseña incorrecta o usuario inactivo.
2025-05-13 22:05:00 [main] INFO  bibliotecaudb.pruebas.PruebasUsuarioService - ÉXITO: No se autenticó usuario inexistente: Correo o contraseña incorrectos, o usuario inactivo.
2025-05-13 22:05:00 [main] INFO  bibliotecaudb.pruebas.PruebasUsuarioService - 
[Prueba 3: Registrar Nuevo Usuario (por Admin)]
2025-05-13 22:05:00 [main] INFO  bibliotecaudb.dao.usuario.impl.TipoUsuarioDAOImpl - Ejecutando query: SELECT id, tipo FROM tipo_usuario WHERE id = ? con ID: 3
2025-05-13 22:05:00 [main] INFO  bibliotecaudb.dao.usuario.impl.UsuarioDAOImpl - Ejecutando query: SELECT id, nombre, correo, contrasena, id_tipo_usuario, estado FROM usuarios WHERE correo = ? para correo: testuser1747195500658@example.com
2025-05-13 22:05:00 [main] INFO  bibliotecaudb.servicios.impl.UsuarioServiceImpl - Registrando nuevo usuario: testuser1747195500658@example.com
2025-05-13 22:05:00 [main] INFO  bibliotecaudb.dao.usuario.impl.UsuarioDAOImpl - Ejecutando query: INSERT INTO usuarios (nombre, correo, contrasena, id_tipo_usuario, estado) VALUES (?, ?, ?, ?, ?)
2025-05-13 22:05:00 [main] INFO  bibliotecaudb.dao.usuario.impl.UsuarioDAOImpl - Usuario insertado con ID: 11. Filas afectadas: 1
2025-05-13 22:05:00 [main] INFO  bibliotecaudb.pruebas.PruebasUsuarioService - ÉXITO: Nuevo usuario registrado: testuser1747195500658@example.com con ID: 11
2025-05-13 22:05:00 [main] INFO  bibliotecaudb.pruebas.PruebasUsuarioService - 
[Prueba 3.1: Intentar Registrar Mismo Correo]
2025-05-13 22:05:00 [main] INFO  bibliotecaudb.dao.usuario.impl.TipoUsuarioDAOImpl - Ejecutando query: SELECT id, tipo FROM tipo_usuario WHERE id = ? con ID: 3
2025-05-13 22:05:00 [main] INFO  bibliotecaudb.dao.usuario.impl.UsuarioDAOImpl - Ejecutando query: SELECT id, nombre, correo, contrasena, id_tipo_usuario, estado FROM usuarios WHERE correo = ? para correo: testuser1747195500658@example.com
2025-05-13 22:05:00 [main] INFO  bibliotecaudb.dao.usuario.impl.TipoUsuarioDAOImpl - Ejecutando query: SELECT id, tipo FROM tipo_usuario WHERE id = ? con ID: 3
2025-05-13 22:05:00 [main] INFO  bibliotecaudb.pruebas.PruebasUsuarioService - ÉXITO: No se registró correo duplicado: El correo 'testuser1747195500658@example.com' ya está registrado.
2025-05-13 22:05:00 [main] INFO  bibliotecaudb.pruebas.PruebasUsuarioService - 
[Prueba 3.2: Cambiar Contraseña (por Admin)]
2025-05-13 22:05:00 [main] INFO  bibliotecaudb.dao.usuario.impl.UsuarioDAOImpl - Ejecutando query: SELECT id, nombre, correo, contrasena, id_tipo_usuario, estado FROM usuarios WHERE correo = ? para correo: testuser1747195500658@example.com
2025-05-13 22:05:00 [main] INFO  bibliotecaudb.dao.usuario.impl.TipoUsuarioDAOImpl - Ejecutando query: SELECT id, tipo FROM tipo_usuario WHERE id = ? con ID: 3
2025-05-13 22:05:00 [main] INFO  bibliotecaudb.servicios.impl.UsuarioServiceImpl - Cambiando contraseña para usuario: testuser1747195500658@example.com por actor: admin@udb.com
2025-05-13 22:05:00 [main] INFO  bibliotecaudb.dao.usuario.impl.UsuarioDAOImpl - Ejecutando query: UPDATE usuarios SET contrasena = ? WHERE correo = ? para correo: testuser1747195500658@example.com
2025-05-13 22:05:00 [main] INFO  bibliotecaudb.dao.usuario.impl.UsuarioDAOImpl - Contraseña actualizada para el correo testuser1747195500658@example.com. Filas afectadas: 1
2025-05-13 22:05:00 [main] INFO  bibliotecaudb.pruebas.PruebasUsuarioService - ÉXITO: Contraseña cambiada para testuser1747195500658@example.com
2025-05-13 22:05:00 [main] INFO  bibliotecaudb.dao.usuario.impl.UsuarioDAOImpl - Ejecutando query de login para correo: testuser1747195500658@example.com
2025-05-13 22:05:00 [main] INFO  bibliotecaudb.dao.usuario.impl.UsuarioDAOImpl - Login exitoso para: testuser1747195500658@example.com, Usuario: Usuario Prueba Servicio, Tipo: Alumno
2025-05-13 22:05:00 [main] INFO  bibliotecaudb.servicios.impl.UsuarioServiceImpl - Usuario autenticado: testuser1747195500658@example.com, Tipo: Alumno
2025-05-13 22:05:00 [main] INFO  bibliotecaudb.pruebas.PruebasUsuarioService - Autenticación con nueva contraseña exitosa para: Usuario Prueba Servicio
2025-05-13 22:05:00 [main] INFO  bibliotecaudb.pruebas.PruebasUsuarioService - 
[Prueba 4: Obtener Todos los Usuarios (por Admin)]
2025-05-13 22:05:00 [main] INFO  bibliotecaudb.dao.usuario.impl.UsuarioDAOImpl - Ejecutando query: SELECT id, nombre, correo, contrasena, id_tipo_usuario, estado FROM usuarios ORDER BY nombre
2025-05-13 22:05:00 [main] INFO  bibliotecaudb.dao.usuario.impl.TipoUsuarioDAOImpl - Ejecutando query: SELECT id, tipo FROM tipo_usuario WHERE id = ? con ID: 1
2025-05-13 22:05:00 [main] INFO  bibliotecaudb.dao.usuario.impl.TipoUsuarioDAOImpl - Ejecutando query: SELECT id, tipo FROM tipo_usuario WHERE id = ? con ID: 3
2025-05-13 22:05:00 [main] INFO  bibliotecaudb.dao.usuario.impl.TipoUsuarioDAOImpl - Ejecutando query: SELECT id, tipo FROM tipo_usuario WHERE id = ? con ID: 2
2025-05-13 22:05:00 [main] INFO  bibliotecaudb.dao.usuario.impl.TipoUsuarioDAOImpl - Ejecutando query: SELECT id, tipo FROM tipo_usuario WHERE id = ? con ID: 3
2025-05-13 22:05:00 [main] INFO  bibliotecaudb.pruebas.PruebasUsuarioService - Total de usuarios obtenidos: 4
2025-05-13 22:05:00 [main] INFO  bibliotecaudb.pruebas.PruebasUsuarioService - 
=== FIN DE PRUEBAS DEL SERVICIO DE USUARIOS ===
2025-05-13 22:07:11 [main] INFO  bibliotecaudb.pruebas.PruebasBibliotecaService - === INICIO DE PRUEBAS DEL SERVICIO DE BIBLIOTECA ===
2025-05-13 22:07:11 [main] INFO  bibliotecaudb.pruebas.PruebasBibliotecaService - 
--- Configuración: Autenticando Usuarios ---
2025-05-13 22:07:11 [main] INFO  bibliotecaudb.conexion.ConexionBD - Configuracion de BD cargada.
2025-05-13 22:07:11 [main] INFO  bibliotecaudb.conexion.ConexionBD - Intentando conectar a BD: jdbc:mysql://localhost:3306/biblioteca
2025-05-13 22:07:12 [main] INFO  bibliotecaudb.conexion.ConexionBD - Conexion establecida exitosamente.
2025-05-13 22:07:12 [main] INFO  bibliotecaudb.dao.usuario.impl.UsuarioDAOImpl - Ejecutando query de login para correo: admin@udb.com
2025-05-13 22:07:12 [main] INFO  bibliotecaudb.dao.usuario.impl.UsuarioDAOImpl - Login exitoso para: admin@udb.com, Usuario: admin, Tipo: Administrador
2025-05-13 22:07:12 [main] INFO  bibliotecaudb.servicios.impl.UsuarioServiceImpl - Usuario autenticado: admin@udb.com, Tipo: Administrador
2025-05-13 22:07:12 [main] INFO  bibliotecaudb.pruebas.PruebasBibliotecaService - Admin autenticado: admin
2025-05-13 22:07:12 [main] INFO  bibliotecaudb.dao.usuario.impl.UsuarioDAOImpl - Ejecutando query: SELECT id, nombre, correo, contrasena, id_tipo_usuario, estado FROM usuarios WHERE correo = ? para correo: alumno1@udb.com
2025-05-13 22:07:12 [main] INFO  bibliotecaudb.dao.usuario.impl.TipoUsuarioDAOImpl - Ejecutando query: SELECT id, tipo FROM tipo_usuario WHERE id = ? con ID: 3
2025-05-13 22:07:12 [main] INFO  bibliotecaudb.pruebas.PruebasBibliotecaService - Alumno de prueba ('alumno1@udb.com') obtenido: Alumno1
2025-05-13 22:07:12 [main] INFO  bibliotecaudb.pruebas.PruebasBibliotecaService - 
--- Pruebas de Catálogo ---
2025-05-13 22:07:12 [main] INFO  bibliotecaudb.dao.biblioteca.impl.DocumentoDAOImpl - Ejecutando query: INSERT INTO documentos (titulo, autor, editorial, anio_publicacion, id_tipo_documento) VALUES (?, ?, ?, ?, ?)
2025-05-13 22:07:12 [main] INFO  bibliotecaudb.dao.biblioteca.impl.DocumentoDAOImpl - Documento insertado con ID: 22
2025-05-13 22:07:12 [main] INFO  bibliotecaudb.dao.biblioteca.impl.EjemplarDAOImpl - Ejecutando query: INSERT INTO ejemplares (id_documento, ubicacion, estado) VALUES (?, ?, ?)
2025-05-13 22:07:12 [main] INFO  bibliotecaudb.dao.biblioteca.impl.EjemplarDAOImpl - Ejemplar insertado con ID: 34
2025-05-13 22:07:12 [main] INFO  bibliotecaudb.dao.biblioteca.impl.EjemplarDAOImpl - Ejecutando query: INSERT INTO ejemplares (id_documento, ubicacion, estado) VALUES (?, ?, ?)
2025-05-13 22:07:12 [main] INFO  bibliotecaudb.dao.biblioteca.impl.EjemplarDAOImpl - Ejemplar insertado con ID: 35
2025-05-13 22:07:12 [main] INFO  bibliotecaudb.servicios.impl.BibliotecaServiceImpl - Documento y 2 ejemplares registrados exitosamente.
2025-05-13 22:07:12 [main] INFO  bibliotecaudb.pruebas.PruebasBibliotecaService - ÉXITO: Documento y ejemplares registrados. ID Documento: 22
2025-05-13 22:07:12 [main] INFO  bibliotecaudb.pruebas.PruebasBibliotecaService - ID del primer ejemplar para prestar: 34
2025-05-13 22:07:12 [main] INFO  bibliotecaudb.pruebas.PruebasBibliotecaService - 
[Prueba Catálogo 2: Buscar Documentos ('Java Service')]
2025-05-13 22:07:12 [main] INFO  bibliotecaudb.dao.biblioteca.impl.DocumentoDAOImpl - Ejecutando búsqueda general de documentos con término: Java Service
2025-05-13 22:07:12 [main] INFO  bibliotecaudb.dao.biblioteca.impl.TipoDocumentoDAOImpl - Ejecutando query: SELECT id, tipo FROM tipo_documento WHERE id = ? con ID: 1
2025-05-13 22:07:12 [main] INFO  bibliotecaudb.dao.biblioteca.impl.TipoDocumentoDAOImpl - Ejecutando query: SELECT id, tipo FROM tipo_documento WHERE id = ? con ID: 1
2025-05-13 22:07:12 [main] INFO  bibliotecaudb.pruebas.PruebasBibliotecaService - Documentos encontrados: 2
2025-05-13 22:07:12 [main] INFO  bibliotecaudb.pruebas.PruebasBibliotecaService - 
--- Pruebas de Préstamos (Usuario: Alumno1, Ejemplar ID: 34) ---
2025-05-13 22:07:12 [main] INFO  bibliotecaudb.pruebas.PruebasBibliotecaService - 
[Prueba Préstamo 3: Realizar Préstamo Exitoso]
2025-05-13 22:07:12 [main] INFO  bibliotecaudb.dao.usuario.impl.UsuarioDAOImpl - Ejecutando query: SELECT id, nombre, correo, contrasena, id_tipo_usuario, estado FROM usuarios WHERE id = ? para ID: 3
2025-05-13 22:07:12 [main] INFO  bibliotecaudb.dao.usuario.impl.TipoUsuarioDAOImpl - Ejecutando query: SELECT id, tipo FROM tipo_usuario WHERE id = ? con ID: 3
2025-05-13 22:07:12 [main] INFO  bibliotecaudb.dao.biblioteca.impl.EjemplarDAOImpl - Ejecutando query: SELECT id, id_documento, ubicacion, estado FROM ejemplares WHERE id = ? con ID: 34
2025-05-13 22:07:12 [main] INFO  bibliotecaudb.dao.biblioteca.impl.DocumentoDAOImpl - Ejecutando query: SELECT id, titulo, autor, editorial, anio_publicacion, id_tipo_documento FROM documentos WHERE id = ? con ID: 22
2025-05-13 22:07:12 [main] INFO  bibliotecaudb.dao.biblioteca.impl.TipoDocumentoDAOImpl - Ejecutando query: SELECT id, tipo FROM tipo_documento WHERE id = ? con ID: 1
2025-05-13 22:07:12 [main] INFO  bibliotecaudb.dao.biblioteca.impl.PrestamoDAOImpl - Ejecutando query: SELECT id, id_usuario, id_ejemplar, fecha_prestamo, fecha_devolucion, fecha_limite, mora FROM prestamos WHERE id_usuario = ? AND fecha_devolucion IS NULL AND fecha_limite < CURDATE() con parámetro: 3
2025-05-13 22:07:12 [main] INFO  bibliotecaudb.dao.biblioteca.impl.PoliticasPrestamosDAOImpl - Ejecutando query: SELECT id_politica, id_tipo_usuario, max_ejemplares_prestamo, dias_prestamo_default FROM politicas_prestamo WHERE id_tipo_usuario = ? con idTipoUsuario: 3
2025-05-13 22:07:12 [main] INFO  bibliotecaudb.dao.usuario.impl.TipoUsuarioDAOImpl - Ejecutando query: SELECT id, tipo FROM tipo_usuario WHERE id = ? con ID: 3
2025-05-13 22:07:12 [main] INFO  bibliotecaudb.dao.biblioteca.impl.PrestamoDAOImpl - Ejecutando query: SELECT COUNT(*) FROM prestamos WHERE id_usuario = ? AND fecha_devolucion IS NULL para idUsuario: 3
2025-05-13 22:07:12 [main] INFO  bibliotecaudb.dao.biblioteca.impl.PrestamoDAOImpl - Ejecutando query: INSERT INTO prestamos (id_usuario, id_ejemplar, fecha_prestamo, fecha_limite, mora) VALUES (?, ?, ?, ?, ?)
2025-05-13 22:07:12 [main] INFO  bibliotecaudb.dao.biblioteca.impl.PrestamoDAOImpl - Préstamo insertado con ID: 17
2025-05-13 22:07:12 [main] INFO  bibliotecaudb.servicios.impl.BibliotecaServiceImpl - Préstamo realizado exitosamente ID: 17 para usuario ID: 3, ejemplar ID: 34
2025-05-13 22:07:12 [main] INFO  bibliotecaudb.dao.biblioteca.impl.PrestamoDAOImpl - Ejecutando query: SELECT id, id_usuario, id_ejemplar, fecha_prestamo, fecha_devolucion, fecha_limite, mora FROM prestamos WHERE id = ? con ID: 17
2025-05-13 22:07:12 [main] INFO  bibliotecaudb.dao.usuario.impl.UsuarioDAOImpl - Ejecutando query: SELECT id, nombre, correo, contrasena, id_tipo_usuario, estado FROM usuarios WHERE id = ? para ID: 3
2025-05-13 22:07:12 [main] INFO  bibliotecaudb.dao.usuario.impl.TipoUsuarioDAOImpl - Ejecutando query: SELECT id, tipo FROM tipo_usuario WHERE id = ? con ID: 3
2025-05-13 22:07:12 [main] INFO  bibliotecaudb.dao.biblioteca.impl.EjemplarDAOImpl - Ejecutando query: SELECT id, id_documento, ubicacion, estado FROM ejemplares WHERE id = ? con ID: 34
2025-05-13 22:07:12 [main] INFO  bibliotecaudb.dao.biblioteca.impl.DocumentoDAOImpl - Ejecutando query: SELECT id, titulo, autor, editorial, anio_publicacion, id_tipo_documento FROM documentos WHERE id = ? con ID: 22
2025-05-13 22:07:12 [main] INFO  bibliotecaudb.dao.biblioteca.impl.TipoDocumentoDAOImpl - Ejecutando query: SELECT id, tipo FROM tipo_documento WHERE id = ? con ID: 1
2025-05-13 22:07:12 [main] INFO  bibliotecaudb.pruebas.PruebasBibliotecaService - ÉXITO: Préstamo realizado. ID: 17, Límite: 2025-05-20
2025-05-13 22:07:12 [main] INFO  bibliotecaudb.pruebas.PruebasBibliotecaService - 
[Prueba Préstamo 4: Intentar Prestar Mismo Ejemplar de Nuevo]
2025-05-13 22:07:12 [main] INFO  bibliotecaudb.dao.usuario.impl.UsuarioDAOImpl - Ejecutando query: SELECT id, nombre, correo, contrasena, id_tipo_usuario, estado FROM usuarios WHERE id = ? para ID: 3
2025-05-13 22:07:12 [main] INFO  bibliotecaudb.dao.usuario.impl.TipoUsuarioDAOImpl - Ejecutando query: SELECT id, tipo FROM tipo_usuario WHERE id = ? con ID: 3
2025-05-13 22:07:12 [main] INFO  bibliotecaudb.dao.biblioteca.impl.EjemplarDAOImpl - Ejecutando query: SELECT id, id_documento, ubicacion, estado FROM ejemplares WHERE id = ? con ID: 34
2025-05-13 22:07:12 [main] INFO  bibliotecaudb.dao.biblioteca.impl.DocumentoDAOImpl - Ejecutando query: SELECT id, titulo, autor, editorial, anio_publicacion, id_tipo_documento FROM documentos WHERE id = ? con ID: 22
2025-05-13 22:07:12 [main] INFO  bibliotecaudb.dao.biblioteca.impl.TipoDocumentoDAOImpl - Ejecutando query: SELECT id, tipo FROM tipo_documento WHERE id = ? con ID: 1
2025-05-13 22:07:12 [main] ERROR bibliotecaudb.servicios.impl.BibliotecaServiceImpl - Rollback realizado (préstamo).
bibliotecaudb.excepciones.BibliotecaException: El ejemplar 'Aventuras en Java Service' (ID: 34) no está disponible.
	at bibliotecaudb.servicios.impl.BibliotecaServiceImpl.realizarPrestamo(BibliotecaServiceImpl.java:167)
	at bibliotecaudb.pruebas.PruebasBibliotecaService.main(PruebasBibliotecaService.java:140)
2025-05-13 22:07:12 [main] INFO  bibliotecaudb.pruebas.PruebasBibliotecaService - ÉXITO: No se pudo prestar ejemplar no disponible: El ejemplar 'Aventuras en Java Service' (ID: 34) no está disponible.
2025-05-13 22:07:12 [main] INFO  bibliotecaudb.pruebas.PruebasBibliotecaService - 
--- Pruebas de Devoluciones (Préstamo ID: 17) ---
2025-05-13 22:07:12 [main] INFO  bibliotecaudb.pruebas.PruebasBibliotecaService - 
[Prueba Devolución 5: Registrar Devolución con Mora Simulada]
2025-05-13 22:07:12 [main] INFO  bibliotecaudb.dao.biblioteca.impl.PrestamoDAOImpl - Ejecutando query: SELECT id, id_usuario, id_ejemplar, fecha_prestamo, fecha_devolucion, fecha_limite, mora FROM prestamos WHERE id = ? con ID: 17
2025-05-13 22:07:12 [main] INFO  bibliotecaudb.dao.usuario.impl.UsuarioDAOImpl - Ejecutando query: SELECT id, nombre, correo, contrasena, id_tipo_usuario, estado FROM usuarios WHERE id = ? para ID: 3
2025-05-13 22:07:12 [main] INFO  bibliotecaudb.dao.usuario.impl.TipoUsuarioDAOImpl - Ejecutando query: SELECT id, tipo FROM tipo_usuario WHERE id = ? con ID: 3
2025-05-13 22:07:12 [main] INFO  bibliotecaudb.dao.biblioteca.impl.EjemplarDAOImpl - Ejecutando query: SELECT id, id_documento, ubicacion, estado FROM ejemplares WHERE id = ? con ID: 34
2025-05-13 22:07:12 [main] INFO  bibliotecaudb.dao.biblioteca.impl.DocumentoDAOImpl - Ejecutando query: SELECT id, titulo, autor, editorial, anio_publicacion, id_tipo_documento FROM documentos WHERE id = ? con ID: 22
2025-05-13 22:07:12 [main] INFO  bibliotecaudb.dao.biblioteca.impl.TipoDocumentoDAOImpl - Ejecutando query: SELECT id, tipo FROM tipo_documento WHERE id = ? con ID: 1
2025-05-13 22:07:12 [main] INFO  bibliotecaudb.dao.biblioteca.impl.PrestamoDAOImpl - Ejecutando query: SELECT id, id_usuario, id_ejemplar, fecha_prestamo, fecha_devolucion, fecha_limite, mora FROM prestamos WHERE id = ? con ID: 17
2025-05-13 22:07:12 [main] INFO  bibliotecaudb.dao.usuario.impl.UsuarioDAOImpl - Ejecutando query: SELECT id, nombre, correo, contrasena, id_tipo_usuario, estado FROM usuarios WHERE id = ? para ID: 3
2025-05-13 22:07:12 [main] INFO  bibliotecaudb.dao.usuario.impl.TipoUsuarioDAOImpl - Ejecutando query: SELECT id, tipo FROM tipo_usuario WHERE id = ? con ID: 3
2025-05-13 22:07:12 [main] INFO  bibliotecaudb.dao.biblioteca.impl.EjemplarDAOImpl - Ejecutando query: SELECT id, id_documento, ubicacion, estado FROM ejemplares WHERE id = ? con ID: 34
2025-05-13 22:07:12 [main] INFO  bibliotecaudb.dao.biblioteca.impl.DocumentoDAOImpl - Ejecutando query: SELECT id, titulo, autor, editorial, anio_publicacion, id_tipo_documento FROM documentos WHERE id = ? con ID: 22
2025-05-13 22:07:12 [main] INFO  bibliotecaudb.dao.biblioteca.impl.TipoDocumentoDAOImpl - Ejecutando query: SELECT id, tipo FROM tipo_documento WHERE id = ? con ID: 1
2025-05-13 22:07:12 [main] INFO  bibliotecaudb.dao.biblioteca.impl.MoraAnualDAOImpl - Ejecutando query: SELECT anio, mora_diaria FROM mora_anual WHERE anio = ? para año: 2025
2025-05-13 22:07:12 [main] INFO  bibliotecaudb.servicios.impl.BibliotecaServiceImpl - Mora calculada para préstamo ID 17: 1.50
2025-05-13 22:07:12 [main] INFO  bibliotecaudb.dao.biblioteca.impl.PrestamoDAOImpl - Registrando devolución en tabla prestamos para ID: 17
2025-05-13 22:07:12 [main] INFO  bibliotecaudb.dao.biblioteca.impl.PrestamoDAOImpl - Devolución registrada en préstamo. Filas afectadas: 1
2025-05-13 22:07:12 [main] INFO  bibliotecaudb.dao.biblioteca.impl.DevolucionDAOImpl - Ejecutando query: INSERT INTO devoluciones (id_prestamo, fecha_devolucion, mora_pagada) VALUES (?, ?, ?)
2025-05-13 22:07:12 [main] INFO  bibliotecaudb.dao.biblioteca.impl.DevolucionDAOImpl - Devolución insertada con ID: 9
2025-05-13 22:07:12 [main] INFO  bibliotecaudb.servicios.impl.BibliotecaServiceImpl - Devolución registrada exitosamente ID: 9 para préstamo ID: 17
2025-05-13 22:07:12 [main] INFO  bibliotecaudb.dao.biblioteca.impl.DevolucionDAOImpl - Ejecutando query: SELECT id, id_prestamo, fecha_devolucion, mora_pagada FROM devoluciones WHERE id = ? con ID: 9
2025-05-13 22:07:12 [main] INFO  bibliotecaudb.dao.biblioteca.impl.PrestamoDAOImpl - Ejecutando query: SELECT id, id_usuario, id_ejemplar, fecha_prestamo, fecha_devolucion, fecha_limite, mora FROM prestamos WHERE id = ? con ID: 17
2025-05-13 22:07:12 [main] INFO  bibliotecaudb.dao.usuario.impl.UsuarioDAOImpl - Ejecutando query: SELECT id, nombre, correo, contrasena, id_tipo_usuario, estado FROM usuarios WHERE id = ? para ID: 3
2025-05-13 22:07:12 [main] INFO  bibliotecaudb.dao.usuario.impl.TipoUsuarioDAOImpl - Ejecutando query: SELECT id, tipo FROM tipo_usuario WHERE id = ? con ID: 3
2025-05-13 22:07:12 [main] INFO  bibliotecaudb.dao.biblioteca.impl.EjemplarDAOImpl - Ejecutando query: SELECT id, id_documento, ubicacion, estado FROM ejemplares WHERE id = ? con ID: 34
2025-05-13 22:07:12 [main] INFO  bibliotecaudb.dao.biblioteca.impl.DocumentoDAOImpl - Ejecutando query: SELECT id, titulo, autor, editorial, anio_publicacion, id_tipo_documento FROM documentos WHERE id = ? con ID: 22
2025-05-13 22:07:12 [main] INFO  bibliotecaudb.dao.biblioteca.impl.TipoDocumentoDAOImpl - Ejecutando query: SELECT id, tipo FROM tipo_documento WHERE id = ? con ID: 1
2025-05-13 22:07:12 [main] INFO  bibliotecaudb.pruebas.PruebasBibliotecaService - ÉXITO: Devolución registrada. ID: 9, Mora Pagada: 1.50
2025-05-13 22:07:12 [main] INFO  bibliotecaudb.dao.biblioteca.impl.EjemplarDAOImpl - Ejecutando query: SELECT id, id_documento, ubicacion, estado FROM ejemplares WHERE id = ? con ID: 34
2025-05-13 22:07:12 [main] INFO  bibliotecaudb.dao.biblioteca.impl.DocumentoDAOImpl - Ejecutando query: SELECT id, titulo, autor, editorial, anio_publicacion, id_tipo_documento FROM documentos WHERE id = ? con ID: 22
2025-05-13 22:07:12 [main] INFO  bibliotecaudb.dao.biblioteca.impl.TipoDocumentoDAOImpl - Ejecutando query: SELECT id, tipo FROM tipo_documento WHERE id = ? con ID: 1
2025-05-13 22:07:12 [main] INFO  bibliotecaudb.pruebas.PruebasBibliotecaService - Verificación: Ejemplar ID 34 está ahora DISPONIBLE.
2025-05-13 22:07:12 [main] INFO  bibliotecaudb.pruebas.PruebasBibliotecaService - 
--- Pruebas de Configuración (Admin) ---
2025-05-13 22:07:12 [main] INFO  bibliotecaudb.pruebas.PruebasBibliotecaService - 
[Prueba Config 6: Actualizar Política Alumnos]
2025-05-13 22:07:12 [main] INFO  bibliotecaudb.dao.biblioteca.impl.PoliticasPrestamosDAOImpl - Ejecutando query: SELECT id_politica, id_tipo_usuario, max_ejemplares_prestamo, dias_prestamo_default FROM politicas_prestamo ORDER BY id_tipo_usuario
2025-05-13 22:07:12 [main] INFO  bibliotecaudb.dao.usuario.impl.TipoUsuarioDAOImpl - Ejecutando query: SELECT id, tipo FROM tipo_usuario WHERE id = ? con ID: 1
2025-05-13 22:07:12 [main] INFO  bibliotecaudb.dao.usuario.impl.TipoUsuarioDAOImpl - Ejecutando query: SELECT id, tipo FROM tipo_usuario WHERE id = ? con ID: 2
2025-05-13 22:07:12 [main] INFO  bibliotecaudb.dao.usuario.impl.TipoUsuarioDAOImpl - Ejecutando query: SELECT id, tipo FROM tipo_usuario WHERE id = ? con ID: 3
2025-05-13 22:07:12 [main] INFO  bibliotecaudb.dao.biblioteca.impl.PoliticasPrestamosDAOImpl - Actualizando política para tipo_usuario ID: 3
2025-05-13 22:07:12 [main] INFO  bibliotecaudb.dao.biblioteca.impl.PoliticasPrestamosDAOImpl - Política de préstamo actualizada. Filas afectadas: 1
2025-05-13 22:07:12 [main] INFO  bibliotecaudb.dao.biblioteca.impl.PoliticasPrestamosDAOImpl - Ejecutando query: SELECT id_politica, id_tipo_usuario, max_ejemplares_prestamo, dias_prestamo_default FROM politicas_prestamo ORDER BY id_tipo_usuario
2025-05-13 22:07:12 [main] INFO  bibliotecaudb.dao.usuario.impl.TipoUsuarioDAOImpl - Ejecutando query: SELECT id, tipo FROM tipo_usuario WHERE id = ? con ID: 1
2025-05-13 22:07:12 [main] INFO  bibliotecaudb.dao.usuario.impl.TipoUsuarioDAOImpl - Ejecutando query: SELECT id, tipo FROM tipo_usuario WHERE id = ? con ID: 2
2025-05-13 22:07:12 [main] INFO  bibliotecaudb.dao.usuario.impl.TipoUsuarioDAOImpl - Ejecutando query: SELECT id, tipo FROM tipo_usuario WHERE id = ? con ID: 3
2025-05-13 22:07:12 [main] INFO  bibliotecaudb.pruebas.PruebasBibliotecaService - ÉXITO: Política de alumnos actualizada. Nuevo max: 4
2025-05-13 22:07:12 [main] INFO  bibliotecaudb.dao.biblioteca.impl.PoliticasPrestamosDAOImpl - Actualizando política para tipo_usuario ID: 3
2025-05-13 22:07:12 [main] INFO  bibliotecaudb.dao.biblioteca.impl.PoliticasPrestamosDAOImpl - Política de préstamo actualizada. Filas afectadas: 1
2025-05-13 22:07:12 [main] INFO  bibliotecaudb.pruebas.PruebasBibliotecaService - 
=== FIN DE PRUEBAS DEL SERVICIO DE BIBLIOTECA ===
2025-05-14 08:31:33 [main] INFO  bibliotecaudb.pruebas.PruebasBibliotecaService - === INICIO DE PRUEBAS DEL SERVICIO DE BIBLIOTECA ===
2025-05-14 08:31:33 [main] INFO  bibliotecaudb.pruebas.PruebasBibliotecaService - 
--- Configuración: Autenticando Usuarios ---
2025-05-14 08:31:33 [main] INFO  bibliotecaudb.conexion.ConexionBD - Configuracion de BD cargada.
2025-05-14 08:31:33 [main] INFO  bibliotecaudb.conexion.ConexionBD - Intentando conectar a BD: jdbc:mysql://localhost:3306/biblioteca
2025-05-14 08:31:34 [main] INFO  bibliotecaudb.conexion.ConexionBD - Conexion establecida exitosamente.
2025-05-14 08:31:34 [main] INFO  bibliotecaudb.dao.usuario.impl.UsuarioDAOImpl - Ejecutando query de login para correo: admin@udb.com
2025-05-14 08:31:34 [main] INFO  bibliotecaudb.dao.usuario.impl.UsuarioDAOImpl - Login exitoso para: admin@udb.com, Usuario: admin, Tipo: Administrador
2025-05-14 08:31:34 [main] INFO  bibliotecaudb.servicios.impl.UsuarioServiceImpl - Usuario autenticado: admin@udb.com, Tipo: Administrador
2025-05-14 08:31:34 [main] INFO  bibliotecaudb.pruebas.PruebasBibliotecaService - Admin autenticado: admin
2025-05-14 08:31:34 [main] INFO  bibliotecaudb.dao.usuario.impl.UsuarioDAOImpl - Ejecutando query: SELECT id, nombre, correo, contrasena, id_tipo_usuario, estado FROM usuarios WHERE correo = ? para correo: alumno1@udb.com
2025-05-14 08:31:34 [main] INFO  bibliotecaudb.dao.usuario.impl.TipoUsuarioDAOImpl - Ejecutando query: SELECT id, tipo FROM tipo_usuario WHERE id = ? con ID: 3
2025-05-14 08:31:34 [main] INFO  bibliotecaudb.pruebas.PruebasBibliotecaService - Alumno de prueba ('alumno1@udb.com') obtenido: Alumno1
2025-05-14 08:31:34 [main] INFO  bibliotecaudb.pruebas.PruebasBibliotecaService - 
--- Pruebas de Catálogo ---
2025-05-14 08:31:34 [main] INFO  bibliotecaudb.dao.biblioteca.impl.DocumentoDAOImpl - Ejecutando query: INSERT INTO documentos (titulo, autor, editorial, anio_publicacion, id_tipo_documento) VALUES (?, ?, ?, ?, ?)
2025-05-14 08:31:34 [main] INFO  bibliotecaudb.dao.biblioteca.impl.DocumentoDAOImpl - Documento insertado con ID: 23
2025-05-14 08:31:34 [main] INFO  bibliotecaudb.dao.biblioteca.impl.EjemplarDAOImpl - Ejecutando query: INSERT INTO ejemplares (id_documento, ubicacion, estado) VALUES (?, ?, ?)
2025-05-14 08:31:34 [main] INFO  bibliotecaudb.dao.biblioteca.impl.EjemplarDAOImpl - Ejemplar insertado con ID: 36
2025-05-14 08:31:34 [main] INFO  bibliotecaudb.dao.biblioteca.impl.EjemplarDAOImpl - Ejecutando query: INSERT INTO ejemplares (id_documento, ubicacion, estado) VALUES (?, ?, ?)
2025-05-14 08:31:34 [main] INFO  bibliotecaudb.dao.biblioteca.impl.EjemplarDAOImpl - Ejemplar insertado con ID: 37
2025-05-14 08:31:34 [main] INFO  bibliotecaudb.servicios.impl.BibliotecaServiceImpl - Documento y 2 ejemplares registrados exitosamente. ID Documento: 23
2025-05-14 08:31:34 [main] INFO  bibliotecaudb.pruebas.PruebasBibliotecaService - ÉXITO: Documento y ejemplares registrados. ID Documento: 23
2025-05-14 08:31:34 [main] INFO  bibliotecaudb.pruebas.PruebasBibliotecaService - ID del primer ejemplar para prestar: 36
2025-05-14 08:31:34 [main] INFO  bibliotecaudb.pruebas.PruebasBibliotecaService - 
[Prueba Catálogo 2: Buscar Documentos ('Java Service')]
2025-05-14 08:31:34 [main] INFO  bibliotecaudb.dao.biblioteca.impl.DocumentoDAOImpl - Ejecutando busqueda general de documentos con termino: Java Service
2025-05-14 08:31:34 [main] INFO  bibliotecaudb.dao.biblioteca.impl.TipoDocumentoDAOImpl - Ejecutando query: SELECT id, tipo FROM tipo_documento WHERE id = ? con ID: 1
2025-05-14 08:31:34 [main] INFO  bibliotecaudb.dao.biblioteca.impl.TipoDocumentoDAOImpl - Ejecutando query: SELECT id, tipo FROM tipo_documento WHERE id = ? con ID: 1
2025-05-14 08:31:34 [main] INFO  bibliotecaudb.dao.biblioteca.impl.TipoDocumentoDAOImpl - Ejecutando query: SELECT id, tipo FROM tipo_documento WHERE id = ? con ID: 1
2025-05-14 08:31:34 [main] INFO  bibliotecaudb.pruebas.PruebasBibliotecaService - Documentos encontrados: 3
2025-05-14 08:31:34 [main] INFO  bibliotecaudb.pruebas.PruebasBibliotecaService - 
--- Pruebas de Préstamos (Usuario: Alumno1, Ejemplar ID: 36) ---
2025-05-14 08:31:34 [main] INFO  bibliotecaudb.pruebas.PruebasBibliotecaService - 
[Prueba Préstamo 3: Realizar Préstamo Exitoso]
2025-05-14 08:31:34 [main] INFO  bibliotecaudb.dao.usuario.impl.UsuarioDAOImpl - Ejecutando query: SELECT id, nombre, correo, contrasena, id_tipo_usuario, estado FROM usuarios WHERE id = ? para ID: 3
2025-05-14 08:31:34 [main] INFO  bibliotecaudb.dao.usuario.impl.TipoUsuarioDAOImpl - Ejecutando query: SELECT id, tipo FROM tipo_usuario WHERE id = ? con ID: 3
2025-05-14 08:31:34 [main] INFO  bibliotecaudb.dao.biblioteca.impl.EjemplarDAOImpl - Ejecutando query: SELECT id, id_documento, ubicacion, estado FROM ejemplares WHERE id = ? con ID: 36
2025-05-14 08:31:34 [main] INFO  bibliotecaudb.dao.biblioteca.impl.DocumentoDAOImpl - Ejecutando query: SELECT id, titulo, autor, editorial, anio_publicacion, id_tipo_documento FROM documentos WHERE id = ? con ID: 23
2025-05-14 08:31:34 [main] INFO  bibliotecaudb.dao.biblioteca.impl.TipoDocumentoDAOImpl - Ejecutando query: SELECT id, tipo FROM tipo_documento WHERE id = ? con ID: 1
2025-05-14 08:31:34 [main] INFO  bibliotecaudb.dao.biblioteca.impl.PrestamoDAOImpl - Ejecutando query: SELECT id, id_usuario, id_ejemplar, fecha_prestamo, fecha_devolucion, fecha_limite, mora FROM prestamos WHERE id_usuario = ? AND fecha_devolucion IS NULL AND fecha_limite < CURDATE() con parámetro: 3
2025-05-14 08:31:34 [main] INFO  bibliotecaudb.dao.biblioteca.impl.PoliticasPrestamosDAOImpl - Ejecutando query: SELECT id_politica, id_tipo_usuario, max_ejemplares_prestamo, dias_prestamo_default FROM politicas_prestamo WHERE id_tipo_usuario = ? con idTipoUsuario: 3
2025-05-14 08:31:34 [main] INFO  bibliotecaudb.dao.usuario.impl.TipoUsuarioDAOImpl - Ejecutando query: SELECT id, tipo FROM tipo_usuario WHERE id = ? con ID: 3
2025-05-14 08:31:34 [main] INFO  bibliotecaudb.dao.biblioteca.impl.PrestamoDAOImpl - Ejecutando query: SELECT COUNT(*) FROM prestamos WHERE id_usuario = ? AND fecha_devolucion IS NULL para idUsuario: 3
2025-05-14 08:31:34 [main] INFO  bibliotecaudb.dao.biblioteca.impl.PrestamoDAOImpl - Ejecutando query: INSERT INTO prestamos (id_usuario, id_ejemplar, fecha_prestamo, fecha_limite, mora) VALUES (?, ?, ?, ?, ?)
2025-05-14 08:31:34 [main] INFO  bibliotecaudb.dao.biblioteca.impl.PrestamoDAOImpl - Préstamo insertado con ID: 18
2025-05-14 08:31:34 [main] INFO  bibliotecaudb.servicios.impl.BibliotecaServiceImpl - Préstamo realizado exitosamente ID: 18 para usuario ID: 3, ejemplar ID: 36
2025-05-14 08:31:34 [main] INFO  bibliotecaudb.dao.biblioteca.impl.PrestamoDAOImpl - Ejecutando query: SELECT id, id_usuario, id_ejemplar, fecha_prestamo, fecha_devolucion, fecha_limite, mora FROM prestamos WHERE id = ? con ID: 18
2025-05-14 08:31:34 [main] INFO  bibliotecaudb.dao.usuario.impl.UsuarioDAOImpl - Ejecutando query: SELECT id, nombre, correo, contrasena, id_tipo_usuario, estado FROM usuarios WHERE id = ? para ID: 3
2025-05-14 08:31:34 [main] INFO  bibliotecaudb.dao.usuario.impl.TipoUsuarioDAOImpl - Ejecutando query: SELECT id, tipo FROM tipo_usuario WHERE id = ? con ID: 3
2025-05-14 08:31:34 [main] INFO  bibliotecaudb.dao.biblioteca.impl.EjemplarDAOImpl - Ejecutando query: SELECT id, id_documento, ubicacion, estado FROM ejemplares WHERE id = ? con ID: 36
2025-05-14 08:31:34 [main] INFO  bibliotecaudb.dao.biblioteca.impl.DocumentoDAOImpl - Ejecutando query: SELECT id, titulo, autor, editorial, anio_publicacion, id_tipo_documento FROM documentos WHERE id = ? con ID: 23
2025-05-14 08:31:34 [main] INFO  bibliotecaudb.dao.biblioteca.impl.TipoDocumentoDAOImpl - Ejecutando query: SELECT id, tipo FROM tipo_documento WHERE id = ? con ID: 1
2025-05-14 08:31:34 [main] INFO  bibliotecaudb.pruebas.PruebasBibliotecaService - ÉXITO: Préstamo realizado. ID: 18, Límite: 2025-05-21
2025-05-14 08:31:34 [main] INFO  bibliotecaudb.pruebas.PruebasBibliotecaService - 
[Prueba Préstamo 4: Intentar Prestar Mismo Ejemplar de Nuevo]
2025-05-14 08:31:34 [main] INFO  bibliotecaudb.dao.usuario.impl.UsuarioDAOImpl - Ejecutando query: SELECT id, nombre, correo, contrasena, id_tipo_usuario, estado FROM usuarios WHERE id = ? para ID: 3
2025-05-14 08:31:34 [main] INFO  bibliotecaudb.dao.usuario.impl.TipoUsuarioDAOImpl - Ejecutando query: SELECT id, tipo FROM tipo_usuario WHERE id = ? con ID: 3
2025-05-14 08:31:34 [main] INFO  bibliotecaudb.dao.biblioteca.impl.EjemplarDAOImpl - Ejecutando query: SELECT id, id_documento, ubicacion, estado FROM ejemplares WHERE id = ? con ID: 36
2025-05-14 08:31:34 [main] INFO  bibliotecaudb.dao.biblioteca.impl.DocumentoDAOImpl - Ejecutando query: SELECT id, titulo, autor, editorial, anio_publicacion, id_tipo_documento FROM documentos WHERE id = ? con ID: 23
2025-05-14 08:31:34 [main] INFO  bibliotecaudb.dao.biblioteca.impl.TipoDocumentoDAOImpl - Ejecutando query: SELECT id, tipo FROM tipo_documento WHERE id = ? con ID: 1
2025-05-14 08:31:34 [main] ERROR bibliotecaudb.servicios.impl.BibliotecaServiceImpl - Rollback realizado (préstamo).
bibliotecaudb.excepciones.BibliotecaException: El ejemplar 'Aventuras en Java Service' (ID: 36) no está disponible.
	at bibliotecaudb.servicios.impl.BibliotecaServiceImpl.realizarPrestamo(BibliotecaServiceImpl.java:192)
	at bibliotecaudb.pruebas.PruebasBibliotecaService.main(PruebasBibliotecaService.java:140)
2025-05-14 08:31:34 [main] INFO  bibliotecaudb.pruebas.PruebasBibliotecaService - ÉXITO: No se pudo prestar ejemplar no disponible: El ejemplar 'Aventuras en Java Service' (ID: 36) no está disponible.
2025-05-14 08:31:34 [main] INFO  bibliotecaudb.pruebas.PruebasBibliotecaService - 
--- Pruebas de Devoluciones (Préstamo ID: 18) ---
2025-05-14 08:31:34 [main] INFO  bibliotecaudb.pruebas.PruebasBibliotecaService - 
[Prueba Devolución 5: Registrar Devolución con Mora Simulada]
2025-05-14 08:31:34 [main] INFO  bibliotecaudb.dao.biblioteca.impl.PrestamoDAOImpl - Ejecutando query: SELECT id, id_usuario, id_ejemplar, fecha_prestamo, fecha_devolucion, fecha_limite, mora FROM prestamos WHERE id = ? con ID: 18
2025-05-14 08:31:34 [main] INFO  bibliotecaudb.dao.usuario.impl.UsuarioDAOImpl - Ejecutando query: SELECT id, nombre, correo, contrasena, id_tipo_usuario, estado FROM usuarios WHERE id = ? para ID: 3
2025-05-14 08:31:34 [main] INFO  bibliotecaudb.dao.usuario.impl.TipoUsuarioDAOImpl - Ejecutando query: SELECT id, tipo FROM tipo_usuario WHERE id = ? con ID: 3
2025-05-14 08:31:34 [main] INFO  bibliotecaudb.dao.biblioteca.impl.EjemplarDAOImpl - Ejecutando query: SELECT id, id_documento, ubicacion, estado FROM ejemplares WHERE id = ? con ID: 36
2025-05-14 08:31:34 [main] INFO  bibliotecaudb.dao.biblioteca.impl.DocumentoDAOImpl - Ejecutando query: SELECT id, titulo, autor, editorial, anio_publicacion, id_tipo_documento FROM documentos WHERE id = ? con ID: 23
2025-05-14 08:31:34 [main] INFO  bibliotecaudb.dao.biblioteca.impl.TipoDocumentoDAOImpl - Ejecutando query: SELECT id, tipo FROM tipo_documento WHERE id = ? con ID: 1
2025-05-14 08:31:34 [main] INFO  bibliotecaudb.dao.biblioteca.impl.PrestamoDAOImpl - Ejecutando query: SELECT id, id_usuario, id_ejemplar, fecha_prestamo, fecha_devolucion, fecha_limite, mora FROM prestamos WHERE id = ? con ID: 18
2025-05-14 08:31:34 [main] INFO  bibliotecaudb.dao.usuario.impl.UsuarioDAOImpl - Ejecutando query: SELECT id, nombre, correo, contrasena, id_tipo_usuario, estado FROM usuarios WHERE id = ? para ID: 3
2025-05-14 08:31:34 [main] INFO  bibliotecaudb.dao.usuario.impl.TipoUsuarioDAOImpl - Ejecutando query: SELECT id, tipo FROM tipo_usuario WHERE id = ? con ID: 3
2025-05-14 08:31:34 [main] INFO  bibliotecaudb.dao.biblioteca.impl.EjemplarDAOImpl - Ejecutando query: SELECT id, id_documento, ubicacion, estado FROM ejemplares WHERE id = ? con ID: 36
2025-05-14 08:31:34 [main] INFO  bibliotecaudb.dao.biblioteca.impl.DocumentoDAOImpl - Ejecutando query: SELECT id, titulo, autor, editorial, anio_publicacion, id_tipo_documento FROM documentos WHERE id = ? con ID: 23
2025-05-14 08:31:34 [main] INFO  bibliotecaudb.dao.biblioteca.impl.TipoDocumentoDAOImpl - Ejecutando query: SELECT id, tipo FROM tipo_documento WHERE id = ? con ID: 1
2025-05-14 08:31:34 [main] INFO  bibliotecaudb.dao.biblioteca.impl.MoraAnualDAOImpl - Ejecutando query: SELECT anio, mora_diaria FROM mora_anual WHERE anio = ? para año: 2025
2025-05-14 08:31:34 [main] INFO  bibliotecaudb.servicios.impl.MoraServiceImpl - Tasa de mora anual (2025) encontrada: 0.30
2025-05-14 08:31:34 [main] INFO  bibliotecaudb.servicios.impl.MoraServiceImpl - Calculo de mora para Prestamo ID 18: 5 dias * 0.30/día = 1.50
2025-05-14 08:31:34 [main] INFO  bibliotecaudb.dao.biblioteca.impl.PrestamoDAOImpl - Registrando devolución en tabla prestamos para ID: 18
2025-05-14 08:31:34 [main] INFO  bibliotecaudb.dao.biblioteca.impl.PrestamoDAOImpl - Devolución registrada en préstamo. Filas afectadas: 1
2025-05-14 08:31:34 [main] INFO  bibliotecaudb.dao.biblioteca.impl.DevolucionDAOImpl - Ejecutando query: INSERT INTO devoluciones (id_prestamo, fecha_devolucion, mora_pagada) VALUES (?, ?, ?)
2025-05-14 08:31:35 [main] INFO  bibliotecaudb.dao.biblioteca.impl.DevolucionDAOImpl - Devolucion insertada con ID: 10
2025-05-14 08:31:35 [main] INFO  bibliotecaudb.servicios.impl.BibliotecaServiceImpl - Devolución registrada exitosamente ID: 10 para préstamo ID: 18
2025-05-14 08:31:35 [main] INFO  bibliotecaudb.dao.biblioteca.impl.DevolucionDAOImpl - Ejecutando query: SELECT id, id_prestamo, fecha_devolucion, mora_pagada FROM devoluciones WHERE id = ? con ID: 10
2025-05-14 08:31:35 [main] INFO  bibliotecaudb.dao.biblioteca.impl.PrestamoDAOImpl - Ejecutando query: SELECT id, id_usuario, id_ejemplar, fecha_prestamo, fecha_devolucion, fecha_limite, mora FROM prestamos WHERE id = ? con ID: 18
2025-05-14 08:31:35 [main] INFO  bibliotecaudb.dao.usuario.impl.UsuarioDAOImpl - Ejecutando query: SELECT id, nombre, correo, contrasena, id_tipo_usuario, estado FROM usuarios WHERE id = ? para ID: 3
2025-05-14 08:31:35 [main] INFO  bibliotecaudb.dao.usuario.impl.TipoUsuarioDAOImpl - Ejecutando query: SELECT id, tipo FROM tipo_usuario WHERE id = ? con ID: 3
2025-05-14 08:31:35 [main] INFO  bibliotecaudb.dao.biblioteca.impl.EjemplarDAOImpl - Ejecutando query: SELECT id, id_documento, ubicacion, estado FROM ejemplares WHERE id = ? con ID: 36
2025-05-14 08:31:35 [main] INFO  bibliotecaudb.dao.biblioteca.impl.DocumentoDAOImpl - Ejecutando query: SELECT id, titulo, autor, editorial, anio_publicacion, id_tipo_documento FROM documentos WHERE id = ? con ID: 23
2025-05-14 08:31:35 [main] INFO  bibliotecaudb.dao.biblioteca.impl.TipoDocumentoDAOImpl - Ejecutando query: SELECT id, tipo FROM tipo_documento WHERE id = ? con ID: 1
2025-05-14 08:31:35 [main] INFO  bibliotecaudb.pruebas.PruebasBibliotecaService - ÉXITO: Devolución registrada. ID: 10, Mora Pagada: 1.50
2025-05-14 08:31:35 [main] INFO  bibliotecaudb.dao.biblioteca.impl.EjemplarDAOImpl - Ejecutando query: SELECT id, id_documento, ubicacion, estado FROM ejemplares WHERE id = ? con ID: 36
2025-05-14 08:31:35 [main] INFO  bibliotecaudb.dao.biblioteca.impl.DocumentoDAOImpl - Ejecutando query: SELECT id, titulo, autor, editorial, anio_publicacion, id_tipo_documento FROM documentos WHERE id = ? con ID: 23
2025-05-14 08:31:35 [main] INFO  bibliotecaudb.dao.biblioteca.impl.TipoDocumentoDAOImpl - Ejecutando query: SELECT id, tipo FROM tipo_documento WHERE id = ? con ID: 1
2025-05-14 08:31:35 [main] INFO  bibliotecaudb.pruebas.PruebasBibliotecaService - Verificación: Ejemplar ID 36 está ahora DISPONIBLE.
2025-05-14 08:31:35 [main] INFO  bibliotecaudb.pruebas.PruebasBibliotecaService - 
--- Pruebas de Configuración (Admin) ---
2025-05-14 08:31:35 [main] INFO  bibliotecaudb.pruebas.PruebasBibliotecaService - 
[Prueba Config 6: Actualizar Política Alumnos]
2025-05-14 08:31:35 [main] INFO  bibliotecaudb.dao.biblioteca.impl.PoliticasPrestamosDAOImpl - Ejecutando query: SELECT id_politica, id_tipo_usuario, max_ejemplares_prestamo, dias_prestamo_default FROM politicas_prestamo ORDER BY id_tipo_usuario
2025-05-14 08:31:35 [main] INFO  bibliotecaudb.dao.usuario.impl.TipoUsuarioDAOImpl - Ejecutando query: SELECT id, tipo FROM tipo_usuario WHERE id = ? con ID: 1
2025-05-14 08:31:35 [main] INFO  bibliotecaudb.dao.usuario.impl.TipoUsuarioDAOImpl - Ejecutando query: SELECT id, tipo FROM tipo_usuario WHERE id = ? con ID: 2
2025-05-14 08:31:35 [main] INFO  bibliotecaudb.dao.usuario.impl.TipoUsuarioDAOImpl - Ejecutando query: SELECT id, tipo FROM tipo_usuario WHERE id = ? con ID: 3
2025-05-14 08:31:35 [main] INFO  bibliotecaudb.dao.biblioteca.impl.PoliticasPrestamosDAOImpl - Actualizando política para tipo_usuario ID: 3
2025-05-14 08:31:35 [main] INFO  bibliotecaudb.dao.biblioteca.impl.PoliticasPrestamosDAOImpl - Política de préstamo actualizada. Filas afectadas: 1
2025-05-14 08:31:35 [main] INFO  bibliotecaudb.dao.biblioteca.impl.PoliticasPrestamosDAOImpl - Ejecutando query: SELECT id_politica, id_tipo_usuario, max_ejemplares_prestamo, dias_prestamo_default FROM politicas_prestamo ORDER BY id_tipo_usuario
2025-05-14 08:31:35 [main] INFO  bibliotecaudb.dao.usuario.impl.TipoUsuarioDAOImpl - Ejecutando query: SELECT id, tipo FROM tipo_usuario WHERE id = ? con ID: 1
2025-05-14 08:31:35 [main] INFO  bibliotecaudb.dao.usuario.impl.TipoUsuarioDAOImpl - Ejecutando query: SELECT id, tipo FROM tipo_usuario WHERE id = ? con ID: 2
2025-05-14 08:31:35 [main] INFO  bibliotecaudb.dao.usuario.impl.TipoUsuarioDAOImpl - Ejecutando query: SELECT id, tipo FROM tipo_usuario WHERE id = ? con ID: 3
2025-05-14 08:31:35 [main] INFO  bibliotecaudb.pruebas.PruebasBibliotecaService - ÉXITO: Política de alumnos actualizada. Nuevo max: 4
2025-05-14 08:31:35 [main] INFO  bibliotecaudb.dao.biblioteca.impl.PoliticasPrestamosDAOImpl - Actualizando política para tipo_usuario ID: 3
2025-05-14 08:31:35 [main] INFO  bibliotecaudb.dao.biblioteca.impl.PoliticasPrestamosDAOImpl - Política de préstamo actualizada. Filas afectadas: 1
2025-05-14 08:31:35 [main] INFO  bibliotecaudb.pruebas.PruebasBibliotecaService - 
=== FIN DE PRUEBAS DEL SERVICIO DE BIBLIOTECA ===
